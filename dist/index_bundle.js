!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),i=r(o),c=n(22),s=n(28),l=n(26),u=n(25),d=n(30),p=n(24),f=n(27),v=n(23),h=n(32),m=r(h),y=n(33),g=r(y),b=n(34),w=r(b),E=(n(35),function(e){(0,a.ParseConfig)(e,k),(0,l.SetupGraphs)(),(0,d.BindTabEvents)(),(0,f.BindCopyLinkEvents)(),(0,g.default)(),(0,w.default)()}),k=function(e){(0,f.AddShareSettingsToConfig)(e);var t=(0,p.CreateMap)(e.map);(0,s.CreateBaseLayers)(t,e.baselayers),(0,v.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,c.SetupPanel)(e.layers,e.layout),(0,i.default)(t),(0,m.default)(e.logo),e.tab&&(0,d.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,u.BindGraphEvents)(t),(0,f.BindUpdateShareUrl)(t),(0,u.SetupPointsOfInterest)(t,e.pois),(0,f.updateShareUrl)()};window.Base=E,t.default={Base:E}},function(e,t){"use strict";function n(e,t){a(e,t)}function r(e){var t;return t=!window.XMLHttpRequest&&window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest,t.onreadystatechange=function(){4===t.readyState&&e(t.response)},t}function a(e,t){var n=r(function(e){var n=o(e);t(n)});n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){return e=JSON.parse(e),i(e),c(e),e}function i(e){e.map||(e.map={})}function c(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)l(t[n],a),s(t[n],e.defaultLayerOpacity)}}function s(e,t){e.opacity=e.opacity||t}function l(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=n,t.GetAjaxObject=r},function(e,t,n){"use strict";function r(e){var t=new a.OpenStreetMapProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!0,showPopup:!1});e.addControl(n);var r=n.searchElement.elements;L.DomEvent.on(r.container,"click",function(e){L.DomEvent.stopPropagation(e);for(var t=r.form.getElementsByClassName("results")[0].children,n=0;n<t.length;n++)e.target===t[n]&&r.container.classList.remove("active");ga("send","event",{eventCategory:"map",eventAction:"search",eventLabel:"click",nonInteraction:!1})}),L.DomEvent.on(r.container,"keydown",function(e){L.DomEvent.stopPropagation(e),13!=e.which&&13!=e.keyCode||(r.container.classList.remove("active"),ga("send","event",{eventCategory:"map",eventAction:"search address",eventLabel:e.target.value,nonInteraction:!1}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var l=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(l).default}});var u=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(g),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),l=n(13),u=r(l),d=n(16),p=r(d),f=n(14),v=n(15),h=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(e){var t=e.result;return""+t.label},marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1}},m={},y=["dragging","touchZoom","doubleClickZoom","scrollWheelZoom","boxZoom","keyboard"],g={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.handlersDisabled=!1,this.options=i({},h(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,l=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new u.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var d=this.searchElement.elements,v=d.container,m=d.form,y=d.input,g=(0,f.createElement)("a",a.button,v);g.title=o,g.href="#",g.addEventListener("click",function(e){t.onClick(e)},!1);var b=(0,f.createElement)("a",a.resetButton,m);b.innerHTML="X",g.href="#",b.addEventListener("click",function(){t.clearResults(null,!0)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;y.value=n.label,t.onSubmit({query:n.label,data:n})}}),m.appendChild(this.resultList.elements.container),y.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},l),!0),y.addEventListener("keydown",function(e){return t.selectResult(e)},!0),y.addEventListener("keydown",function(e){return t.clearResults(e,!0)},!0)),m.addEventListener("mouseenter",function(e){return t.disableHandlers(e)},!0),m.addEventListener("mouseleave",function(e){return t.restoreHandlers(e)},!0),this.elements={button:g,resetButton:b}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,f.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?((0,f.removeClassName)(n,"active"),this.clearResults()):((0,f.addClassName)(n,"active"),r.focus())},disableHandlers:function(e){var t=this,n=this.searchElement.elements.form;this.handlersDisabled||e&&e.target!==n||(this.handlersDisabled=!0,y.forEach(function(e){t.map[e]&&(m[e]=t.map[e].enabled(),t.map[e].disable())}))},restoreHandlers:function(e){var t=this,n=this.searchElement.elements.form;!this.handlersDisabled||e&&e.target!==n||(this.handlersDisabled=!1,y.forEach(function(e){m[e]&&t.map[e].enable()}))},selectResult:function(e){if([v.ENTER_KEY,v.ARROW_DOWN_KEY,v.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList;if(e.keyCode===v.ENTER_KEY){var r=n.select(n.selected);return void this.onSubmit({query:t.value,data:r})}var a=n.count()-1;if(!(a<0)){var o="ArrowDown"===e.code?~~n.selected+1:~~n.selected-1,i=o<0?a:o>a?0:o,c=n.select(i);t.value=c.label}}},clearResults:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e.keyCode===v.ESCAPE_KEY){var n=this.searchElement.elements.input,r=this.options,a=r.keepResult,o=r.autoComplete;!t&&a||(n.value="",this.markers.clearLayers()),o&&this.resultList.clear()}},autoSearch:function(e){return new Promise(function(t,n){function r(){return t()}var a,o,i;return v.SPECIAL_KEYS.includes(e.keyCode)?t():(a=e.target.value,o=this.options.provider,a.length?o.search({query:a}).then(function(e){return i=e,this.resultList.render(i),r.call(this)}.$asyncbind(this,n),n):(this.resultList.clear(),r.call(this)))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(n){return a=n,a&&a.length>0&&this.showResult(a[0],e),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e,t){var n=t.query,r=this.options.autoClose,a=Object.keys(this.markers._layers);a.length>=this.options.maxMarkers&&this.markers.removeLayer(a[0]);var o=this.addMarker(e,n);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:o}),r&&this.closeResults()},closeResults:function(){var e=this.searchElement.elements.container;e.classList.contains("active")&&(0,f.removeClassName)(e,"active"),this.restoreHandlers(),this.clearResults()},addMarker:function(e,t){var n=this,r=this.options,a=r.marker,o=r.showPopup,i=r.popupFormat,c=new L.Marker([e.y,e.x],a),s=e.label;return"function"==typeof i&&(s=i({query:t,result:e})),c.bindPopup(s),this.markers.addLayer(c),o&&c.openPopup(),a.draggable&&c.on("dragend",function(e){n.map.fireEvent("geosearch/marker/dragend",{location:c.getLatLng(),event:e})}),c},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}function a(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:a,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var o=r({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});o(),a(),e.exports={$asyncbind:o,$asyncspawn:a}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r===1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){h&&f&&(h=!1,f.length?v=f.concat(v):m=-1,v.length&&c())}function c(){if(!h){var e=a(i);h=!0;for(var t=v.length;t;){for(f=v,v=[];++m<t;)f&&f[m].run();m=-1,t=v.length}f=null,h=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,v=[],h=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||h||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){(function(e){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||void 0}).call(t,function(){return this}())},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return h[v]=r,f(v),v++}function a(e){delete h[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(m)setTimeout(i,0,e);else{var t=h[e];if(t){m=!0;try{o(t)}finally{a(e),m=!1}}}}function c(){f=function(e){t.nextTick(function(){i(e)})}}function s(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),f=function(n){e.postMessage(t+n,"*")}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},f=function(t){e.port2.postMessage(t)}}function d(){var e=y.documentElement;f=function(t){var n=y.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function p(){f=function(e){setTimeout(i,0,e)}}if(!e.setImmediate){var f,v=1,h={},m=!1,y=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,"[object process]"==={}.toString.call(e.process)?c():s()?l():e.MessageChannel?u():y&&"onreadystatechange"in y.createElement("script")?d():p(),g.setImmediate=r,g.clearImmediate=a}}("undefined"==typeof self?"undefined"==typeof e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(e){}function r(e,t){this.resolve=e,this.reject=t}function a(){}function o(n,r){var o=new a;try{this._resolver(function(a){return e(a)?a.then(n,r):t(o,a,n)},function(e){t(o,e,r)})}catch(e){t(o,e,r)}return o}function i(e){this._resolver=e,this.then=o}return a.prototype={resolve:n,reject:n,then:r},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=h,r=m;return h=m=void 0,C=t,g=e.apply(r,n)}function o(e){return C=e,b=setTimeout(u,t),O?a(e):g}function c(e){var n=e-w,r=e-C,a=t-n;return _?k(a,y-r):a}function l(e){var n=e-w,r=e-C;return void 0===w||n>=t||n<0||_&&r>=y}function u(){var e=L();return l(e)?d(e):void(b=setTimeout(u,c(e)))}function d(e){return b=void 0,S&&h?a(e):(h=m=void 0,g)}function p(){void 0!==b&&clearTimeout(b),C=0,h=w=m=b=void 0}function f(){return void 0===b?g:d(L())}function v(){var e=L(),n=l(e);if(h=arguments,m=this,w=e,n){if(void 0===b)return o(w);if(_)return b=setTimeout(u,t),a(w)}return void 0===b&&(b=setTimeout(u,t)),g}var h,m,y,g,b,w,C=0,O=!1,_=!1,S=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(O=!!n.leading,_="maxWait"in n,y=_?E(i(n.maxWait)||0,t):y,S="trailing"in n?!!n.trailing:S),v.cancel=p,v.flush=f,v}function r(e){var t="undefined"==typeof e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==("undefined"==typeof e?"undefined":c(e))}function o(e){return"symbol"==("undefined"==typeof e?"undefined":c(e))||a(e)&&w.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=f.test(e);return n||v.test(e)?h(e.slice(2),n?2:8):p.test(e)?l:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,u="[object Symbol]",d=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,m="object"==("undefined"==typeof t?"undefined":c(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=Object.prototype,w=b.toString,E=Math.max,k=Math.min,L=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),c=n(14),s=n(15),l=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.handleSubmit,o=void 0===r?function(){}:r,i=n.searchLabel,s=void 0===i?"search":i,l=n.classNames,u=void 0===l?{}:l;a(this,e);var d=(0,c.createElement)("div",["geosearch",u.container].join(" ")),p=(0,c.createElement)("form",["",u.form].join(" "),d),f=(0,c.createElement)("input",["glass",u.input].join(" "),p);f.type="text",f.placeholder=s,f.addEventListener("input",function(e){t.onInput(e)},!1),f.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),f.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),f.addEventListener("focus",function(e){t.onFocus(e)},!1),f.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:d,form:p,input:f},this.handleSubmit=o}return i(e,[{key:"onFocus",value:function(){(0,c.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,c.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,c.removeClassName)(o,"error"),(0,c.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,c.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,c.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===s.ESCAPE_KEY&&((0,c.removeClassName)(n,"pending"),(0,c.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===s.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){var t=this.elements.input;t.value=e}}]),e}();t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,l=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:l},this.selected=-1;var u=(0,o.createElement)("div",i("results",l.container)),d=(0,o.createElement)("div",i(l.item));u.addEventListener("click",this.onClick,!0),this.elements={container:u,resultItem:d}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results?this.results.length:0}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key"),i=e.results[o];r({result:i})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(18),p=r(d),f=n(14),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params,o=this.getParamString(l({},a,{query:t,jsonp:r}));return n+"//dev.virtualearth.net/REST/v1/Locations?"+o}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,f.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.options=t}return i(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),d=r(u),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(s({},r,{f:"json",text:t}));return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+a}},{key:"parse",value:function(e){var t=e.data;return t.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],
raw:e}})}}]),t}(d.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),d=r(u),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(s({},r,{address:t})),o=r&&r.key?"https:":n;return o+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){var t=e.data;return t.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(d.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(18),p=r(d),f=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=this.options.params,r=this.getParamString(l({},n,{format:"json",q:t}));return"https://nominatim.openstreetmap.org/search?"+r}},{key:"endpointReverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=this.options.params,r=this.getParamString(l({},n,{format:"json",osm_id:t.raw.osm_id,osm_type:this.translateOsmType(t.raw.osm_type)}));return"https://nominatim.openstreetmap.org/reverse?"+r}},{key:"parse",value:function(e){var t=e.data;return t.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c,s;return r=e.query,a=e.data,o=~location.protocol.indexOf("http")?location.protocol:"https:",i=a?this.endpointReverse({data:a,protocol:o}):this.endpoint({query:r,protocol:o}),fetch(i).then(function(e){return c=e,c.json().then(function(e){return s=e,t(this.parse({data:a?[s]:s}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"translateOsmType",value:function(e){return"node"===e?"N":"way"===e?"W":"relation"===e?"R":""}}]),t}(p.default);t.default=f},function(e,t,n){"use strict";function r(){return O.filter(function(e){return e.active})}function a(){}function o(){return E}function i(e,t){O=t["layer-groups-order"],E=f(t["layer-groups-order"]),v(E,e),l(),s()}function c(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1}function s(){var e=document.getElementById("right-panel");e.onscroll=d}function l(){if(!c()){var e=d3.select("#right-panel-drag-overlay");e.style("cursor","ew-resize"),e.call(d3.drag().on("drag",function(){u.call(this)}))}}function u(){d(),p()}function d(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=700,i=document.getElementById("graph-list");e=a.scrollHeight+i.scrollHeight+o}else{var c=document.getElementById("layer-list");e=a.scrollHeight+c.scrollHeight}e=e>n?""+e+"px":null,r.style.height=e}function p(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=""+s+"px",e.style("width",""+s+"px")}function f(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){ga("send","event",{eventCategory:"layer list",eventAction:"toggle "+!e.active,eventLabel:e.name,nonInteraction:!1}),e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),d(),(0,C.updateShareUrl)()}).text(e.name)}).append("div").attr("class","layer-group")}function v(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));e.layerDiv=t,h(e,t),y(e,t),g(e,t),t.node().appendChild(b(e))})}function h(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,k.toggleLayer)(e),m(e)})}function m(e){if(e.layerDiv.select(".layer-tools-wrapper").classed("active",e.active),e.active){var t=e.layerDiv.select(".opacity-slider-handle").node();(0,L.setOpacitySliderPosition)(e,t,e.opacitiy)}}function y(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function g(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn-wrapper").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return ga("send","event",{eventCategory:"layer info",eventAction:"clicked",eventLabel:e.name+" "+!d3.select(this).classed("active"),nonInteraction:!1}),!d3.select(this).classed("active")})}).append("img").attr("class","layer-info-icon").attr("src","imgs/more-info-icon-64x64.png").attr("alt","Read more about the "+e.name+" layer").attr("title","Read more about the "+e.name+" layer"),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function b(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,L.makeOpacitySlider)(e),a=w(e);return n.appendChild(a),n.appendChild(r),n}function w(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.GetActiveLayerGroups=r,t.resetPanelState=a,t.getLayerGroups=o,t.SetupPanel=i,t.updatePanelDragOverlayHeight=d,t.toggleLayerToolsUI=m;var E,k=n(23),L=n(31),C=n(27),O=[]},function(e,t,n){"use strict";function r(){return y}function a(){for(;g.length;){var e=g.pop();e.active=!1,u(e),document.getElementById(e.id).checked=!1,(0,m.toggleLayerToolsUI)(e)}}function o(e,t){var n,r,a,o,i,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,i=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===i){c(o[r]),s=!0;break}if(s)break}}}function i(e){e.active?(u(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle off",eventLabel:e.name,nonInteraction:!1})):(c(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle on",eventLabel:e.name,nonInteraction:!1}))}function c(e){var t=(0,v.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||f(e),t.addLayer(e.mapLayer),l(e),s(),(0,h.updateShareUrl)()}function s(){var e,t,n;for(t=0,n=g.length;t<n;t++)e=g[t],"overlay"===e.type&&e.mapLayer.bringToFront()}function l(e){y.push(e.id),g.push(e)}function u(e){var t=(0,v.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),d(e),(0,h.updateShareUrl)()}function d(e){var t=y.indexOf(e.id);t!==-1&&(y.splice(t,1),g.splice(t,1))}function p(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function f(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||.75,tileSize:e.tileSize||document.getElementById("map").clientWidth})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.turnOffNonBaseLayers=a,t.CreateDefaultLayers=o,t.toggleLayer=i,t.enableLayer=c,t.disableLayer=u,t.updateLayerOpacity=p;var v=n(24),h=n(27),m=n(22),y=[],g=[]},function(e,t,n){"use strict";function r(){(0,c.removeAllPointsOfInterest)(),(0,l.removeAllGraphs)(),(0,s.turnOffNonBaseLayers)(),(0,u.resetPanelState)(),(0,u.updatePanelDragOverlayHeight)(),(0,d.updateShareUrl)()}function a(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],a=e.zoom||6;i=L.map(t,n).setView(r,a),L.control.attribution().addTo(i);var o=document.getElementsByClassName("leaflet-control-zoom-in")[0];o.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom in",nonInteraction:!1})});var c=document.getElementsByClassName("leaflet-control-zoom-out")[0];return c.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom out",nonInteraction:!1})}),i.on("dragend",function(e){ga("send","event",{eventCategory:"map",eventAction:"drag",eventLabel:JSON.stringify(i.getBounds()),nonInteraction:!0})}),i.on("zoomend",function(e){ga("send","event",{eventCategory:"map",eventAction:"zoom",eventLabel:JSON.stringify(i.getBounds()),nonInteraction:!0})}),i}function o(){return i}Object.defineProperty(t,"__esModule",{value:!0}),t.clearMap=r,t.CreateMap=a,t.GetMap=o;var i,c=n(25),s=n(23),l=n(26),u=n(22),d=n(27)},function(e,t,n){"use strict";function r(e){e.on("click",o)}function a(){var e=(0,k.GetMap)();O.forEach(function(t){e.removeLayer(t.marker)}),O=[]}function o(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=l(n,r,null);u(a),v(t,a),(0,E.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:JSON.stringify({action:"add map marker",lat:n,long:r}),nonInteraction:!1})}function i(e,t,n,r){var a=c();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"remove",nonInteraction:!1}),f(r),g(e,t,n),(0,C.updatePanelDragOverlayHeight)(),(0,E.updateShareUrl)()})}function c(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function s(){return O}function l(e,t,n){return{lat:e,lng:t,plots:n||["baseline","2015","thresholds"]}}function u(e){O.push(e)}function d(e,t){p(t);var n=s(),e=(0,k.GetMap)();n.forEach(function(t){v(e,t)})}function p(e){Array.prototype.push.apply(O,e)}function f(e){O=O.filter(function(t){return!(t===e)})}function v(e,t){var n=(0,b.createGraphDiv)(t),r=(0,w.createMarker)(t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),i(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,w.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,w.getIcon)("graph"))}),r.on("click dblclick",function(e){h(e,t)}),r.on("mouseover",function(e){r.setIcon((0,w.getIcon)("hover"))}),r.on("mouseout",function(e){r.setIcon((0,w.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}function h(e,t){e.originalEvent.stopPropagation(),(0,L.HandleTabChange)("graphs-active"),y(t),m(t)}function m(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}function y(e){var t=document.getElementById("right-panel");t.scrollTop=e.graphDiv.offsetTop}function g(e,t,n){var r=document.getElementById("graph-list");r.removeChild(t),e.removeLayer(n),(0,E.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.BindGraphEvents=r,t.removeAllPointsOfInterest=a,t.GetAllPointsOfInterest=s,t.createPOI=l,t.SetupPointsOfInterest=d;var b=n(26),w=n(29),E=n(27),k=n(24),L=n(30),C=n(22),O=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",d),o(),W=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){for(var e=document.getElementById("graph-list");e.firstChild;)e.removeChild(e.firstChild)}function o(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function i(e,t,n){n=n.replace(/\[|\]|\'/g,"").split(", "),b(n,e,t),(0,z.updatePanelDragOverlayHeight)()}function c(e,t){var n="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+e.lng+","+e.lat,r=(0,K.GetAjaxObject)(function(n){i(t,e,n)});r.open("GET",n),r.send()}function s(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function l(e){var t,n,r,a,o=46,i={};for(i.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),i.hasOwnProperty(n)||(i[n]=[],i.keys.push(n)),i[n].push(t);var c=[];for(r=0;r<i.keys.length;r++)n=i.keys[r],i[n].length!==o&&c.push(n);for(r=0;r<c.length;r++)n=c[r],delete i[n],i.keys.splice(i.keys.indexOf(n),1);var s,l;for(i.baseline=[],r=0;r<o;r++){for(s=[],a=r;a<e.length;a+=o)s.push(parseInt(e[a][1],10));l=u(s),i.baseline.push(l)}return i}function u(e){var t,n,r=0;for(t=0,n=e.length;t<n;t++)r+=e[t];return(r/n).toString()}function d(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&(ga("send","event",{eventCategory:"graph type",eventAction:"click",eventLabel:e,nonInteraction:!1}),p(e,t))}function p(e){if(!f())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;h(),m(e),f()||v(n,t,r),(0,$.updateShareUrl)()}function f(){return void 0===document.getElementsByClassName("graph-elem")[0]}function v(e,t,n){var r=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,a=document.getElementsByClassName("graph-elem")[0].scrollHeight,o=a/t,i=r+(n-e)*o;document.getElementById("right-panel").scrollTop=i}function h(){var e=document.getElementsByClassName("graph-type-btn active")[0],t="graph-"+e.getAttribute("data-type");e.classList.remove("active"),document.getElementById("graph-list").classList.remove(t)}function m(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}function y(e){var t=3,n=w(e.lat,t),r=w(e.lng,t),a=document.createElement("div"),o=document.createElement("div");a.appendChild(o);var i=g(e),s=document.createTextNode("Lat: "+n+", Long: "+r),l=document.createElement("div");l.className="graph-lat-lon",l.appendChild(s),o.appendChild(i),o.appendChild(l);var u=document.createElement("div");u.classList.add("graph-loading-div"),a.appendChild(u),a.classList.add("graph-elem"),a.classList.add("graph-loading"),o.classList.add("graph-elem-header");var d=document.getElementById("graph-list");return d.appendChild(a),c(e,a),a}function g(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){var n=(0,q.GetMap)();n.panTo([e.lat,e.lng]),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:'{"show on map":{"lat":'+e.lat+',"long":'+e.lng+"}}",nonInteraction:!1})}.bind(t,e),t}function b(e,t,n){e=s(e);var r=l(e);E(e,t),k(r,t,n),L(r,t,n),t.classList.remove("graph-loading")}function w(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function E(e,t){var n={top:30,right:20,bottom:30,left:29},r=580-n.left-n.right,a=270-n.top-n.bottom,o=d3.scaleTime().range([0,r]).domain([D(e[0][0]),D(e[e.length-1][0])]),i=d3.scaleLinear().range([a,0]).domain([0,100]),c=d3.axisBottom(o).ticks(16).tickFormat(function(e){return e.getFullYear()}),s=d3.axisLeft(i).ticks(6),l=d3.line().x(function(e){return o(D(e[0]))}).y(function(e){return i(e[1])}),u=d3.select(t).append("div").classed("timeseries-graph",!0),d=u.append("svg").attr("height",a+n.top+n.bottom).attr("viewBox",function(){var e=r+n.left+n.right,t=a+n.top+n.bottom;return"0 0 "+e+" "+t}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+n.left+","+n.top+")");d.call(W),_(e,l,d),d.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(c),d.append("g").attr("class","y axis").call(s),A(e,l,d)}function k(e,t,n){function r(e){return Z[(e-15)/30]}var a={},o={top:30,right:20,bottom:30,left:29},i=500-o.left-o.right,c=270-o.top-o.bottom,s=e.baseline,l=d3.scaleLinear().range([0,i]).domain([0,365]),u=d3.scaleLinear().range([c,0]).domain([0,100]),d=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(r),p=d3.axisLeft(u).ticks(6),f=d3.line().x(function(e,t){return l(Array.isArray(e)?U(e[0]):8*t+3)}).y(function(e){return u(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),h=v.append("svg").attr("viewBox",function(){var e=i+o.left+o.right,t=c+o.top+o.bottom;return"0 0 "+e+" "+t}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+o.left+","+o.top+")");h.call(W),h.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(d),h.append("g").attr("class","y axis").call(p);var m,y,g;for(y=0,g=n.plots.length;y<g;y++)m=n.plots[y],"thresholds"!==m&&(a[m]={path:_(e[m],f,h)});for(y=0,g=n.plots.length;y<g;y++)m=n.plots[y],"thresholds"!==m&&(a[m].points=A(e[m],f,h));var b=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){x(b,t,"overlapping",n,a,e,f,h,s)}),x(b,"baseline","overlapping",n,a,e,f,h,s)}function L(e,t,n){var r=490,a=490,o=Math.min(r,a)/2-30,i=e.baseline,c=C(e),s=O(i,c[1][0]),l=d3.scaleLinear().domain([0,100]).range([0,o]),u=d3.radialLine().radius(function(e){return l(Array.isArray(e)?e[1]:e)}).angle(function(e,t){var n=Array.isArray(e)?U(e[0]):8*t+3;return(n-1)%365/365*(2*Math.PI)}),d=d3.select(t).append("div").classed("polar-graph",!0),p=d.append("svg").attr("viewBox",function(){return"0 0 "+r+" "+a}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r/2+","+a/2+")");p.call(W);var f=p.append("g").attr("class","r axis").selectAll("g").data(l.ticks(5).slice(1)).enter().append("g");f.append("circle").attr("r",l),f.append("text").attr("y",function(e){return-l(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var v=p.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});v.append("line").attr("x2",o),v.append("text").attr("x",o+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(o+6)+",0)":null}).text(function(e){return Z[e/30]});var h=p.append("g").selectAll("g").data(s).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",o),h.append("text").attr("x",function(e){var t=e.data[1][0];return t<360&&t>180?o+30:o-30}).attr("y",function(e){return e.data[1][0]%365/365*(2*Math.PI)+6}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"middle":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(o+6)+",0)":null}).text(function(e){return e.label}),h.style("opacity",n.plots.indexOf("thresholds")!==-1?1:0);var m=c[1][0],y=(m+182.5)%365,g=[m,100],b=[y,100],w=[g,b];S(w,u,p).classed("growing-season-line","true"),S(c,u,p).classed("center-line","true"),p.selectAll("point").data([c[1]]).enter().append("circle").attr("class","center").attr("r",4).attr("transform",function(e){var t=u([e]).slice(1).slice(0,-1);return"translate("+t+")"}).attr("stroke","#000").attr("fill","#ea0c48").on("mouseover",function(e){W.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5)}).on("mouseout",function(e){W.hide(),this.setAttribute("r",4)});var E,k,L,_={};for(k=0,L=n.plots.length;k<L;k++)E=n.plots[k],"thresholds"!==E&&(_[E]={path:S(e[E],u,p)});for(k=0,L=n.plots.length;k<L;k++)E=n.plots[k],"thresholds"!==E&&(_[E].points=A(e[E],u,p));var P=d.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){x(P,t,"polar",n,_,e,u,p,i)}),x(P,"baseline","polar",n,_,e,u,p,i);var j=P.append("div").classed("threshold-checkbox",!0);j.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.lat.toString().replace(".","")+"-"+n.lng.toString().replace(".","")).property("checked",n.plots.indexOf("thresholds")!==-1).on("change",function(e){h.style("opacity",this.checked?1:0);var t=this.checked?"off":"on";this.checked?N(n,"thresholds"):B(n,"thresholds"),(0,$.updateShareUrl)(),R("threshold polar timeseries "+t)}),j.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.lat.toString().replace(".","")+"-"+n.lng.toString().replace(".",""))}function C(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,l,u,d,p,f=1e6,v=0,h=e.baseline;for(t=0;t<r/2;t++){for(l=0,u=0,p=0;p<r/2;p++)n=(t+p)%46,d=(n+23)%46,l+=parseInt(h[n],10),u+=parseInt(h[d],10);s=Math.abs(l-u),s<f&&(f=s,v=t)}var m=parseInt(h[v],10),y=parseInt(-h[v+23],10),g=(m+y)/2,b=Math.abs(i-g),w=Math.abs(-i-g);w<b&&(v+=23);var E=[0,0],k=[8*v+3,i];return[E,k]}function O(e,t){var n=Math.floor((t-3)/8);n+=n>22?-23:23;var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,l=.15*i,u=.8*i,d=!1,p=!1;for(i=0,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10),!d&&i>l?(c=a,d=!0):!p&&i>u&&(s=a,p=!0);var f=[0,0],v=[8*c+3,100],h=[8*s+3,100];return[{label:"15%",data:[f,v]},{label:"80%",data:[f,h]}]}function _(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function S(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function A(e,t,n){return n.selectAll("point").data(e).enter().append("circle").attr("r",2).attr("class","point").attr("transform",function(e,n){var r=Array.isArray(e)?e:[8*n+3,e],a=t([r]).slice(1).slice(0,-1);return"translate("+a+")"}).attr("stroke","#000").attr("fill",function(e,t){var n=Array.isArray(e)?e[0].substring(0,4):0;return G(n)}).on("mouseover",P).on("mouseout",j)}function P(e){var t=Array.isArray(e)?F(e[0])+": "+e[1]:"Average: "+e;W.show(t),this.setAttribute("r","4")}function j(e){W.hide(),this.setAttribute("r","2");var t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");ga("send","event",{eventCategory:"graph",eventAction:"hover",eventLabel:t+" tool tip",nonInteraction:!1})}function x(e,t,n,r,a,o,i,c,s){var l=e.append("div"),u=r.lat,d=r.lng;l.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+d.toString().replace(".","")).attr("data-link",t+u.toString().replace(".","")+"-"+d.toString().replace(".","")).attr("value",t).property("checked",r.plots.indexOf(t)!==-1).on("change",function(e){var l=this.value;this.checked?(T(a,l,o,i,c,s),N(r,t),R(l+" "+n+" timeseries on")):(I(a,l),B(r,t),R(l+" "+n+" timeseries off")),M(t+u.toString().replace(".","")+"-"+d.toString().replace(".",""),this.checked),(0,$.updateShareUrl)()}),l.append("label").text("baseline"!==t?t:"Baseline").attr("for",n+"-"+t+u.toString().replace(".","")+"-"+d.toString().replace(".","")),l.append("div").style("background",G("baseline"!==t?t:0)).classed("graph-pip-example",!0)}function I(e,t){e[t].path.remove(),e[t].points.remove()}function T(e,t,n,r,a){e.hasOwnProperty(t)||(e[t]={}),e[t].path=_(n[t],r,a),e[t].points=A(n[t],r,a)}function M(e,t,n){d3.selectAll("input[data-link='"+e+"']").each(function(e,n){var r=d3.select(this);r.property("checked")!==t&&(r.property("checked",t),r.dispatch("change"))})}function B(e,t){var n=e.plots.indexOf(t);n!==-1&&e.plots.splice(n,1)}function N(e,t){e.plots.indexOf(t)===-1&&e.plots.push(t)}function R(e){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:e,nonInteraction:!1})}function G(e){var t=["#ffe476","#036593","#116c91","#1e7390","#2c7b8e","#39828c","#4c8c8a","#5e9589","#719f87","#83a886","#95b183","#a6ba80","#b8c37c","#cacc79","#d6d279","#e2d779","#efdd78","#fbe378"];return 0===e?"#fff":t[parseInt(e,10)%t.length]}function D(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function U(e){return"string"==typeof e?(e=D(e),e.getDOY()):e}function F(e){return"Average"===e?e:(e=D(e),H(e.getMonth())+" "+Y(e.getDate())+", "+e.getFullYear())}function H(e){return J[e]}function Y(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.removeAllGraphs=a,t.HandleGraphTabChange=p,t.createGraphDiv=y;var z=n(22),$=n(27),q=n(24),K=n(2),W={},Z={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},J={0:"Jan.",1:"Feb.",2:"Mar.",3:"Apr.",4:"May",5:"Jun.",6:"Jul.",7:"Aug.",8:"Sep.",9:"Oct.",10:"Nov.",11:"Dec."}},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,H.GetMap)(),n=[b(t),w(t),E(t),L(),k(t),C(),O(),_()];c(i(n)),s(),g()}function o(e){var t=S();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&D(t.layers,e),t.baselayers&&U(t.baselayers,e),t.pois&&F(t.pois,e),t.tab&&(e.tab=t.tab),t.graph&&(e.graph=t.graph),t.layerGroups&&(e.layerGroups=G(t.layerGroups,e)))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}function l(){d3.select(document).on("click",u),d3.select(".shareurl-link a").on("click",p),d3.select(".shareurl-link-url").on("click",v),d3.select(".shareurl-link-popup-remover").on("click",f)}function u(){var e=d3.event,t=[];t=d(e.target);var n,r,a=!0;for(n=0,r=t.length;n<r;n++)try{if(t[n].classList.contains("shareurl-link-popup")||t[n].classList.contains("shareurl-link")){a=!1;break}}catch(e){}if(a){var o=document.getElementsByClassName("shareurl-link-popup").item(0);m(o)}}function d(e){for(var t=[];e&&e.parentNode;)t.push(e),e=e.parentNode;return t}function p(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);d3.select(e).classed("active")?m(e):h(e)}function f(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);m(e)}function v(){y()}function h(e){e.classList.toggle("active"),y(),ga("send","event",{eventCategory:"shareurl",eventAction:"open",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1})}function m(e){ga("send","event",{eventCategory:"shareurl",eventAction:"close",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1}),e.classList.remove("active")}function y(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function g(){var e,t,n,r,a=P(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t),e.addEventListener("click",function(){ga("send","event",{eventCategory:"shareurl",eventAction:this.getAttribute("aria-label"),eventLabel:this.href,nonInteraction:!1})})}function b(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function w(e){return"zoom="+e.getZoom()}function E(e){var t=[],n={},r=(0,z.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function k(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===Y.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function L(){var e=(0,q.GetActiveLayerGroups)();return"layerGroups="+e.map(function(e){return e.id}).join(",")}function C(){var e=(0,$.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng,e.plots&&e.plots.length&&(t+=","+e.plots.join(",")),t+=";"}),t}}function O(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function _(){return"graph="+d3.select(".graph-type-btn.active").attr("data-type")}function S(){var e=window.location.search;if(""!==e)return e=A(e),e=x(e),I(e),e}function A(e){return e=e.substring(1),e=j(e),e.split("&")}function P(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}function j(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function x(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function I(e){e.center&&(e.center=T(e.center)),e.layers&&(e.layers=M(e.layers)),e.baselayers&&(e.baselayers=B(e.baselayers)),e.pois&&(e.pois=N(e.pois)),e.layerGroups&&(e.layerGroups=R(e.layerGroups))}function T(e){return e.split(",")}function M(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];
return r}function B(e){return e.split(",")}function N(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),e.length>2?(0,$.createPOI)(e[0],e[1],e.splice(2)):(0,$.createPOI)(e[0],e[1],null)})}function R(e){return e.split(",")}function G(e,t){t.layout["layer-groups-order"].forEach(function(t){t.active=e.filter(function(e){return e===t.id}).length>0})}function D(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,l=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in l){if(!l.hasOwnProperty(o))return;for(i=l[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function U(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}function F(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o,t.BindCopyLinkEvents=l;var H=n(24),Y=n(28),z=n(23),$=n(25),q=n(22)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],d=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=l(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),ga("send","event",{eventCategory:"map",eventAction:"change base layer",eventLabel:t,nonInteraction:!1}),(0,f.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,p.GetMap)();e.eachLayer(function(t){t.options.type===v&&e.removeLayer(t)})}function s(e){for(var t,n=(0,p.GetMap)(),r=0,a=d.length;r<a;r++)if(t=d[r],t.id===e){t.layer||(t.layer=l(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function l(e){return L.tileLayer(e.url,u(e))}function u(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=v,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var d,p=n(24),f=n(27),v=t.BASE_LAYER_TYPE="baselayer"},function(e,t){"use strict";function n(e,t){return L.marker([e,t],{icon:o})}function r(e){return"hover"===e?i:o}Object.defineProperty(t,"__esModule",{value:!0}),t.createMarker=n,t.getIcon=r;var a=L.Icon.extend({}),o=new a({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),i=new a({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")}function o(){this.classList.contains("active")||(ga("send","event",{eventCategory:"tab",eventAction:"click",eventLabel:this.getAttribute("data-active"),nonInteraction:!1}),i(this.getAttribute("data-active")))}function i(e){s(),c(e),(0,p.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),document.getElementById("map-wrapper").classList.add(e),document.getElementById("right-panel").classList.add(e),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),l(),u(),(0,d.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function l(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}function u(){var e=document.getElementById("right-panel"),t=e.style.width;if(t){var n=d3.select(e).style("min-width").slice(0,-2);parseInt(t.slice(0,-2),10)>parseInt(n,10)||(e.style.width="")}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var d=n(22),p=n(27)},function(e,t,n){"use strict";function r(e,t,n){n=n||e.opacity,t.style.top=""+p(n)+"px"}function a(e){var t=void 0!==e.opacity?e.opacity:1,n=document.createElement("div"),r=i(e,t),a=o("closed",e,r);return n.classList.add("opacity-slider-wrapper"),n.appendChild(r),n.appendChild(a),n}function o(e,t,n){var a=document.createElement("div"),o=document.createElement("img");return a.classList.add("opacity-icon-wrapper"),o.classList.add("opacity-icon"),o.classList.add(e),o.setAttribute("src","imgs/opacity-icon-"+e+"-64x64.png"),o.setAttribute("alt","Use this slider to adjust transparency for the "+t.name+" layer"),o.setAttribute("title","Use this slider to adjust transparency for the "+t.name+" layer"),a.appendChild(o),a.onclick=function(e){var a=n.getElementsByClassName("opacity-slider-handle")[0];(0,u.updateLayerOpacity)(t,0),r(t,a,0)},a}function i(e,t){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");return n.classList.add("opacity-slider-track-overlay"),a.classList.add("opacity-slider-track"),o.classList.add("opacity-slider-handle"),n.appendChild(a),n.appendChild(o),e.active&&r(e,o),c(n,e,t),n}function c(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=e.getElementsByClassName("opacity-slider-handle")[0],a=s(e);(0,u.updateLayerOpacity)(t,a),r(t,n,a)}).on("end",function(){var n=s(e);ga("send","event",{eventCategory:"opacity slider",eventAction:"change",eventLabel:'{"'+t.name+'": "'+n+'"}',nonInteraction:!1}),(0,l.updateShareUrl)()}))}function s(e){var t=d3.mouse(e)[1],n=p.invert(t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.setOpacitySliderPosition=r,t.makeOpacitySlider=a;var l=n(27),u=n(23),d=90,p=d3.scaleLinear().domain([1,0]).range([0,d]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"landat logo",nonInteraction:!1})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(){d3.select("#mobile-toggle-panel-button").on("click",o),d3.selectAll("#mobile-clear-map-button").on("click",a)}function a(){d3.event.stopPropagation(),(0,s.clearMap)(),i()}function o(){d3.event.stopPropagation();var e=d3.select("#wrapper"),t=e.classed("mobile-menu-hidden");e.classed("mobile-menu-hidden",!t),c(t?"closing":"opening")}function i(){ga("send","event",{eventCategory:"mobile clearmap",eventAction:"click",eventLabel:"Mobile Clear Map",nonInteraction:!1})}function c(e){ga("send","event",{eventCategory:"mobile menu",eventAction:"click",eventLabel:"Mobile Panel Toggle"+e,nonInteraction:!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=n(24)},function(e,t,n){"use strict";function r(){d3.select("#toggle-panel-button").on("click",o),d3.selectAll("#clear-map-button").on("click",a)}function a(e){d3.event.stopPropagation(),(0,s.clearMap)(),i()}function o(e){d3.event.stopPropagation();var t=d3.select("#wrapper"),n=t.classed("panel-active");t.classed("panel-active",!n),t.classed("panel-inactive",n),(0,s.GetMap)().invalidateSize({pan:!1}),c(n?"Close":"Open")}function i(){ga("send","event",{eventCategory:"desktop",eventAction:"click",eventLabel:"Clear Map Btn",nonInteraction:!1})}function c(e){ga("send","event",{eventCategory:"desktop",eventAction:"click",eventLabel:"Panel Toggle "+e,nonInteraction:!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=n(24)},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyMzY5NDUwMzlmYmYzNjg2OWQ2NiIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS90aGVuYWJsZUZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvc2VhcmNoRWxlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9kb21VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcmVzdWx0TGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvYmluZ1Byb3ZpZGVyLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwid2VicGFjazovLy8uL2pzL3BhbmVsLmpzIiwid2VicGFjazovLy8uL2pzL2xheWVyLmpzIiwid2VicGFjazovLy8uL2pzL21hcC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wb2kuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZ3JhcGguanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL21hcmtlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy90YWJzLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbG9nby5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tb2JpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvcGFuZWxUb2dnbGUuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9wYXJzZXIiLCJfc2VhcmNoIiwiX3NlYXJjaDIiLCJfcGFuZWwiLCJfYmFzZWxheWVyIiwiX2dyYXBoIiwiX3BvaSIsIl90YWJzIiwiX21hcCIsIl9zaGFyZSIsIl9sYXllciIsIl9sb2dvIiwiX2xvZ28yIiwiX21vYmlsZSIsIl9tb2JpbGUyIiwiX3BhbmVsVG9nZ2xlIiwiX3BhbmVsVG9nZ2xlMiIsIkJhc2UiLCJjb25maWciLCJQYXJzZUNvbmZpZyIsIlNldHVwR3JhcGhzIiwiQmluZFRhYkV2ZW50cyIsIkJpbmRDb3B5TGlua0V2ZW50cyIsIkJpbmRNb2JpbGVNZW51RXZlbnRzIiwiQmluZERlc2t0b3BNZW51RXZlbnRzIiwiY2FsbGJhY2siLCJkYXRhIiwiQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIiwibWFwIiwiQ3JlYXRlTWFwIiwiQ3JlYXRlQmFzZUxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJTZXR1cFBhbmVsIiwiQ3JlYXRlU2VhcmNoIiwiQ3JlYXRlTG9nbyIsInRhYiIsIkhhbmRsZVRhYkNoYW5nZSIsImdyYXBoIiwiSGFuZGxlR3JhcGhUYWJDaGFuZ2UiLCJCaW5kR3JhcGhFdmVudHMiLCJCaW5kVXBkYXRlU2hhcmVVcmwiLCJTZXR1cFBvaW50c09mSW50ZXJlc3QiLCJ1cGRhdGVTaGFyZVVybCIsIndpbmRvdyIsImNvbmZpZ0ZpbGUiLCJHZXRDb25maWciLCJHZXRBamF4T2JqZWN0IiwicmVzcG9uc2VIYW5kbGVyIiwieG1saHR0cCIsIlhNTEh0dHBSZXF1ZXN0IiwiQWN0aXZlWE9iamVjdCIsInJlc3BvbnNlIiwiY29uc29sZSIsIkpTT04iLCJmb3JtYXRNYXAiLCJmb3JtYXRMYXllcnMiLCJsYXllcmdyb3VwIiwiaSIsImxheWVycyIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwibGVuZ3RoIiwic2V0TWFwc2VydmVyVXJsIiwic2V0RGVmYXVsdExheWVyT3BhY2l0eSIsImxheWVyIiwib3BhY2l0eSIsInVybCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJPcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhdXRvQ29tcGxldGUiLCJzaG93UG9wdXAiLCJzZWFyY2hFbGVtZW50cyIsImVsZW1lbnRzIiwiTCIsImV2Iiwic2VhcmNoRW50cmllcyIsImNoaWxkcmVuIiwiZ2EiLCJldmVudENhdGVnb3J5IiwiZXZlbnRBY3Rpb24iLCJldmVudExhYmVsIiwibm9uSW50ZXJhY3Rpb24iLCJfbGVhZmxldENvbnRyb2wiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX3NlYXJjaEVsZW1lbnQiLCJfYmluZ1Byb3ZpZGVyIiwiX2VzcmlQcm92aWRlciIsIl9nb29nbGVQcm92aWRlciIsIl9vcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJfcHJvdmlkZXIiLCJMZWFmbGV0Q29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJFcnJvciIsIkxDb250cm9sIiwiX2xlbiIsImFyZ3VtZW50cyIsIm9wdGlvbnMiLCJBcnJheSIsIl9rZXkiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImJpbmQiLCJhcHBseSIsImNvbmNhdCIsIl9ub2RlbnRSdW50aW1lIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsInBvcHVwRm9ybWF0IiwiX3JlZiIsInJlc3VsdCIsImxhYmVsIiwibWFya2VyIiwiaWNvbiIsIkljb24iLCJEZWZhdWx0IiwiZHJhZ2dhYmxlIiwibWF4TWFya2VycyIsInJldGFpblpvb21MZXZlbCIsImFuaW1hdGVab29tIiwic2VhcmNoTGFiZWwiLCJub3RGb3VuZE1lc3NhZ2UiLCJtZXNzYWdlSGlkZURlbGF5Iiwiem9vbUxldmVsIiwiY2xhc3NOYW1lcyIsImNvbnRhaW5lciIsImJ1dHRvbiIsInJlc2V0QnV0dG9uIiwibXNnYm94IiwiZm9ybSIsImlucHV0IiwiYXV0b0NvbXBsZXRlRGVsYXkiLCJhdXRvQ2xvc2UiLCJrZWVwUmVzdWx0Iiwid2FzSGFuZGxlckVuYWJsZWQiLCJtYXBIYW5kbGVycyIsImluaXRpYWxpemUiLCJfdGhpcyIsInRoaXMiLCJtYXJrZXJzIiwiRmVhdHVyZUdyb3VwIiwiaGFuZGxlcnNEaXNhYmxlZCIsIl9vcHRpb25zIiwic2VhcmNoRWxlbWVudCIsImhhbmRsZVN1Ym1pdCIsInF1ZXJ5Iiwib25TdWJtaXQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4iLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJocmVmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJvbkNsaWNrIiwiaW5uZXJIVE1MIiwiY2xlYXJSZXN1bHRzIiwicmVzdWx0TGlzdCIsImhhbmRsZUNsaWNrIiwiX3JlZjIiLCJhcHBlbmRDaGlsZCIsImF1dG9TZWFyY2giLCJzZWxlY3RSZXN1bHQiLCJkaXNhYmxlSGFuZGxlcnMiLCJyZXN0b3JlSGFuZGxlcnMiLCJvbkFkZCIsIl9vcHRpb25zMiIsImFkZFRvIiwicm9vdCIsImdldENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJvblJlbW92ZSIsInJlbW92ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4yIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmVDbGFzc05hbWUiLCJhZGRDbGFzc05hbWUiLCJmb2N1cyIsIl90aGlzMiIsImZvckVhY2giLCJoYW5kbGVyIiwiZW5hYmxlZCIsImRpc2FibGUiLCJfdGhpczMiLCJlbmFibGUiLCJFTlRFUl9LRVkiLCJBUlJPV19ET1dOX0tFWSIsIkFSUk9XX1VQX0tFWSIsImluY2x1ZGVzIiwia2V5Q29kZSIsImxpc3QiLCJfaXRlbSIsInNlbGVjdCIsInNlbGVjdGVkIiwibWF4IiwiY291bnQiLCJuZXh0IiwiY29kZSIsImlkeCIsIml0ZW0iLCJmb3JjZSIsInVuZGVmaW5lZCIsIkVTQ0FQRV9LRVkiLCJfb3B0aW9uczMiLCJjbGVhckxheWVycyIsImNsZWFyIiwiUHJvbWlzZSIsIiRyZXR1cm4iLCIkZXJyb3IiLCIkSWZfMSIsInJlc3VsdHMiLCJTUEVDSUFMX0tFWVMiLCJzZWFyY2giLCJ0aGVuIiwiJGF3YWl0XzIiLCJyZW5kZXIiLCIkYXN5bmNiaW5kIiwiJGF3YWl0XzMiLCJzaG93UmVzdWx0IiwiX3JlZjMiLCJrZXlzIiwiX2xheWVycyIsInJlbW92ZUxheWVyIiwiYWRkTWFya2VyIiwiY2VudGVyTWFwIiwiZmlyZUV2ZW50IiwibG9jYXRpb24iLCJjbG9zZVJlc3VsdHMiLCJfdGhpczQiLCJfb3B0aW9uczQiLCJNYXJrZXIiLCJ5IiwieCIsInBvcHVwTGFiZWwiLCJiaW5kUG9wdXAiLCJhZGRMYXllciIsIm9wZW5Qb3B1cCIsIm9uIiwiYXJncyIsImdldExhdExuZyIsIl9vcHRpb25zNSIsInJlc3VsdEJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImJvdW5kcyIsImlzVmFsaWQiLCJnZXRCb3VuZHMiLCJmaXRCb3VuZHMiLCJhbmltYXRlIiwic2V0VmlldyIsImdldENlbnRlciIsImdldFpvb20iLCJfb3B0aW9uczYiLCJwcm9jZXNzSW5jbHVkZXMiLCJzcmMiLCJ0b1N0cmluZyIsInQiLCJtYXRjaCIsInJlIiwibXgiLCJleGVjIiwicHVzaCIsInJldmVyc2UiLCJzbGljZSIsImluZGV4Iiwic3Vic3RyIiwicmVwbGFjZSIsIiRhc3luY3NwYXduIiwicHJvbWlzZVByb3ZpZGVyIiwic2VsZiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2VuRiIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiZm4iLCJhcmciLCJnZW4iLCJkb25lIiwidiIsInRocm93Iiwiem91c2FuIiwidGhlbmFibGUiLCJjYXRjaGVyIiwiYm91bmRUaGVuIiwicmVzb2x2ZXIiLCJ0cmFtcG9saW5lIiwicyIsInUiLCJiIiwicSIsInBvcCIsInIiLCJMYXp5VGhlbmFibGUiLCJFYWdlclRoZW5hYmxlIiwiVGhlbmFibGUiLCJFYWdlclRoZW5hYmxlRmFjdG9yeSIsImV4IiwicHJvY2VzcyIsInNldEltbWVkaWF0ZSIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwidGljayIsIlpvdXNhbiIsImZ1bmMiLCJtZSIsIlNUQVRFX0ZVTEZJTExFRCIsInlyZXQiLCJlcnIiLCJTVEFURV9SRUpFQ1RFRCIsInJlYXNvbiIsIm4iLCJuZXh0VGljayIsImYiLCJzZXRUaW1lb3V0Iiwic29vbiIsImNhbGxRdWV1ZSIsImZxIiwiZnFTdGFydCIsImJ1ZmZlclNpemUiLCJzcGxpY2UiLCJzdGF0ZSIsIlR5cGVFcnJvciIsImZpcnN0IiwicmEiLCJyciIsImwiLCJjbGllbnRzIiwib25GIiwib25SIiwiY2xpZW50IiwiYSIsInZhbCIsInoiLCJ2ZXJzaW9uIiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJsZW4iLCJydW4iLCJJdGVtIiwiYXJyYXkiLCJub29wIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJuYW1lIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJnbG9iYWwiLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2NvcGUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsImNsZWFySW1tZWRpYXRlIiwidGFzayIsInRhc2tzQnlIYW5kbGUiLCJuZXh0SGFuZGxlIiwicmVnaXN0ZXJJbW1lZGlhdGUiLCJoYW5kbGUiLCJydW5JZlByZXNlbnQiLCJjdXJyZW50bHlSdW5uaW5nQVRhc2siLCJpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbiIsImNhblVzZVBvc3RNZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsImluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uIiwibWVzc2FnZVByZWZpeCIsIk1hdGgiLCJyYW5kb20iLCJvbkdsb2JhbE1lc3NhZ2UiLCJpbmRleE9mIiwiYXR0YWNoRXZlbnQiLCJpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbiIsImNoYW5uZWwiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uIiwiaHRtbCIsImRvYyIsImRvY3VtZW50RWxlbWVudCIsInNjcmlwdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlbW92ZUNoaWxkIiwiaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbiIsImRvY3VtZW50IiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsImlzVGhlbmFibGUiLCJyZXNvbHV0aW9uIiwiaG93IiwiX3VuY2hhaW5lZCIsInRoZW5DaGFpbiIsInJlcyIsInJlaiIsIkNoYWluZWQiLCJjaGFpbiIsIl9yZXNvbHZlciIsImRlYm91bmNlIiwid2FpdCIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJ0aGlzQXJnIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsIm5vdyIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiY2FuY2VsIiwiZmx1c2giLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiRlVOQ19FUlJPUl9URVhUIiwidG9OdW1iZXIiLCJpc09iamVjdCIsIm5hdGl2ZU1heCIsInR5cGUiLCJpc09iamVjdExpa2UiLCJpc1N5bWJvbCIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwiTkFOIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwidGVzdCIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsIm9iamVjdFByb3RvIiwibWluIiwiRGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiU2VhcmNoRWxlbWVudCIsIl9yZWYkaGFuZGxlU3VibWl0IiwiX3JlZiRzZWFyY2hMYWJlbCIsIl9yZWYkY2xhc3NOYW1lcyIsImpvaW4iLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiLCJvbktleVVwIiwib25LZXlQcmVzcyIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfZWxlbWVudHMiLCJzdG9wUHJvcGFnYXRpb24iLCIkYXdhaXRfMSIsImhhc0Vycm9yIiwiX2VsZW1lbnRzMiIsImJvZHkiLCJibHVyIiwiZWxlbWVudCIsInBhcmVudCIsImVsIiwiY2xhc3NOYW1lIiwiY3JlYXRlU2NyaXB0RWxlbWVudCIsImNiIiwic2V0QXR0cmlidXRlIiwianNvbiIsImFkZCIsIkFSUk9XX0xFRlRfS0VZIiwiQVJST1dfUklHSFRfS0VZIiwiY3giLCJjbGFzc25hbWVzIiwidHJpbSIsIlJlc3VsdExpc3QiLCJfcmVmJGhhbmRsZUNsaWNrIiwiX2luaXRpYWxpc2VQcm9wcyIsInJlc3VsdEl0ZW0iLCJjaGlsZCIsImNsb25lTm9kZSIsImZyb20iLCJsYXN0Q2hpbGQiLCJwYXJlbnROb2RlIiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX3Byb3ZpZGVyMiIsIlByb3ZpZGVyIiwiX0Jhc2VQcm92aWRlciIsInByb3RvY29sIiwianNvbnAiLCJwYXJhbXMiLCJwYXJhbVN0cmluZyIsImdldFBhcmFtU3RyaW5nIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwicG9pbnQiLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYmJveCIsInJhdyIsImVuZHBvaW50IiwicGFyc2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXF1ZXN0IiwiZmV0Y2giLCJ0ZXh0IiwibG9jYXRpb25zIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwiZXh0ZW50IiwieW1pbiIsInhtaW4iLCJ5bWF4IiwieG1heCIsInByb3RvIiwibG5nIiwibGF0IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJ2aWV3cG9ydCIsInNvdXRod2VzdCIsIm5vcnRoZWFzdCIsImZvcm1hdCIsIm9zbV9pZCIsIm9zbV90eXBlIiwidHJhbnNsYXRlT3NtVHlwZSIsImxvbiIsImRpc3BsYXlfbmFtZSIsInBhcnNlRmxvYXQiLCJib3VuZGluZ2JveCIsIl9yZWY0IiwiZW5kcG9pbnRSZXZlcnNlIiwiR2V0QWN0aXZlTGF5ZXJHcm91cHMiLCJsYXllckdyb3VwTGF5b3V0IiwiZmlsdGVyIiwibGF5ZXJHcm91cCIsInJlc2V0UGFuZWxTdGF0ZSIsImdldExheWVyR3JvdXBzIiwibGF5ZXJHcm91cHMiLCJsYXlvdXQiLCJtYWtlTGF5ZXJHcm91cHMiLCJtYWtlTGF5ZXJFbGVtcyIsIm1ha2VQYW5lbERyYWdnYWJsZSIsInNldFBhbmVsU2Nyb2xsSGFuZGxlciIsImJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIiLCJ1YSIsInVzZXJBZ2VudCIsInBhbmVsIiwib3ZlcmxheSIsImQzIiwiZHJhZyIsInBhbmVsRHJhZ0V2ZW50SGFuZGxlciIsInVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQiLCJ1cGRhdGVQYW5lbFdpZHRoIiwibmV3SGVpZ2h0IiwicGFuZWxPZmZzZXRIZWlnaHQiLCJwYW5lbERyYWdPdmVybGF5IiwiaGVhZGVyIiwiZ3JhcGhMaXN0RXh0cmFTcGFjZSIsImdyYXBoTGlzdCIsImxheWVyTGlzdCIsInBhbmVsTWluV2lkdGgiLCJwYW5lbENsaWVudFdpZHRoIiwid3JhcHBlciIsIndyYXBwZXJXaWR0aCIsImNsaWVudFdpZHRoIiwibWFwV3JhcHBlciIsIm1vdXNlWCIsInhEZWx0YSIsIm5ld1BhbmVsV2lkdGgiLCJzZWxlY3RBbGwiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJjbGFzc2VkIiwiZWFjaCIsImxheWVyRGl2IiwibWFrZUNoZWNrYm94IiwibWFrZUxhYmVsIiwibWFrZURlc2NyaXB0aW9uIiwibWFrZUxheWVyVG9vbHMiLCJ0b2dnbGVMYXllciIsInRvZ2dsZUxheWVyVG9vbHNVSSIsInNsaWRlckhhbmRsZSIsIm5vZGUiLCJzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24iLCJsYXllclRvb2xzRGl2Iiwib3BhY2l0eVNsaWRlciIsIm1ha2VPcGFjaXR5U2xpZGVyIiwibGVnZW5kIiwibWFrZUxlZ2VuZCIsImxheWVyVG9vbHNXcmFwcGVyIiwibGVnZW5kV3JhcHBlciIsImxlZ2VuZEltZyIsIl9vcGFjaXR5U2xpZGVyIiwiR2V0Q3VycmVudExheWVycyIsIl9jdXJyZW50X2xheWVycyIsInR1cm5PZmZOb25CYXNlTGF5ZXJzIiwiX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMiLCJkaXNhYmxlTGF5ZXIiLCJkZWZhdWx0TGF5ZXJzIiwiaiIsImRlZmF1bHRMYXllciIsImZvdW5kTGF5ZXIiLCJlbmFibGVMYXllciIsIkdldE1hcCIsIm1ha2VXbXNUaWxlTGF5ZXIiLCJhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIiwibW92ZU92ZXJsYXlMYXllcnNUb1RvcCIsIm1hcExheWVyIiwicmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIiwibG9jIiwidXBkYXRlTGF5ZXJPcGFjaXR5IiwibmV3T3BhY2l0eSIsInRpbGVMYXllciIsIndtcyIsInRyYW5zcGFyZW50IiwiY3JzIiwiRVBTRzkwMDkxMyIsInRpbGVTaXplIiwiY2xlYXJNYXAiLCJyZW1vdmVBbGxQb2ludHNPZkludGVyZXN0IiwicmVtb3ZlQWxsR3JhcGhzIiwibWFwQ29uZmlnIiwic2Nyb2xsV2hlZWxab29tIiwiaW5pdGlhbENlbnRlciIsImluaXRpYWxab29tIiwibGVhZmxldFpvb21JbiIsImxlYWZsZXRab29tT3V0IiwiX3BvaW50c19vZl9pbnRlcmVzdCIsInBvaSIsImhhbmRsZU1hcENsaWNrIiwiY3JlYXRlUE9JIiwiQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyIiwiU2V0dXBQb2ludE9mSW50ZXJlc3RVSSIsImFjdGlvbiIsImxvbmciLCJjcmVhdGVHcmFwaFJlbW92ZXIiLCJkaXYiLCJlbGVtIiwiY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSIsIlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkiLCJTdHJpbmciLCJHZXRBbGxQb2ludHNPZkludGVyZXN0IiwicGxvdHMiLCJuZXdQb2lzIiwiQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0IiwicG9pcyIsInBvaVRvUmVtb3ZlIiwiY3JlYXRlR3JhcGhEaXYiLCJjcmVhdGVNYXJrZXIiLCJnZXRJY29uIiwiaGFuZGxlTWFya2VyTW91c2VFdmVudCIsInNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgiLCJ0cmlnZ2VyR3JhcGhBbmltYXRpb24iLCJyaWdodFBhbmVsIiwiX21hcmtlciIsImV4dGVuZERhdGVNb2R1bGUiLCJ0aXAiLCJkIiwiZmlyc3RDaGlsZCIsInllYXIiLCJnZXRGdWxsWWVhciIsImRheUNvdW50IiwibW4iLCJnZXRNb250aCIsImRuIiwiZ2V0RGF0ZSIsImRheU9mWWVhciIsImlzTGVhcFllYXIiLCJoYW5kbGVHcmFwaERhdGFSZXNwb25zZSIsImRyYXdHcmFwaCIsImdldERhdGEiLCJvUmVxIiwic3BsaXREYXRhIiwicmVwcm9jZXNzRGF0YSIsIm9yaWdkYXRhIiwiZXhwZWN0ZWRZZWFyTGVuZ3RoIiwia2V5c1RvQmVEZWxldGVkIiwiZGF0YUZvckJhc2VsaW5lIiwibWVhbiIsImNvbXB1dGVBdmVyYWdlIiwiYXJyIiwic3VtIiwiaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2siLCJhY3RpdmVUeXBlIiwiZ3JhcGhUeXBlIiwiaXNHcmFwaExpc3RFbXB0eSIsIm9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCIsInNjcm9sbEhlaWdodCIsIm9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCIsInJpZ2h0UGFuZWxTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJkaXNhYmxlQWN0aXZlR3JhcGhUYWIiLCJlbmFibGVHcmFwaFRhYiIsImFkanVzdFNjcm9sbFBvc2l0aW9uIiwib2xkR3JhcGhJbmZvSGVpZ2h0Iiwib2xkR3JhcGhFbGVtSGVpZ2h0Iiwib2xkUmlnaHRQYW5lbFNjcm9sbFRvcCIsIm5ld0dyYXBoSW5mb0hlaWdodCIsIm5ld0dyYXBoRWxlbUhlaWdodCIsIm5ld0dyYXBoRWxlbUhlaWdodFNjYWxlIiwibmV3UmlnaHRQYW5lbFNjcm9sbFRvcCIsImFjdGl2ZUVsZW0iLCJhY3RpdmVDbGFzcyIsInNwbGl0IiwiZGVjaW1hbFBsYWNlcyIsImxhdFNob3J0Iiwicm91bmRGbG9hdCIsImxuZ1Nob3J0Iiwiem9vbVRvTWFya2VyQnV0dG9uIiwibWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbiIsImNvbnRlbnQiLCJjb250ZW50RGl2IiwibG9hZGluZ0RpdiIsInJlcHJvY2Vzc2VkRGF0YSIsIm1ha2VVcERvd25MaW5lR3JhcGgiLCJtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzIiwiZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIiwibnVtYmVyIiwibWFyZ2luIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJwYXJzZURhdGUiLCJ4QXhpcyIsImF4aXNCb3R0b20iLCJ0aWNrcyIsInRpY2tGb3JtYXQiLCJ5QXhpcyIsInZhbHVlbGluZSIsImxpbmUiLCJzdmciLCJ3IiwiaCIsImRyYXdMaW5lYXJQYXRoIiwiZHJhd0xpbmVhclBvaW50cyIsImZvcm1hdE1vbnRoVGljayIsIk1PTlRIX0xBQkVMUyIsImNoYXJ0cyIsImF2ZXJhZ2VzIiwiYmFzZWxpbmUiLCJwYXJzZUp1bGlhbkRheSIsInBsb3QiLCJwYXRoIiwiaW5wdXR3cmFwcGVyIiwiY3JlYXRlQ2hlY2tib3giLCJyYWRpdXMiLCJjZW50ZXIiLCJmaW5kUG9sYXJDZW50ZXIiLCJ0aHJlc2hvbGRzIiwiZmluZFBvbGFyVGhyZXNob2xkcyIsInJhZGlhbExpbmUiLCJhbmdsZSIsImRheSIsIlBJIiwiZ3IiLCJnYV9hIiwidGhyZXNob2xkRWxlbSIsImNlbnRlckRheSIsImNlbnRlckRheU9wcG9zaXRlIiwiY2VudGVyRGF5RGF0YSIsImNlbnRlckRheU9wcG9zaXRlRGF0YSIsImdyb3dpbmdTZWFzb25EYXRhIiwiZHJhd1BvbGFyUGF0aCIsImNvb3JzIiwidGhyZXNob2xkQ2hlY2tib3giLCJjaGVja2VkIiwib2Zmb24iLCJhZGRLZXlUb1BPSSIsInJlbW92ZUtleUZyb21QT0kiLCJkaXNwYXRjaEdyYXBoQ2hlY2tib3hDbGljayIsInRvdGFsU3VtIiwiaW5jb21wbGV0ZVllYXJzIiwiY2hlY2tEaWZmIiwibGVmdEFyZWEiLCJyaWdodEFyZWEiLCJrIiwiY291bnRlciIsImFyZWFEaWZmIiwiYXJlYUluZGV4IiwiYXZncyIsImZpcnN0UmFkaXVzIiwic2Vjb25kUmFkaXVzIiwibWlkcG9pbnQiLCJmaXJzdERpZmYiLCJzZWNvbmREaWZmIiwiY2lyY2xlY2VudGVyIiwiZGF0YWNlbnRlciIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZpZnRlZW5JbmRleCIsImVpZ2h0eUluZGV4IiwiZmlmdGVlblRocmVzaG9sZCIsImVpZ2h0eVRocmVzaG9sZCIsImZpZnRlZW5JbmRleEZvdW5kIiwiZWlnaHR5SW5kZXhGb3VuZCIsImNpcmNsZUNlbnRlciIsImZpZnRlZW5FbmQiLCJlaWdodHlFbmQiLCJwdWxsRGlzdGluY3RDb2xvciIsImhhbmRsZVBvaW50TW91c2VvdmVyIiwiaGFuZGxlUG9pbnRNb3VzZW91dCIsInRpcFN0cmluZyIsImZvcm1hdERhdGUiLCJjaGVja2JveFdyYXBwZXIiLCJuZXdZZWFyIiwiaGFuZGxlQ2hlY2tib3hFbmFibGUiLCJoYW5kbGVDaGVja2JveERpc2FibGUiLCJoYW5kbGVDaGVja2JveFN5bmMiLCJjaGVja2VkU3RhdHVzIiwiY29sb3JSYW1wIiwiZGF0ZSIsIm1vbnRoIiwiZ2V0RE9ZIiwiZm9ybWF0TW9udGgiLCJvcmRpbmFsX3N1ZmZpeF9vZiIsIkZPUk1BVFRFRF9NT05USF9MQUJFTFMiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsIm1ha2VMYXllckdyb3Vwc1N0cmluZyIsIm1ha2VCYXNlTGF5ZXJTdHJpbmciLCJtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZyIsIm1ha2VBY3RpdmVUYWJTdHJpbmciLCJtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmciLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsInNldENvcHlMaW5rVXJsIiwic2V0U29jaWFsVXJscyIsInNoYXJlIiwicGFyc2VTaGFyZVVybCIsInpvb20iLCJhZGRMYXllclNldHRpbmdzVG9Db25maWciLCJiYXNlbGF5ZXJzIiwiYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyIsImFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnIiwicmVwbGFjZVN0YXRlIiwiaGFuZGxlQm9keUNsaWNrIiwibm9kZVBhdGgiLCJnZXREb21QYXRoIiwidG9DbG9zZVBvcHVwIiwic2hhcmVQb3B1cCIsImhhbmRsZUNvcHlMaW5rQ2xvc2UiLCJoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayIsImhhbmRsZUNvcHlMaW5rT3BlbiIsImhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2siLCJoYW5kbGVTaGFyZUxpbmtVcmxDbGljayIsInNlbGVjdENvcHlMaW5rVXJsIiwic2hhcmVJbnB1dCIsInNvY2lhbExpbmsiLCJuZXdVcmwiLCJtYW5nbGVQYXJhbVN0cmluZyIsInNvY2lhbExpbmtzIiwib3BhY2l0eVZhbHMiLCJjdXJyZW50TGF5ZXJzIiwiY3VycmVudExheWVyIiwiQkFTRV9MQVlFUl9UWVBFIiwiYWN0aXZlTGF5ZXJHcm91cHMiLCJwb2lTdHJpbmciLCJnZXRQYXJhbXNBcnJheSIsIm1ha2VLZXllZFBhcmFtc09iamVjdCIsImZvcm1hdFBhcmFtcyIsInVubWFuZ2xlUGFyYW1TdHJpbmciLCJwYXJhbXNBcnIiLCJwYXJhbVBhaXIiLCJwYXJzZWRQYXJhbXMiLCJmb3JtYXRDZW50ZXJQYXJhbSIsImZvcm1hdExheWVyUGFyYW0iLCJmb3JtYXRCYXNlTGF5ZXJQYXJhbSIsImZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbSIsImZvcm1hdExheWVyR3JvdXBzUGFyYW0iLCJsYXllcklkIiwiZm9ybWF0dGVkTGF5ZXJzIiwiZW5hYmxlZExheWVycyIsInN0ciIsImxheWVyR3JvdXBTZXR0aW5ncyIsImFjdGl2ZUxheWVyR3JvdXBJZHMiLCJzaGFyZUxheWVyU2V0dGluZ3MiLCJlbmFibGVkTGF5ZXIiLCJzaGFyZUJhc2VMYXllclNldHRpbmdzIiwiYmFzZWxheWVyIiwibGF5ZXJDb25maWciLCJhdHRyaWJ1dGlvbiIsIl9iYXNlbGF5ZXJzIiwiYmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyVUkiLCJiYXNlVUkiLCJiYXNlV3JhcHBlciIsImJhc2VJbWciLCJiYXNlTGFiZWwiLCJoYW5kbGVCYXNlQ2xpY2siLCJsYXllcmlkIiwidG9nZ2xlQWN0aXZlQmFzZVVJIiwicmVtb3ZlQ3VycmVudEJhc2VMYXllciIsImFkZE5ld0Jhc2VMYXllclRvTWFwIiwiYmFzZVVJRWxlbSIsIm1ha2VCYXNlTGF5ZXJPcHRpb25zIiwic3ViZG9tYWlucyIsImdyYXBoSWNvbiIsImJhc2VJY29uIiwiaWNvblVybCIsInNoYWRvd1VybCIsImljb25TaXplIiwiaWNvbkFuY2hvciIsInBvcHVwQW5jaG9yIiwic2hhZG93U2l6ZSIsImhvdmVySWNvbiIsIkdldEFjdGl2ZVRhYiIsImhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrIiwibmV3Q2xhc3MiLCJkaXNhYmxlQWN0aXZlVGFiIiwiZW5hYmxlVGFiIiwidG9nZ2xlTWFwUGFkZGluZyIsInJlc2V0UGFuZWxXaWR0aCIsInBhZGRpbmdSaWdodCIsIm9mZnNldFdpZHRoIiwib3BhY2l0eVNjYWxlIiwibGF5ZXJPcGFjaXR5Iiwic2xpZGVyVHJhY2tPdmVybGF5IiwibWFrZVNsaWRlclRyYWNrIiwiaWNvbldyYXBwZXJDbG9zZWQiLCJtYWtlT3BhY2l0eUljb25XcmFwcGVyIiwidHJhY2siLCJzZXREcmFnRXZlbnRMaXN0ZW5lciIsImNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zIiwieVBvcyIsIk9QQUNJVFlfUkFOR0VfTUFYIiwibG9nb2RhdGEiLCJpbWFnZSIsImxvZ29XcmFwcGVyIiwiY3JlYXRlTG9nb1dyYXBwZXIiLCJsb2dvSW1hZ2UiLCJjcmVhdGVMb2dvSW1hZ2UiLCJsb2dvTGluayIsImNyZWF0ZUxvZ29MaW5rIiwiaW5zZXJ0RWxlbWVudCIsImV4aXN0aW5nQ2hpbGQiLCJsaW5rIiwiaGFuZGxlTW9iaWxlQ2xlYXJNYXBCdG5DbGljayIsImRpc3BhdGNoTW9iaWxlQ2xlYXJNYXBCdG5DbGlja0FuYWx5dGljcyIsImhhbmRsZU1vYmlsZVRvZ2dsZVBhbmVsQnRuQ2xpY2siLCJzdGF0dXMiLCJkaXNwYXRjaE1vYmlsZVRvZ2dsZVBhbmVsQnRuQ2xpY2tBbmFseXRpY3MiLCJoYW5kbGVEZXNrdG9wQ2xlYXJNYXBCdG5DbGljayIsImRpc3BhdGNoRGVza3RvcENsZWFyTWFwQnRuQ2xpY2tBbmFseXRpY3MiLCJoYW5kbGVEZXNrdG9wVG9nZ2xlUGFuZWxCdG5DbGljayIsImludmFsaWRhdGVTaXplIiwicGFuIiwiZGlzcGF0Y2hEZXNrdG9wVG9nZ2xlUGFuZWxCdG5DbGlja0FuYWx5dGljcyJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBVUksRUFBUUQsRUFBU0gsR0FFaENJLEVBQU9E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QkFFbkJDLFlBRm1CLFFBR25CQyxXQUhtQixtQkFJbkJDLGdCQUFnQixJQUlsQixRQUFBdThCLEdBQUFELEdBQ0MxOEIsbUJBQ0NDLGNBRG1CLGNBRW5CQyxZQUZtQixRQUduQkMsV0FBWSxzQkFIT3U4QixFQUluQnQ4QixnQkFBZ0IsSWxDNHFLakJ6RixPQUFPQyxlQUFlYixFQUFTLGNBQzlCYyxPQUFPLElBRVJkLEVBQVFXLFFrQ2x0S00yQixDbENvdEtkLElBQUlmLEdBQU8xQixFQUFvQixLQXlDMUIsU0FBVUksRUFBUUQsRUFBU0gsR0FFaEMsWW1DL3ZLYyxTQUFBMEMsS0FDZHltQixnREFFQUEsZ0RBSUQsUUFBQTZaLEdBQUFsM0IsR0FDQ3FkLDRCQUNBdUUsZ0JBSUF1VixJQUdELFFBQUFDLEdBQUFwM0IsR0FDQ3FkLDBCQUNBLElBQUljLEdBQVVkLFVBQWQsWUFDSTJaLEVBQVM3WSxVQUFiLGVBQ0FBLDhCQUNBQSwrQkFDQSxFQUFBdm9CLEVBQUFpckIsVUFBQXdXLGdCQUEyQkMsS0FBM0IsSUFDQUMsRUFBNENQLEVBQTVDTyxRQUE0QyxRQUc3QyxRQUFBSixLQUNDNzhCLG1CQUNDQyxjQURtQixVQUVuQkMsWUFGbUIsUUFHbkJDLFdBSG1CLGdCQUluQkMsZ0JBQWdCLElBSWxCLFFBQUE2OEIsR0FBQVAsR0FDQzE4QixtQkFDQ0MsY0FEbUIsVUFFbkJDLFlBRm1CLFFBR25CQyxXQUFZLGdCQUhPdThCLEVBSW5CdDhCLGdCQUFnQixJbkN5dEtqQnpGLE9BQU9DLGVBQWViLEVBQVMsY0FDOUJjLE9BQU8sSUFFUmQsRUFBUVcsUW1DcHdLTTRCLENuQ3N3S2QsSUFBSWhCLEdBQU8xQixFQUFvQixLQThDMUIsU0FBVUksRUFBUUQiLCJmaWxlIjoiaW5kZXhfYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9zZWFyY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoKTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX2dyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX3BvaSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9sb2dvID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHR2YXIgX2xvZ28yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9nbyk7XG5cdFxuXHR2YXIgX21vYmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0dmFyIF9tb2JpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9iaWxlKTtcblx0XG5cdHZhciBfcGFuZWxUb2dnbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdHZhciBfcGFuZWxUb2dnbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFuZWxUb2dnbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgQmFzZSA9IGZ1bmN0aW9uIEJhc2UoY29uZmlnKSB7XG5cdFx0KDAsIF9wYXJzZXIuUGFyc2VDb25maWcpKGNvbmZpZywgY2FsbGJhY2spO1xuXHRcdCgwLCBfZ3JhcGguU2V0dXBHcmFwaHMpKCk7XG5cdFx0KDAsIF90YWJzLkJpbmRUYWJFdmVudHMpKCk7XG5cdFx0KDAsIF9zaGFyZS5CaW5kQ29weUxpbmtFdmVudHMpKCk7XG5cdFx0KDAsIF9tb2JpbGUyLmRlZmF1bHQpKCk7XG5cdFx0KDAsIF9wYW5lbFRvZ2dsZTIuZGVmYXVsdCkoKTtcblx0fTtcblx0XG5cdC8vIERvZXMgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXG5cdHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKGRhdGEpIHtcblx0XHQoMCwgX3NoYXJlLkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZykoZGF0YSk7XG5cdFx0dmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHRcdCgwLCBfYmFzZWxheWVyLkNyZWF0ZUJhc2VMYXllcnMpKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcblx0XHQoMCwgX2xheWVyLkNyZWF0ZURlZmF1bHRMYXllcnMpKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG5cdFx0KDAsIF9wYW5lbC5TZXR1cFBhbmVsKShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHRcdCgwLCBfc2VhcmNoMi5kZWZhdWx0KShtYXApO1xuXHRcdCgwLCBfbG9nbzIuZGVmYXVsdCkoZGF0YS5sb2dvKTtcblx0XHRpZiAoZGF0YS50YWIpICgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKGRhdGEudGFiKTtcblx0XHRpZiAoZGF0YS5ncmFwaCkgKDAsIF9ncmFwaC5IYW5kbGVHcmFwaFRhYkNoYW5nZSkoZGF0YS5ncmFwaCk7XG5cdFx0KDAsIF9wb2kuQmluZEdyYXBoRXZlbnRzKShtYXApO1xuXHRcdCgwLCBfc2hhcmUuQmluZFVwZGF0ZVNoYXJlVXJsKShtYXApO1xuXHRcdCgwLCBfcG9pLlNldHVwUG9pbnRzT2ZJbnRlcmVzdCkobWFwLCBkYXRhLnBvaXMpO1xuXHRcdCgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH07XG5cdFxuXHR3aW5kb3cuQmFzZSA9IEJhc2U7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7IEJhc2U6IEJhc2UgfTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5QYXJzZUNvbmZpZyA9IFBhcnNlQ29uZmlnO1xuXHRleHBvcnRzLkdldEFqYXhPYmplY3QgPSBHZXRBamF4T2JqZWN0O1xuXHQvKipcblx0ICogUGFyc2VzIGEgY29uZmlnIGZpbGUuIFNpbmNlIHRoZSBwcm9jZXNzIHRvIGdldCBleHRlcm5hbCBmaWxlc1xuXHQgKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG5cdCAqIHdpbGwgdGFrZSB0byBncmFiIHRoZSBmaWxlLlxuXHQgKi9cblx0ZnVuY3Rpb24gUGFyc2VDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0XHRHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBamF4T2JqZWN0KHJlc3BvbnNlSGFuZGxlcikge1xuXHRcdHZhciB4bWxodHRwO1xuXHRcdGlmICghd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0KSB7XG5cdFx0XHR4bWxodHRwID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KFwiTVNYTUwyLlhNTEhUVFAuMy4wXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0fVxuXHRcdHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHRcdFx0XHRyZXNwb25zZUhhbmRsZXIoeG1saHR0cC5yZXNwb25zZSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4geG1saHR0cDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0Q29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIHhtbGh0dHAgPSBHZXRBamF4T2JqZWN0KGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0dmFyIGRhdGEgPSByZXNwb25zZUhhbmRsZXIocmVzcG9uc2UpO1xuXHRcdFx0Y2FsbGJhY2soZGF0YSk7XG5cdFx0fSk7XG5cdFx0eG1saHR0cC5vcGVuKFwiR0VUXCIsIGNvbmZpZ0ZpbGUsIHRydWUpO1xuXHRcdHhtbGh0dHAuc2VuZCgpO1xuXHRcdGNvbnNvbGUubG9nKFwiaGlcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSkge1xuXHRcdHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG5cdFx0Zm9ybWF0TWFwKHJlc3BvbnNlKTtcblx0XHRmb3JtYXRMYXllcnMocmVzcG9uc2UpO1xuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TWFwKGRhdGEpIHtcblx0XHRpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllcnMoZGF0YSkge1xuXHRcdHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcblx0XHR2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuXHRcdHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuXHRcdHZhciBsYXllcmdyb3VwO1xuXHRcdHZhciBpO1xuXHRcblx0XHRmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuXHRcdFx0aWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0XHRcdGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XG5cdFx0XHRcdHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXJncm91cFtpXSwgZGF0YS5kZWZhdWx0TGF5ZXJPcGFjaXR5KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXIsIG9wYWNpdHkpIHtcblx0XHRsYXllci5vcGFjaXR5ID0gbGF5ZXIub3BhY2l0eSB8fCBvcGFjaXR5O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXIsIHVybCkge1xuXHRcdGxheWVyLnVybCA9IGxheWVyLnVybCB8fCB1cmw7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZVNlYXJjaDtcblx0XG5cdHZhciBfbGVhZmxldEdlb3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVTZWFyY2gobWFwKSB7XG5cdFx0dmFyIHByb3ZpZGVyID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLk9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xuXHRcblx0XHR2YXIgc2VhcmNoQ29udHJvbCA9IG5ldyBfbGVhZmxldEdlb3NlYXJjaC5HZW9TZWFyY2hDb250cm9sKHtcblx0XHRcdHByb3ZpZGVyOiBwcm92aWRlcixcblx0XHRcdHNob3dNYXJrZXI6IGZhbHNlLFxuXHRcdFx0YXV0b0NvbXBsZXRlOiB0cnVlLFxuXHRcdFx0c2hvd1BvcHVwOiBmYWxzZVxuXHRcdH0pO1xuXHRcblx0XHRtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblx0XG5cdFx0dmFyIHNlYXJjaEVsZW1lbnRzID0gc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzO1xuXHRcblx0XHRMLkRvbUV2ZW50Lm9uKHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcblx0XHRcdEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0XG5cdFx0XHR2YXIgc2VhcmNoRW50cmllcyA9IHNlYXJjaEVsZW1lbnRzLmZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzdWx0cycpWzBdLmNoaWxkcmVuO1xuXHRcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc2VhcmNoRW50cmllcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoZXYudGFyZ2V0ID09PSBzZWFyY2hFbnRyaWVzW2ldKSB7XG5cdFx0XHRcdFx0c2VhcmNoRWxlbWVudHMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYXJjaCBieSBhZGRyZXNzXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRcdGV2ZW50QWN0aW9uOiAnc2VhcmNoJyxcblx0XHRcdFx0ZXZlbnRMYWJlbDogJ2NsaWNrJyxcblx0XHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XG5cdFx0TC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXYpIHtcblx0XHRcdEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0XG5cdFx0XHRpZiAoZXYud2hpY2ggPT0gMTMgfHwgZXYua2V5Q29kZSA9PSAxMykge1xuXHRcdFx0XHRzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFxuXHRcdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG5cdFx0XHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0XHRcdGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHRcdFx0XHRcdGV2ZW50QWN0aW9uOiAnc2VhcmNoIGFkZHJlc3MnLFxuXHRcdFx0XHRcdGV2ZW50TGFiZWw6IGV2LnRhcmdldC52YWx1ZSxcblx0XHRcdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2xlYWZsZXRDb250cm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfYmluZ1Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9lc3JpUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2dvb2dsZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHR2YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcG9zaXRpb246ICd0b3BsZWZ0Jyxcblx0ICAgIHN0eWxlOiAnYnV0dG9uJyxcblx0ICAgIHNob3dNYXJrZXI6IHRydWUsXG5cdCAgICBzaG93UG9wdXA6IGZhbHNlLFxuXHQgICAgcG9wdXBGb3JtYXQ6IGZ1bmN0aW9uIHBvcHVwRm9ybWF0KF9yZWYpIHtcblx0ICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXHQgICAgICByZXR1cm4gJycgKyByZXN1bHQubGFiZWw7XG5cdCAgICB9LFxuXHQgICAgbWFya2VyOiB7XG5cdCAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuXHQgICAgICBkcmFnZ2FibGU6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbWF4TWFya2VyczogMSxcblx0ICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG5cdCAgICBhbmltYXRlWm9vbTogdHJ1ZSxcblx0ICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG5cdCAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuXHQgICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcblx0ICAgIHpvb21MZXZlbDogMTgsXG5cdCAgICBjbGFzc05hbWVzOiB7XG5cdCAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcblx0ICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG5cdCAgICAgIHJlc2V0QnV0dG9uOiAncmVzZXQnLFxuXHQgICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcblx0ICAgICAgZm9ybTogJycsXG5cdCAgICAgIGlucHV0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcblx0ICAgIGF1dG9Db21wbGV0ZURlbGF5OiAyNTAsXG5cdCAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuXHQgICAga2VlcFJlc3VsdDogZmFsc2Vcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIHdhc0hhbmRsZXJFbmFibGVkID0ge307XG5cdHZhciBtYXBIYW5kbGVycyA9IFsnZHJhZ2dpbmcnLCAndG91Y2hab29tJywgJ2RvdWJsZUNsaWNrWm9vbScsICdzY3JvbGxXaGVlbFpvb20nLCAnYm94Wm9vbScsICdrZXlib2FyZCddO1xuXHRcblx0dmFyIENvbnRyb2wgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXHQgICAgdGhpcy5oYW5kbGVyc0Rpc2FibGVkID0gZmFsc2U7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXHRcblx0ICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cdFxuXHQgICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuXHQgICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG5cdCAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXHRcblx0ICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG5cdCAgICBidXR0b24udGl0bGUgPSBzZWFyY2hMYWJlbDtcblx0ICAgIGJ1dHRvbi5ocmVmID0gJyMnO1xuXHRcblx0ICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdFxuXHQgICAgdmFyIHJlc2V0QnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMucmVzZXRCdXR0b24sIGZvcm0pO1xuXHQgICAgcmVzZXRCdXR0b24uaW5uZXJIVE1MID0gJ1gnO1xuXHQgICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cdCAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3RoaXMuY2xlYXJSZXN1bHRzKG51bGwsIHRydWUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcblx0ICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZjIpIHtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmMi5yZXN1bHQ7XG5cdFxuXHQgICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG5cdCAgICAgICAgICBfdGhpcy5vblN1Ym1pdCh7IHF1ZXJ5OiByZXN1bHQubGFiZWwsIGRhdGE6IHJlc3VsdCB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblx0XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG5cdCAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUsIHRydWUpO1xuXHQgICAgICB9LCB0cnVlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICByZXR1cm4gX3RoaXMuZGlzYWJsZUhhbmRsZXJzKGUpO1xuXHQgICAgfSwgdHJ1ZSk7XG5cdCAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICByZXR1cm4gX3RoaXMucmVzdG9yZUhhbmRsZXJzKGUpO1xuXHQgICAgfSwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgYnV0dG9uOiBidXR0b24sIHJlc2V0QnV0dG9uOiByZXNldEJ1dHRvbiB9O1xuXHQgIH0sXG5cdCAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuXHQgICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cdFxuXHQgICAgdGhpcy5tYXAgPSBtYXA7XG5cdCAgICBpZiAoc2hvd01hcmtlcikge1xuXHQgICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG5cdCAgICAgIHZhciBmb3JtID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmZvcm07XG5cdFxuXHQgICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXHRcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuXHQgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cdCAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0ICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG5cdCAgfSxcblx0ICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKGNvbnRhaW5lcikge1xuXHQgICAgICBjb250YWluZXIucmVtb3ZlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0ICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4yID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICB0aGlzLmNsZWFyUmVzdWx0cygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICBpbnB1dC5mb2N1cygpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGlzYWJsZUhhbmRsZXJzOiBmdW5jdGlvbiBkaXNhYmxlSGFuZGxlcnMoZSkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblx0XG5cdCAgICBpZiAodGhpcy5oYW5kbGVyc0Rpc2FibGVkIHx8IGUgJiYgZS50YXJnZXQgIT09IGZvcm0pIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuaGFuZGxlcnNEaXNhYmxlZCA9IHRydWU7XG5cdCAgICBtYXBIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG5cdCAgICAgIGlmIChfdGhpczIubWFwW2hhbmRsZXJdKSB7XG5cdCAgICAgICAgd2FzSGFuZGxlckVuYWJsZWRbaGFuZGxlcl0gPSBfdGhpczIubWFwW2hhbmRsZXJdLmVuYWJsZWQoKTtcblx0ICAgICAgICBfdGhpczIubWFwW2hhbmRsZXJdLmRpc2FibGUoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICByZXN0b3JlSGFuZGxlcnM6IGZ1bmN0aW9uIHJlc3RvcmVIYW5kbGVycyhlKSB7XG5cdCAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXHRcblx0ICAgIGlmICghdGhpcy5oYW5kbGVyc0Rpc2FibGVkIHx8IGUgJiYgZS50YXJnZXQgIT09IGZvcm0pIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuaGFuZGxlcnNEaXNhYmxlZCA9IGZhbHNlO1xuXHQgICAgbWFwSGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuXHQgICAgICBpZiAod2FzSGFuZGxlckVuYWJsZWRbaGFuZGxlcl0pIHtcblx0ICAgICAgICBfdGhpczMubWFwW2hhbmRsZXJdLmVuYWJsZSgpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIHNlbGVjdFJlc3VsdDogZnVuY3Rpb24gc2VsZWN0UmVzdWx0KGV2ZW50KSB7XG5cdCAgICBpZiAoIVtfY29uc3RhbnRzLkVOVEVSX0tFWSwgX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0ICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcblx0XG5cdCAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcblx0ICAgICAgdmFyIF9pdGVtID0gbGlzdC5zZWxlY3QobGlzdC5zZWxlY3RlZCk7XG5cdCAgICAgIHRoaXMub25TdWJtaXQoeyBxdWVyeTogaW5wdXQudmFsdWUsIGRhdGE6IF9pdGVtIH0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1heCA9IGxpc3QuY291bnQoKSAtIDE7XG5cdCAgICBpZiAobWF4IDwgMCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0ICAgIHZhciBuZXh0ID0gZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicgPyB+fmxpc3Quc2VsZWN0ZWQgKyAxIDogfn5saXN0LnNlbGVjdGVkIC0gMTtcblx0ICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuXHQgICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXHRcblx0ICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcblx0ICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcblx0ICB9LFxuXHQgIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG5cdCAgICB2YXIgZm9yY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXHRcblx0ICAgIGlmIChldmVudCAmJiBldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblx0ICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAga2VlcFJlc3VsdCA9IF9vcHRpb25zMy5rZWVwUmVzdWx0LFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zMy5hdXRvQ29tcGxldGU7XG5cdFxuXHQgICAgaWYgKGZvcmNlIHx8ICFrZWVwUmVzdWx0KSB7XG5cdCAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cdCAgICAgIHRoaXMubWFya2Vycy5jbGVhckxheWVycygpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICB2YXIgcXVlcnksIHByb3ZpZGVyLCByZXN1bHRzO1xuXHRcblx0ICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG5cdCAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuXHRcblx0ICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCkge1xuXHQgICAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2goeyBxdWVyeTogcXVlcnkgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0ICAgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblx0ICAgICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG5cdCAgICAgICAgICByZXR1cm4gJElmXzEuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcblx0ICAgICAgICByZXR1cm4gJElmXzEuY2FsbCh0aGlzKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gJElmXzEoKSB7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfVxuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHByb3ZpZGVyLCByZXN1bHRzO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaChxdWVyeSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzMpIHtcblx0XG5cdCAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8zO1xuXHRcblx0ICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdLCBxdWVyeSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0LCBfcmVmMykge1xuXHQgICAgdmFyIHF1ZXJ5ID0gX3JlZjMucXVlcnk7XG5cdCAgICB2YXIgYXV0b0Nsb3NlID0gdGhpcy5vcHRpb25zLmF1dG9DbG9zZTtcblx0XG5cdCAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcblx0ICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuXHQgICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCwgcXVlcnkpO1xuXHQgICAgdGhpcy5jZW50ZXJNYXAocmVzdWx0KTtcblx0XG5cdCAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG5cdCAgICAgIGxvY2F0aW9uOiByZXN1bHQsXG5cdCAgICAgIG1hcmtlcjogbWFya2VyXG5cdCAgICB9KTtcblx0XG5cdCAgICBpZiAoYXV0b0Nsb3NlKSB7XG5cdCAgICAgIHRoaXMuY2xvc2VSZXN1bHRzKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBjbG9zZVJlc3VsdHM6IGZ1bmN0aW9uIGNsb3NlUmVzdWx0cygpIHtcblx0ICAgIHZhciBjb250YWluZXIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5yZXN0b3JlSGFuZGxlcnMoKTtcblx0ICAgIHRoaXMuY2xlYXJSZXN1bHRzKCk7XG5cdCAgfSxcblx0ICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihyZXN1bHQsIHF1ZXJ5KSB7XG5cdCAgICB2YXIgX3RoaXM0ID0gdGhpcztcblx0XG5cdCAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczQubWFya2VyLFxuXHQgICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zNC5zaG93UG9wdXAsXG5cdCAgICAgICAgcG9wdXBGb3JtYXQgPSBfb3B0aW9uczQucG9wdXBGb3JtYXQ7XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG5cdCAgICB2YXIgcG9wdXBMYWJlbCA9IHJlc3VsdC5sYWJlbDtcblx0XG5cdCAgICBpZiAodHlwZW9mIHBvcHVwRm9ybWF0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBvcHVwTGFiZWwgPSBwb3B1cEZvcm1hdCh7IHF1ZXJ5OiBxdWVyeSwgcmVzdWx0OiByZXN1bHQgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgbWFya2VyLmJpbmRQb3B1cChwb3B1cExhYmVsKTtcblx0XG5cdCAgICB0aGlzLm1hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcblx0XG5cdCAgICBpZiAoc2hvd1BvcHVwKSB7XG5cdCAgICAgIG1hcmtlci5vcGVuUG9wdXAoKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAob3B0aW9ucy5kcmFnZ2FibGUpIHtcblx0ICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24gKGFyZ3MpIHtcblx0ICAgICAgICBfdGhpczQubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL21hcmtlci9kcmFnZW5kJywge1xuXHQgICAgICAgICAgbG9jYXRpb246IG1hcmtlci5nZXRMYXRMbmcoKSxcblx0ICAgICAgICAgIGV2ZW50OiBhcmdzXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBtYXJrZXI7XG5cdCAgfSxcblx0ICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcblx0ICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNS5hbmltYXRlWm9vbTtcblx0XG5cdCAgICB2YXIgcmVzdWx0Qm91bmRzID0gbmV3IEwuTGF0TG5nQm91bmRzKHJlc3VsdC5ib3VuZHMpO1xuXHQgICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cdFxuXHQgICAgaWYgKCFyZXRhaW5ab29tTGV2ZWwgJiYgcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSkge1xuXHQgICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5tYXAuc2V0Vmlldyhib3VuZHMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0Wm9vbSgpLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZ2V0Wm9vbTogZnVuY3Rpb24gZ2V0Wm9vbSgpIHtcblx0ICAgIHZhciBfb3B0aW9uczYgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM2LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICB6b29tTGV2ZWwgPSBfb3B0aW9uczYuem9vbUxldmVsO1xuXHRcblx0ICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gTGVhZmxldENvbnRyb2woKSB7XG5cdCAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cdFxuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKlxuXHQgKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuXHQgKlxuXHQgKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuXHQgKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG5cdCAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuXHQgKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcblx0ICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuXHQgKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcblx0ICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuXHQgKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLCBpbnB1dCkge1xuXHQgICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgdCA9IFwicmV0dXJuIFwiICsgc3JjO1xuXHQgICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdO1xuXHQgICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZztcblx0ICAgIHZhciBtID0gW107XG5cdCAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgIHZhciBteCA9IHJlLmV4ZWModCk7XG5cdCAgICAgICAgaWYgKG14KSBtLnB1c2gobXgpO2Vsc2UgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdCA9IHQuc2xpY2UoMCwgZS5pbmRleCkgKyBpbmNsdWRlc1tlWzFdXSArIHQuc3Vic3RyKGUuaW5kZXggKyBlWzBdLmxlbmd0aCk7XG5cdCAgICB9KTtcblx0ICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLCB0KSgpO1xuXHR9XG5cdFxuXHR2YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG5cdCAgICB6b3VzYW46IF9fd2VicGFja19yZXF1aXJlX18oNykudG9TdHJpbmcoKSxcblx0ICAgIHRoZW5hYmxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKS50b1N0cmluZygpXG5cdH0sIGZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZiwgY2F0Y2hlcikge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jYmluZFwiLCB7IHZhbHVlOiAkYXN5bmNiaW5kLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCwgeCwgcywgZSwgdSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPyB1bmRlZmluZWQgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCkgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBxID0gcS5jYWxsKHQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG5cdCAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuXHQgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG5cdCAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcblx0ICAgICAgICBjYXNlIHRydWU6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5UaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuXHQgICAgICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbjtcblx0ICAgICAgICAgICAgcmV0dXJuIGJvdW5kVGhlbjtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlciwgc2VsZikge1xuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY3NwYXduXCIsIHsgdmFsdWU6ICRhc3luY3NwYXduLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0ICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybjtcblx0XG5cdCAgICB2YXIgZ2VuRiA9IHRoaXM7XG5cdCAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sIGFyZykge1xuXHQgICAgICAgICAgICB2YXIgbmV4dDtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbiwgYXJnKTtcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LmRvbmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlID09PSBuZXh0LnZhbHVlLnRoZW4pIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIHYpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgbmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdC8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3Ncblx0JGFzeW5jYmluZCgpO1xuXHQkYXN5bmNzcGF3bigpO1xuXHRcblx0Ly8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgJGFzeW5jYmluZDogJGFzeW5jYmluZCxcblx0ICAgICRhc3luY3NwYXduOiAkYXN5bmNzcGF3blxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcywgc2V0SW1tZWRpYXRlKSB7LyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuXHR6b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuXHRodHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5cdEF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblx0VmVyc2lvbiAyLjMuM1xuXHRMaWNlbnNlOiBNSVQgKi9cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aWNrKSB7XG5cdCAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihwcm9jZXNzKSkgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlIHx8IGZ1bmN0aW9uIChmKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmLCAwKTtcblx0ICAgIH07XG5cdCAgICB2YXIgc29vbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZnEgPSBbXSxcblx0ICAgICAgICAgICAgZnFTdGFydCA9IDAsXG5cdCAgICAgICAgICAgIGJ1ZmZlclNpemUgPSAxMDI0O1xuXHQgICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFbZnFTdGFydF0oKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7LyogY29uc29sZS5lcnJvcihleCkgKi99XG5cdCAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgICAgZnEucHVzaChmbik7XG5cdCAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKSB0aWNrKGNhbGxRdWV1ZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuXHQgICAgICAgIGlmIChmdW5jKSB7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcykgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09PSBcIm9iamVjdFwiKSkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkgdGhpcy5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuXHQgICAgICAgICAgICBpZiAobWUuYykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG5cdCAgICAgICAgICAgIGlmIChjbGllbnRzKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GLCBvblIpIHtcblx0ICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG5cdCAgICAgICAgICAgICAgICB5OiBvbkYsXG5cdCAgICAgICAgICAgICAgICBuOiBvblIsXG5cdCAgICAgICAgICAgICAgICBwOiBwXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpIHRoaXMuYy5wdXNoKGNsaWVudCk7ZWxzZSB0aGlzLmMgPSBbY2xpZW50XTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSxcblx0ICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy52O1xuXHQgICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHA7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlc29sdmUoYXJnKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVqZWN0KHJlYXNvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgaWYgKHZhbCAmJiB2YWwgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiB2YWw7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZXNvbHZlKHZhbCk7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHQgICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIGVycjtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlamVjdChlcnIpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0XG5cdCAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCI7XG5cdCAgICByZXR1cm4gWm91c2FuO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5KS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHQoZnVuY3Rpb24gKCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgIH1cblx0fSkoKTtcblx0ZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcblx0ICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZSAobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdHByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblx0XG5cdHByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHJldHVybiBbXTtcblx0fTtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAnLyc7XG5cdH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIDA7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBzY29wZSA9IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsIHx8IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYgfHwgd2luZG93O1xuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdFxuXHQvLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXHRcblx0ZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xuXHR9O1xuXHRleHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcblx0ICBpZiAodGltZW91dCkge1xuXHQgICAgdGltZW91dC5jbG9zZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0sIG1zZWNzKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG5cdH07XG5cdFxuXHRleHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dCkgaXRlbS5fb25UaW1lb3V0KCk7XG5cdCAgICB9LCBtc2Vjcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0Ly8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVkaWF0ZWAgd2FzXG5cdC8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG5cdC8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5cdGV4cG9ydHMuc2V0SW1tZWRpYXRlID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUgfHwgdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlIHx8IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuc2V0SW1tZWRpYXRlO1xuXHRleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSB8fCB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSB8fCB1bmRlZmluZWQgJiYgdW5kZWZpbmVkLmNsZWFySW1tZWRpYXRlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuXHQgICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cdCAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG5cdCAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG5cdCAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG5cdCAgICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuXHQgICAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuXHQgICAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW4odGFzaykge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG5cdCAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcblx0ICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG5cdCAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cblx0ICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG5cdCAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG5cdCAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgICAgICAgICBpZiAodGFzaykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG5cdCAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuXHQgICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuXHQgICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcblx0ICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2Vcblx0ICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cdFxuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG5cdCAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uIG9uR2xvYmFsTWVzc2FnZShldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiYgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcblx0ICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0ICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG5cdCAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG5cdCAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblx0XG5cdCAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG5cdCAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG5cdCAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcblx0ICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG5cdCAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG5cdCAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcblx0ICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuXHQgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG5cdCAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfVxuXHRcblx0ICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcblx0ICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cdH0pKHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHVuZGVmaW5lZCA6IGdsb2JhbCA6IHNlbGYpO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSkpXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcblx0ICAgICAgICByZXR1cm4gb2JqICYmIG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiByZXNvbHV0aW9uKHAsIHIsIGhvdykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjEgKi9cblx0ICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocikgOiByO1xuXHRcblx0ICAgICAgICAgICAgaWYgKHAgPT09IHgpIC8qIDIuMy4xICovXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG5cdCAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuXHQgICAgICAgICAgICAgICAgeC50aGVuKGZ1bmN0aW9uICh5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLCB5KTtcblx0ICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcC5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHAucmVzb2x2ZSh4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cblx0ICAgICAgICAgICAgcC5yZWplY3QoZXgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpIHt9XG5cdCAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLCByZWopIHtcblx0ICAgICAgICB0aGlzLnJlc29sdmUgPSByZXM7XG5cdCAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gQ2hhaW5lZCgpIHt9O1xuXHQgICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogX3VuY2hhaW5lZCxcblx0ICAgICAgICByZWplY3Q6IF91bmNoYWluZWQsXG5cdCAgICAgICAgdGhlbjogdGhlbkNoYWluXG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIHRoZW4ocmVzLCByZWopIHtcblx0ICAgICAgICB2YXIgY2hhaW4gPSBuZXcgQ2hhaW5lZCgpO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVyKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGlzVGhlbmFibGUodmFsdWUpID8gdmFsdWUudGhlbihyZXMsIHJlaikgOiByZXNvbHV0aW9uKGNoYWluLCB2YWx1ZSwgcmVzKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGV4KSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLCBleCwgcmVqKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBjaGFpbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuXHQgICAgICAgIHRoaXMuX3Jlc29sdmVyID0gcmVzb2x2ZXI7XG5cdCAgICAgICAgdGhpcy50aGVuID0gdGhlbjtcblx0ICAgIH07XG5cdFxuXHQgICAgVGhlbmFibGUucmVzb2x2ZSA9IGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDogeyB0aGVuOiBmdW5jdGlvbiB0aGVuKHJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHYpO1xuXHQgICAgICAgICAgICB9IH07XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLmlzVGhlbmFibGUgPSBpc1RoZW5hYmxlO1xuXHRcblx0ICAgIHJldHVybiBUaGVuYWJsZTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHQvKipcblx0ICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG5cdCAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqL1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTkFOID0gMCAvIDA7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG5cdHZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXHRcblx0LyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cblx0dmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cblx0dmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIGdsb2JhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZ2xvYmFsKSkgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xuXHR2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHNlbGYpKSA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblx0XG5cdC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuXHR2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuXHQgICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG5cdCAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAyLjQuMFxuXHQgKiBAY2F0ZWdvcnkgRGF0ZVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcblx0ICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuXHQgKiB9LCBfLm5vdygpKTtcblx0ICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cblx0ICovXG5cdHZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG5cdCAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuXHQgKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG5cdCAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcblx0ICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2Bcblx0ICogaW52b2NhdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuXHQgKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG5cdCAqXG5cdCAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuXHQgKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG5cdCAqXG5cdCAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuXHQgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG5cdCAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuXHQgKlxuXHQgKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cblx0ICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuXHQgKiAgICdsZWFkaW5nJzogdHJ1ZSxcblx0ICogICAndHJhaWxpbmcnOiBmYWxzZVxuXHQgKiB9KSk7XG5cdCAqXG5cdCAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG5cdCAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuXHQgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG5cdCAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcblx0ICpcblx0ICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxhc3RBcmdzLFxuXHQgICAgICBsYXN0VGhpcyxcblx0ICAgICAgbWF4V2FpdCxcblx0ICAgICAgcmVzdWx0LFxuXHQgICAgICB0aW1lcklkLFxuXHQgICAgICBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcblx0ICAgICAgbGVhZGluZyA9IGZhbHNlLFxuXHQgICAgICBtYXhpbmcgPSBmYWxzZSxcblx0ICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXHRcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcblx0ICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcblx0ICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcblx0ICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuXHQgICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcblx0ICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcblx0ICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG5cdCAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcblx0ICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuXHQgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG5cdCAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXHRcblx0ICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXHRcblx0ICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG5cdCAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuXHQgICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuXHQgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpO1xuXHQgICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuXHQgICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcblx0ICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuXHQgICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG5cdCAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcblx0ICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG5cdCAgICB9XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0ICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuXHQgICAgfVxuXHQgICAgbGFzdEludm9rZVRpbWUgPSAwO1xuXHQgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKSxcblx0ICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuXHQgICAgbGFzdFRoaXMgPSB0aGlzO1xuXHQgICAgbGFzdENhbGxUaW1lID0gdGltZTtcblx0XG5cdCAgICBpZiAoaXNJbnZva2luZykge1xuXHQgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG1heGluZykge1xuXHQgICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG5cdCAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuXHQgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuXHQgIHJldHVybiBkZWJvdW5jZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcblx0ICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuXHQgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcblx0ICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2Uoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N5bWJvbCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuXHQgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdzeW1ib2wnIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKDMuMik7XG5cdCAqIC8vID0+IDMuMlxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuXHQgKiAvLyA9PiA1ZS0zMjRcblx0ICpcblx0ICogXy50b051bWJlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IEluZmluaXR5XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoJzMuMicpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICovXG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gTkFOO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG5cdCAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgJycgOiBvdGhlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG5cdCAgfVxuXHQgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcblx0ICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpIDogcmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG5cdCAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuXHQgICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblx0XG5cdCAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuXHQgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblx0XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25CbHVyKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcblx0ICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG5cdCAgICBrZXk6ICdvbkZvY3VzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25CbHVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvblN1Ym1pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXHRcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcblx0ICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbklucHV0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5VXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcblx0ICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG5cdCAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cdFxuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdFxuXHQgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cdFxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5UHJlc3MnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG5cdCAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRRdWVyeScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcblx0ICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2VhcmNoRWxlbWVudDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5cdHZhciBjcmVhdGVFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudChlbGVtZW50KSB7XG5cdCAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuXHQgIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cdFxuXHQgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblx0XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBlbDtcblx0fTtcblx0XG5cdHZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG5cdCAgdmFyIHNjcmlwdCA9IGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcsIG51bGwsIGRvY3VtZW50LmJvZHkpO1xuXHQgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdFxuXHQgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHQgICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG5cdCAgICAgIHNjcmlwdC5yZW1vdmUoKTtcblx0ICAgICAgZGVsZXRlIHdpbmRvd1tjYl07XG5cdCAgICAgIHJlc29sdmUoanNvbik7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHR2YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHR2YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcblx0dmFyIEVTQ0FQRV9LRVkgPSBleHBvcnRzLkVTQ0FQRV9LRVkgPSAyNztcblx0dmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xuXHR2YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcblx0dmFyIEFSUk9XX0xFRlRfS0VZID0gZXhwb3J0cy5BUlJPV19MRUZUX0tFWSA9IDM3O1xuXHR2YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblx0XG5cdHZhciBTUEVDSUFMX0tFWVMgPSBleHBvcnRzLlNQRUNJQUxfS0VZUyA9IFtFTlRFUl9LRVksIEVTQ0FQRV9LRVksIEFSUk9XX0RPV05fS0VZLCBBUlJPV19VUF9LRVksIEFSUk9XX0xFRlRfS0VZLCBBUlJPV19SSUdIVF9LRVldO1xuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG5cdH07XG5cdFxuXHR2YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuXHQgICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cdFxuXHQgICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuXHQgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG5cdCAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuXHQgICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG5cdCAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cdFxuXHQgICAgICB0aGlzLmNsZWFyKCk7XG5cdFxuXHQgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG5cdCAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWxlY3QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cdFxuXHQgICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuXHQgICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cyA/IHRoaXMucmVzdWx0cy5sZW5ndGggOiAwO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcblx0ICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZXN1bHRMaXN0O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cdFxuXHQgICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG5cdCAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcblx0ICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG5cdCAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuXHQgIH07XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuXHQgICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAganNvbnA6IGpzb25wXG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcblx0ICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG5cdCAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdnZXRQYXJhbVN0cmluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcblx0ICAgICAgfSkuam9pbignJicpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiByZXF1ZXN0Lmpzb24oKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHQgICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG5cdCAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGY6ICdqc29uJyxcblx0ICAgICAgICB0ZXh0OiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcblx0ICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuXHQgICAgICAgICAgbGFiZWw6IHIubmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcblx0ICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuXHQgICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHQgICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBmb3JtYXQ6ICdqc29uJyxcblx0ICAgICAgICBxOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gJ2h0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZW5kcG9pbnRSZXZlcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludFJldmVyc2UoKSB7XG5cdCAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZm9ybWF0OiAnanNvbicsXG5cdCAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuXHQgICAgICAgIG9zbV9pZDogZGF0YS5yYXcub3NtX2lkLFxuXHQgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2Vcblx0ICAgICAgICBvc21fdHlwZTogdGhpcy50cmFuc2xhdGVPc21UeXBlKGRhdGEucmF3Lm9zbV90eXBlKVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gJ2h0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3JldmVyc2U/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMykge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYzLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5sb24sXG5cdCAgICAgICAgICB5OiByLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWY0KSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBkYXRhLCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZjQucXVlcnksIGRhdGEgPSBfcmVmNC5kYXRhO1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICB1cmwgPSBkYXRhID8gdGhpcy5lbmRwb2ludFJldmVyc2UoeyBkYXRhOiBkYXRhLCBwcm90b2NvbDogcHJvdG9jb2wgfSkgOiB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0ICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuXHQgICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YTogZGF0YSA/IFtqc29uXSA6IGpzb24gfSkpO1xuXHQgICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAndHJhbnNsYXRlT3NtVHlwZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlT3NtVHlwZSh0eXBlKSB7XG5cdCAgICAgIGlmICh0eXBlID09PSAnbm9kZScpIHJldHVybiAnTic7XG5cdCAgICAgIGlmICh0eXBlID09PSAnd2F5JykgcmV0dXJuICdXJztcblx0ICAgICAgaWYgKHR5cGUgPT09ICdyZWxhdGlvbicpIHJldHVybiAnUic7XG5cdCAgICAgIHJldHVybiAnJzsgLy8gVW5rbm93blxuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0QWN0aXZlTGF5ZXJHcm91cHMgPSBHZXRBY3RpdmVMYXllckdyb3Vwcztcblx0ZXhwb3J0cy5yZXNldFBhbmVsU3RhdGUgPSByZXNldFBhbmVsU3RhdGU7XG5cdGV4cG9ydHMuZ2V0TGF5ZXJHcm91cHMgPSBnZXRMYXllckdyb3Vwcztcblx0ZXhwb3J0cy5TZXR1cFBhbmVsID0gU2V0dXBQYW5lbDtcblx0ZXhwb3J0cy51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodDtcblx0ZXhwb3J0cy50b2dnbGVMYXllclRvb2xzVUkgPSB0b2dnbGVMYXllclRvb2xzVUk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX29wYWNpdHlTbGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBsYXllckdyb3VwTGF5b3V0ID0gW107XG5cdHZhciBsYXllckdyb3Vwcztcblx0XG5cdGZ1bmN0aW9uIEdldEFjdGl2ZUxheWVyR3JvdXBzKCkge1xuXHRcdHJldHVybiBsYXllckdyb3VwTGF5b3V0LmZpbHRlcihmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHRcdFx0cmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNldFBhbmVsU3RhdGUoKSB7fVxuXHRcblx0ZnVuY3Rpb24gZ2V0TGF5ZXJHcm91cHMoKSB7XG5cdFx0cmV0dXJuIGxheWVyR3JvdXBzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBhbmVsKGxheWVycywgbGF5b3V0KSB7XG5cdFx0bGF5ZXJHcm91cExheW91dCA9IGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ107XG5cdFx0bGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG5cdFx0bWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG5cdFx0bWFrZVBhbmVsRHJhZ2dhYmxlKCk7XG5cdFx0c2V0UGFuZWxTY3JvbGxIYW5kbGVyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSB7XG5cdFx0dmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdFx0cmV0dXJuIHVhLmluZGV4T2YoJ01TSUUnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKSB7XG5cdFx0dmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdFx0cGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG5cdFx0aWYgKGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSkgcmV0dXJuO1xuXHRcblx0XHR2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHRcblx0XHRvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJyk7XG5cdFxuXHRcdG92ZXJsYXkuY2FsbChkMy5kcmFnKCkub24oJ2RyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKTtcblx0XHR9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcblx0XHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdFx0dXBkYXRlUGFuZWxXaWR0aCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCkge1xuXHRcdHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdFx0dmFyIHBhbmVsT2Zmc2V0SGVpZ2h0ID0gcGFuZWwucHJvcGVydHkoJ29mZnNldEhlaWdodCcpO1xuXHRcdHZhciBwYW5lbERyYWdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHRcdHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJyk7XG5cdFxuXHRcdHZhciBuZXdIZWlnaHQ7XG5cdFxuXHRcdGlmIChwYW5lbC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykpIHtcblx0XHRcdHZhciBncmFwaExpc3RFeHRyYVNwYWNlID0gNzAwO1xuXHRcdFx0dmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdFx0XHRuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuXHRcdFx0dmFyIGxheWVyTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllci1saXN0Jyk7XG5cdFx0XHRuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgbGF5ZXJMaXN0LnNjcm9sbEhlaWdodDtcblx0XHR9XG5cdFx0bmV3SGVpZ2h0ID0gbmV3SGVpZ2h0ID4gcGFuZWxPZmZzZXRIZWlnaHQgPyBcIlwiICsgbmV3SGVpZ2h0ICsgJ3B4JyA6IG51bGw7XG5cdFx0cGFuZWxEcmFnT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVBhbmVsV2lkdGgoKSB7XG5cdFx0dmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0XHR2YXIgcGFuZWxNaW5XaWR0aCA9ICtwYW5lbC5zdHlsZSgnbWluLXdpZHRoJykuc2xpY2UoMCwgLTIpO1xuXHRcdHZhciBwYW5lbENsaWVudFdpZHRoID0gcGFuZWwucHJvcGVydHkoJ2NsaWVudFdpZHRoJyk7XG5cdFxuXHRcdHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKTtcblx0XHR2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aDtcblx0XG5cdFx0dmFyIG1hcFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXdyYXBwZXInKTtcblx0XG5cdFx0dmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50Lng7XG5cdFx0dmFyIHhEZWx0YSA9IHdyYXBwZXJXaWR0aCAtIG1vdXNlWCAtIHBhbmVsQ2xpZW50V2lkdGg7XG5cdFxuXHRcdHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YTtcblx0XHRuZXdQYW5lbFdpZHRoID0gbmV3UGFuZWxXaWR0aCA8IHBhbmVsTWluV2lkdGggPyBwYW5lbE1pbldpZHRoIDogbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/IHdyYXBwZXJXaWR0aCA6IG5ld1BhbmVsV2lkdGg7XG5cdFx0bWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCc7XG5cdFx0cGFuZWwuc3R5bGUoJ3dpZHRoJywgXCJcIiArIG5ld1BhbmVsV2lkdGggKyAncHgnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzKGxheW91dCkge1xuXHRcdHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0Jykuc2VsZWN0QWxsKCcubGF5ZXItZ3JvdXAtd3JhcHBlcicpLmRhdGEobGF5b3V0KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0XHRcdHJldHVybiBsYXllckdyb3VwLmlkO1xuXHRcdH0pLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdFx0XHRyZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdFx0fSkuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHRcdFx0ZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdFxuXHRcdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIGxpc3QgYWNjb3JkaWFuc1xuXHRcdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0XHRldmVudENhdGVnb3J5OiAnbGF5ZXIgbGlzdCcsXG5cdFx0XHRcdFx0ZXZlbnRBY3Rpb246ICd0b2dnbGUgJyArICFsYXllckdyb3VwLmFjdGl2ZSxcblx0XHRcdFx0XHRldmVudExhYmVsOiBsYXllckdyb3VwLm5hbWUsXG5cdFx0XHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHRcdH0pO1xuXHRcblx0XHRcdFx0bGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XG5cdFx0XHRcdGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRyZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdFx0XHRcdCgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdFx0XHR9KS50ZXh0KGxheWVyR3JvdXAubmFtZSk7XG5cdFx0fSkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKSB7XG5cdFx0bGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JykuZGF0YShmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHRcdFx0cmV0dXJuIGxheWVyc1tsYXllckdyb3VwLmlkXTtcblx0XHR9KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JykuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblx0XHRcdHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKTtcblx0XHRcdGxheWVyLmxheWVyRGl2ID0gbGF5ZXJEaXY7XG5cdFx0XHRtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcblx0XHRcdG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpO1xuXHRcdFx0bWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG5cdFx0XHRsYXllckRpdi5ub2RlKCkuYXBwZW5kQ2hpbGQobWFrZUxheWVyVG9vbHMobGF5ZXIpKTtcblx0XHR9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdikge1xuXHRcdGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdHJldHVybiBsYXllci5pZDtcblx0XHR9KS5hdHRyKCdjaGVja2VkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdFx0XHRyZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcblx0XHR9KS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdCgwLCBfbGF5ZXIudG9nZ2xlTGF5ZXIpKGxheWVyKTtcblx0XHRcdHRvZ2dsZUxheWVyVG9vbHNVSShsYXllcik7XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUxheWVyVG9vbHNVSShsYXllcikge1xuXHRcdGxheWVyLmxheWVyRGl2LnNlbGVjdCgnLmxheWVyLXRvb2xzLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xuXHRcdGlmIChsYXllci5hY3RpdmUpIHtcblx0XHRcdHZhciBzbGlkZXJIYW5kbGUgPSBsYXllci5sYXllckRpdi5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5ub2RlKCk7XG5cdFx0XHQoMCwgX29wYWNpdHlTbGlkZXIuc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKShsYXllciwgc2xpZGVySGFuZGxlLCBsYXllci5vcGFjaXRpeSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KSB7XG5cdFx0bGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbC13cmFwcGVyJykuYXBwZW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsIGZ1bmN0aW9uIChsYXllcikge1xuXHRcdFx0cmV0dXJuIGxheWVyLmlkO1xuXHRcdH0pLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJykuaHRtbChmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdHJldHVybiBsYXllci5uYW1lO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KSB7XG5cdFx0aWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcblx0XHRcdGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4td3JhcHBlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0ZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHRcblx0XHRcdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBsYXllciBpbmZvXG5cdFx0XHRcdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRcdFx0XHRldmVudENhdGVnb3J5OiAnbGF5ZXIgaW5mbycsXG5cdFx0XHRcdFx0XHRldmVudEFjdGlvbjogJ2NsaWNrZWQnLFxuXHRcdFx0XHRcdFx0ZXZlbnRMYWJlbDogbGF5ZXIubmFtZSArIFwiIFwiICsgIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKSxcblx0XHRcdFx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdFx0XHRcdH0pO1xuXHRcblx0XHRcdFx0XHRyZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KS5hcHBlbmQoJ2ltZycpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8taWNvbicpLmF0dHIoJ3NyYycsICdpbWdzL21vcmUtaW5mby1pY29uLTY0eDY0LnBuZycpLmF0dHIoXCJhbHRcIiwgXCJSZWFkIG1vcmUgYWJvdXQgdGhlIFwiICsgbGF5ZXIubmFtZSArIFwiIGxheWVyXCIpLmF0dHIoXCJ0aXRsZVwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIik7XG5cdFxuXHRcdFx0bGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLXdyYXBwZXInKS50ZXh0KGZ1bmN0aW9uIChsYXllcikge1xuXHRcdFx0XHRyZXR1cm4gbGF5ZXIuaW5mbztcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KSB7XG5cdFx0dmFyIGxheWVyVG9vbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2xheWVyLXRvb2xzLXdyYXBwZXInKTtcblx0XHRpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcblx0XHR2YXIgb3BhY2l0eVNsaWRlciA9ICgwLCBfb3BhY2l0eVNsaWRlci5tYWtlT3BhY2l0eVNsaWRlcikobGF5ZXIpO1xuXHRcdHZhciBsZWdlbmQgPSBtYWtlTGVnZW5kKGxheWVyKTtcblx0XG5cdFx0bGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChsZWdlbmQpO1xuXHRcdGxheWVyVG9vbHNEaXYuYXBwZW5kQ2hpbGQob3BhY2l0eVNsaWRlcik7XG5cdFxuXHRcdHJldHVybiBsYXllclRvb2xzRGl2O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGVnZW5kKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xuXHRcdHZhciBsZWdlbmRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dmFyIGxlZ2VuZEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdGxlZ2VuZFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbGVnZW5kLXdyYXBwZXInKTtcblx0XHRsZWdlbmRJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBsYXllci5sZWdlbmQpO1xuXHRcdGxlZ2VuZFdyYXBwZXIuYXBwZW5kQ2hpbGQobGVnZW5kSW1nKTtcblx0XHRyZXR1cm4gbGVnZW5kV3JhcHBlcjtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRDdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycztcblx0ZXhwb3J0cy50dXJuT2ZmTm9uQmFzZUxheWVycyA9IHR1cm5PZmZOb25CYXNlTGF5ZXJzO1xuXHRleHBvcnRzLkNyZWF0ZURlZmF1bHRMYXllcnMgPSBDcmVhdGVEZWZhdWx0TGF5ZXJzO1xuXHRleHBvcnRzLnRvZ2dsZUxheWVyID0gdG9nZ2xlTGF5ZXI7XG5cdGV4cG9ydHMuZW5hYmxlTGF5ZXIgPSBlbmFibGVMYXllcjtcblx0ZXhwb3J0cy5kaXNhYmxlTGF5ZXIgPSBkaXNhYmxlTGF5ZXI7XG5cdGV4cG9ydHMudXBkYXRlTGF5ZXJPcGFjaXR5ID0gdXBkYXRlTGF5ZXJPcGFjaXR5O1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdC8qKlxuXHQgKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxuXHQgKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcblx0ICovXG5cdHZhciBfY3VycmVudF9sYXllcnMgPSBbXTtcblx0dmFyIF9jdXJyZW50X2xheWVyc19vYmplY3RzID0gW107XG5cdFxuXHQvKipcblx0ICogTm90ZTogbGF5ZXIgaXMgbm90IHRoZSBsZWFmbGV0IGNvbmNlcHQgb2YgYSBsYXllciwgYnV0IHJhdGhlciB0aGUgaW50ZXJuYWxcblx0ICogICAgICAgb2JqZWN0IHdoaWNoIHRyYWNrcyB0aGVtLiBsYXllci5tYXBMYXllciBpcyB0aGUgcG9pbnRlciB0byB0aGVcblx0ICogICAgICAgbGVhZmxldCBsYXllci5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzKCkge1xuXHRcdHJldHVybiBfY3VycmVudF9sYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHR1cm5PZmZOb25CYXNlTGF5ZXJzKCkge1xuXHRcdHdoaWxlIChfY3VycmVudF9sYXllcnNfb2JqZWN0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzLnBvcCgpO1xuXHRcdFx0bGF5ZXIuYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGF5ZXIuaWQpLmNoZWNrZWQgPSBmYWxzZTtcblx0XHRcdCgwLCBfcGFuZWwudG9nZ2xlTGF5ZXJUb29sc1VJKShsYXllcik7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzKGxheWVycywgZGVmYXVsdExheWVycykge1xuXHRcdHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHRcdHZhciBkZWZhdWx0TGF5ZXI7XG5cdFx0dmFyIGZvdW5kTGF5ZXI7XG5cdFxuXHRcdGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcblx0XHRmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Zm91bmRMYXllciA9IGZhbHNlO1xuXHRcdFx0ZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcblx0XHRcdGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0XHRcdFx0aWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0XHRcdFx0bGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XG5cdFx0XHRcdFx0XHRlbmFibGVMYXllcihsYXllcmdyb3VwW2pdKTtcblx0XHRcdFx0XHRcdGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmb3VuZExheWVyKSBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUxheWVyKGxheWVyKSB7XG5cdFx0aWYgKCFsYXllci5hY3RpdmUpIHtcblx0XHRcdGVuYWJsZUxheWVyKGxheWVyKTtcblx0XG5cdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIG9uXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcblx0XHRcdFx0ZXZlbnRBY3Rpb246ICd0b2dnbGUgb24nLFxuXHRcdFx0XHRldmVudExhYmVsOiBsYXllci5uYW1lLFxuXHRcdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXHRcblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb2ZmXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcblx0XHRcdFx0ZXZlbnRBY3Rpb246ICd0b2dnbGUgb2ZmJyxcblx0XHRcdFx0ZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcblx0XHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZUxheWVyKGxheWVyKSB7XG5cdFx0dmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdFx0bGF5ZXIuYWN0aXZlID0gdHJ1ZTtcblx0XHRsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xuXHRcdG1hcC5hZGRMYXllcihsYXllci5tYXBMYXllcik7XG5cdFx0YWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcik7XG5cdFx0bW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpO1xuXHRcdCgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1vdmVPdmVybGF5TGF5ZXJzVG9Ub3AoKSB7XG5cdFx0dmFyIGxheWVyO1xuXHRcdHZhciBpLCBsO1xuXHRcblx0XHRmb3IgKGkgPSAwLCBsID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzW2ldO1xuXHRcdFx0aWYgKGxheWVyLnR5cGUgPT09IFwib3ZlcmxheVwiKSBsYXllci5tYXBMYXllci5icmluZ1RvRnJvbnQoKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0XHRfY3VycmVudF9sYXllcnMucHVzaChsYXllci5pZCk7XG5cdFx0X2N1cnJlbnRfbGF5ZXJzX29iamVjdHMucHVzaChsYXllcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVMYXllcihsYXllcikge1xuXHRcdHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHRcdGxheWVyLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XG5cdFx0XHRtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHRcdH1cblx0XHRyZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHRcdCgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcikge1xuXHRcdHZhciBsb2MgPSBfY3VycmVudF9sYXllcnMuaW5kZXhPZihsYXllci5pZCk7XG5cdFx0aWYgKGxvYyA9PT0gLTEpIHJldHVybjtcblx0XHRfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XG5cdFx0X2N1cnJlbnRfbGF5ZXJzX29iamVjdHMuc3BsaWNlKGxvYywgMSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSkge1xuXHRcdGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5O1xuXHRcdGxheWVyLm1hcExheWVyLnNldE9wYWNpdHkobmV3T3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpIHtcblx0XHRyZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xuXHRcdFx0bGF5ZXJzOiBsYXllci5pZCxcblx0XHRcdHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuXHRcdFx0dmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxuXHRcdFx0Y3JzOiBsYXllci5jcnMgfHwgTC5DUlMuRVBTRzkwMDkxMyxcblx0XHRcdGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuXHRcdFx0b3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCAuNzUsXG5cdFx0XHR0aWxlU2l6ZTogbGF5ZXIudGlsZVNpemUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIikuY2xpZW50V2lkdGhcblx0XHR9KTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuY2xlYXJNYXAgPSBjbGVhck1hcDtcblx0ZXhwb3J0cy5DcmVhdGVNYXAgPSBDcmVhdGVNYXA7XG5cdGV4cG9ydHMuR2V0TWFwID0gR2V0TWFwO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBtYXA7XG5cdFxuXHRmdW5jdGlvbiBjbGVhck1hcCgpIHtcblx0XHQoMCwgX3BvaS5yZW1vdmVBbGxQb2ludHNPZkludGVyZXN0KSgpO1xuXHRcdCgwLCBfZ3JhcGgucmVtb3ZlQWxsR3JhcGhzKSgpO1xuXHRcdCgwLCBfbGF5ZXIudHVybk9mZk5vbkJhc2VMYXllcnMpKCk7XG5cdFx0KDAsIF9wYW5lbC5yZXNldFBhbmVsU3RhdGUpKCk7XG5cdFx0KDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHRcdCgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZU1hcChtYXBDb25maWcpIHtcblx0XHR2YXIgaWQgPSBtYXBDb25maWcuaWQgfHwgXCJtYXBcIjtcblx0XHR2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHsgXCJzY3JvbGxXaGVlbFpvb21cIjogZmFsc2UgfTtcblx0XHR2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5jZW50ZXIgfHwgW1wiMzguNVwiLCBcIi04MVwiXTtcblx0XHR2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuem9vbSB8fCA2O1xuXHRcblx0XHRtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdFx0TC5jb250cm9sLmF0dHJpYnV0aW9uKCkuYWRkVG8obWFwKTtcblx0XG5cdFx0dmFyIGxlYWZsZXRab29tSW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20taW5cIilbMF07XG5cdFxuXHRcdGxlYWZsZXRab29tSW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0XHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0XHRldmVudENhdGVnb3J5OiAnbWFwJyxcblx0XHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljayBidXR0b24nLFxuXHRcdFx0XHRldmVudExhYmVsOiAnem9vbSBpbicsXG5cdFx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFxuXHRcdHZhciBsZWFmbGV0Wm9vbU91dCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1vdXRcIilbMF07XG5cdFxuXHRcdGxlYWZsZXRab29tT3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRcdGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcblx0XHRcdFx0ZXZlbnRMYWJlbDogJ3pvb20gb3V0Jyxcblx0XHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XG5cdFx0bWFwLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGRyYWcgKHBhbikgZW5kXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRcdGV2ZW50QWN0aW9uOiAnZHJhZycsXG5cdFx0XHRcdGV2ZW50TGFiZWw6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRCb3VuZHMoKSksXG5cdFx0XHRcdG5vbkludGVyYWN0aW9uOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XG5cdFx0bWFwLm9uKFwiem9vbWVuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHpvb20gZW5kXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRcdGV2ZW50QWN0aW9uOiAnem9vbScsXG5cdFx0XHRcdGV2ZW50TGFiZWw6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRCb3VuZHMoKSksXG5cdFx0XHRcdG5vbkludGVyYWN0aW9uOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRyZXR1cm4gbWFwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRNYXAoKSB7XG5cdFx0cmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZEdyYXBoRXZlbnRzID0gQmluZEdyYXBoRXZlbnRzO1xuXHRleHBvcnRzLnJlbW92ZUFsbFBvaW50c09mSW50ZXJlc3QgPSByZW1vdmVBbGxQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLkdldEFsbFBvaW50c09mSW50ZXJlc3QgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLmNyZWF0ZVBPSSA9IGNyZWF0ZVBPSTtcblx0ZXhwb3J0cy5TZXR1cFBvaW50c09mSW50ZXJlc3QgPSBTZXR1cFBvaW50c09mSW50ZXJlc3Q7XG5cdFxuXHR2YXIgX2dyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX21hcmtlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyhtYXApIHtcblx0XHRtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUFsbFBvaW50c09mSW50ZXJlc3QoKSB7XG5cdFx0dmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XHRfcG9pbnRzX29mX2ludGVyZXN0LmZvckVhY2goZnVuY3Rpb24gKHBvaSkge1xuXHRcdFx0bWFwLnJlbW92ZUxheWVyKHBvaS5tYXJrZXIpO1xuXHRcdH0pO1xuXHRcdF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2soZSkge1xuXHRcdHZhciBtYXAgPSB0aGlzO1xuXHRcdHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XG5cdFx0dmFyIGxuZyA9IGUubGF0bG5nLmxuZztcblx0XG5cdFx0dmFyIHBvaSA9IGNyZWF0ZVBPSShsYXQsIGxuZywgbnVsbCk7XG5cdFx0QWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKHBvaSk7XG5cdFx0U2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSk7XG5cdFx0KDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0XG5cdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gbWFwXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnbWFwJyxcblx0XHRcdGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHRcdFx0ZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkoeyBcImFjdGlvblwiOiBcImFkZCBtYXAgbWFya2VyXCIsIFwibGF0XCI6IGxhdCwgXCJsb25nXCI6IGxuZyB9KSxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlciwgcG9pKSB7XG5cdFx0dmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XG5cdFx0ZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC1lbGVtLWhlYWRlclwiKVswXS5hcHBlbmRDaGlsZChlbGVtKTtcblx0XHRkMy5zZWxlY3QoZWxlbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgcmVtb3ZlIGdyYXBoXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0XHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0XHRcdGV2ZW50TGFiZWw6ICdyZW1vdmUnLFxuXHRcdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHRcdH0pO1xuXHRcblx0XHRcdFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaSk7XG5cdFx0XHRSZW1vdmVQb2ludE9mSW50ZXJlc3RVSShtYXAsIGRpdiwgbWFya2VyKTtcblx0XHRcdCgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0XHRcdCgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKSB7XG5cdFx0dmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHRcdGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcblx0XHRlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcblx0XHRlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBbGxQb2ludHNPZkludGVyZXN0KCkge1xuXHRcdHJldHVybiBfcG9pbnRzX29mX2ludGVyZXN0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVQT0kobGF0LCBsbmcsIHBsb3RzKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxhdDogbGF0LFxuXHRcdFx0bG5nOiBsbmcsXG5cdFx0XHRwbG90czogcGxvdHMgfHwgW1wiYmFzZWxpbmVcIiwgXCIyMDE1XCIsIFwidGhyZXNob2xkc1wiXVxuXHRcdH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcihwb2kpIHtcblx0XHRfcG9pbnRzX29mX2ludGVyZXN0LnB1c2gocG9pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQb2ludHNPZkludGVyZXN0KG1hcCwgbmV3UG9pcykge1xuXHRcdEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChuZXdQb2lzKTtcblx0XHR2YXIgcG9pcyA9IEdldEFsbFBvaW50c09mSW50ZXJlc3QoKTtcblx0XHR2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcdHBvaXMuZm9yRWFjaChmdW5jdGlvbiAocG9pKSB7XG5cdFx0XHRTZXR1cFBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgcG9pKTtcblx0XHR9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0KHBvaXMpIHtcblx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShfcG9pbnRzX29mX2ludGVyZXN0LCBwb2lzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pVG9SZW1vdmUpIHtcblx0XHRfcG9pbnRzX29mX2ludGVyZXN0ID0gX3BvaW50c19vZl9pbnRlcmVzdC5maWx0ZXIoZnVuY3Rpb24gKHBvaSkge1xuXHRcdFx0cmV0dXJuICEocG9pID09PSBwb2lUb1JlbW92ZSk7XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpIHtcblx0XHR2YXIgZGl2ID0gKDAsIF9ncmFwaC5jcmVhdGVHcmFwaERpdikocG9pKTtcblx0XHR2YXIgbWFya2VyID0gKDAsIF9tYXJrZXIuY3JlYXRlTWFya2VyKShwb2kubGF0LCBwb2kubG5nKTtcblx0XHRwb2kuZ3JhcGhEaXYgPSBkaXY7XG5cdFx0cG9pLm1hcmtlciA9IG1hcmtlcjtcblx0XHRtYXJrZXIuYWRkVG8obWFwKTtcblx0XHRjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlciwgcG9pKTtcblx0XG5cdFx0ZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRtYXJrZXIuc2V0SWNvbigoMCwgX21hcmtlci5nZXRJY29uKSgnaG92ZXInKSk7XG5cdFx0fSk7XG5cdFx0ZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRcdG1hcmtlci5zZXRJY29uKCgwLCBfbWFya2VyLmdldEljb24pKCdncmFwaCcpKTtcblx0XHR9KTtcblx0XHRtYXJrZXIub24oJ2NsaWNrIGRibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKTtcblx0XHR9KTtcblx0XHRtYXJrZXIub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRtYXJrZXIuc2V0SWNvbigoMCwgX21hcmtlci5nZXRJY29uKSgnaG92ZXInKSk7XG5cdFx0fSk7XG5cdFx0bWFya2VyLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRtYXJrZXIuc2V0SWNvbigoMCwgX21hcmtlci5nZXRJY29uKSgnZ3JhcGgnKSk7XG5cdFx0XHRwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJyk7XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKSB7XG5cdFx0ZS5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdCgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKCdncmFwaHMtYWN0aXZlJyk7XG5cdFx0c2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaChwb2kpO1xuXHRcdHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKSB7XG5cdFx0cG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoKHBvaSkge1xuXHRcdHZhciByaWdodFBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdFx0cmlnaHRQYW5lbC5zY3JvbGxUb3AgPSBwb2kuZ3JhcGhEaXYub2Zmc2V0VG9wO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSShtYXAsIGRpdiwgbWFya2VyKSB7XG5cdFx0dmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuXHRcdGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcblx0XHRtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblx0XHQoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5TZXR1cEdyYXBocyA9IFNldHVwR3JhcGhzO1xuXHRleHBvcnRzLnJlbW92ZUFsbEdyYXBocyA9IHJlbW92ZUFsbEdyYXBocztcblx0ZXhwb3J0cy5IYW5kbGVHcmFwaFRhYkNoYW5nZSA9IEhhbmRsZUdyYXBoVGFiQ2hhbmdlO1xuXHRleHBvcnRzLmNyZWF0ZUdyYXBoRGl2ID0gY3JlYXRlR3JhcGhEaXY7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIHRpcCA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gU2V0dXBHcmFwaHMoKSB7XG5cdFx0ZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuXHRcdGV4dGVuZERhdGVNb2R1bGUoKTtcblx0XHR0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gZDtcblx0XHR9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQWxsR3JhcGhzKCkge1xuXHRcdHZhciBncmFwaExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuXHRcdHdoaWxlIChncmFwaExpc3QuZmlyc3RDaGlsZCkge1xuXHRcdFx0Z3JhcGhMaXN0LnJlbW92ZUNoaWxkKGdyYXBoTGlzdC5maXJzdENoaWxkKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUoKSB7XG5cdFx0RGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHRcdFx0aWYgKCh5ZWFyICYgMykgIT0gMCkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0cmV0dXJuIHllYXIgJSAxMDAgIT0gMCB8fCB5ZWFyICUgNDAwID09IDA7XG5cdFx0fTtcblx0XG5cdFx0Ly8gR2V0IERheSBvZiBZZWFyXG5cdFx0RGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0XHRcdHZhciBtbiA9IHRoaXMuZ2V0TW9udGgoKTtcblx0XHRcdHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xuXHRcdFx0dmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHRcdFx0aWYgKG1uID4gMSAmJiB0aGlzLmlzTGVhcFllYXIoKSkgZGF5T2ZZZWFyKys7XG5cdFx0XHRyZXR1cm4gZGF5T2ZZZWFyO1xuXHRcdH07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgcG9pLCByZXNwb25zZSkge1xuXHRcdHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvXFxbfFxcXXxcXCcvZywgXCJcIikuc3BsaXQoXCIsIFwiKTtcblx0XHRkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgcG9pKTtcblx0XHQoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERhdGEocG9pLCBkaXYpIHtcblx0XHR2YXIgdXJsID0gXCJodHRwczovL2ZjYXYtbmR2aS5uZW1hYy5vcmcvbGFuZGRhdF9wcm9kdWN0LmNnaT9hcmdzPVwiICsgcG9pLmxuZyArIFwiLFwiICsgcG9pLmxhdDtcblx0XHR2YXIgb1JlcSA9ICgwLCBfcGFyc2VyLkdldEFqYXhPYmplY3QpKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0aGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBwb2ksIHJlc3BvbnNlKTtcblx0XHR9KTtcblx0XG5cdFx0b1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XG5cdFx0b1JlcS5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG5cdFx0dmFyIGk7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcblx0XHR9XG5cdFx0cmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEob3JpZ2RhdGEpIHtcblx0XHR2YXIgZXhwZWN0ZWRZZWFyTGVuZ3RoID0gNDY7XG5cdFx0dmFyIGRhdGEgPSB7fTtcblx0XHR2YXIgcG9pbnQ7XG5cdFx0dmFyIGtleTtcblx0XHR2YXIgaSwgajtcblx0XG5cdFx0ZGF0YVtcImtleXNcIl0gPSBbXTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgb3JpZ2RhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdHBvaW50ID0gb3JpZ2RhdGFbaV07XG5cdFx0XHRrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCwgNCk7XG5cdFx0XHRpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRkYXRhW2tleV0gPSBbXTtcblx0XHRcdFx0ZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xuXHRcdFx0fVxuXHRcdFx0ZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuXHRcdH1cblx0XG5cdFx0dmFyIGtleXNUb0JlRGVsZXRlZCA9IFtdO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGtleSA9IGRhdGEua2V5c1tpXTtcblx0XHRcdGlmIChkYXRhW2tleV0ubGVuZ3RoICE9PSBleHBlY3RlZFllYXJMZW5ndGgpIHtcblx0XHRcdFx0a2V5c1RvQmVEZWxldGVkLnB1c2goa2V5KTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGZvciAoaSA9IDA7IGkgPCBrZXlzVG9CZURlbGV0ZWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdGtleSA9IGtleXNUb0JlRGVsZXRlZFtpXTtcblx0XHRcdGRlbGV0ZSBkYXRhW2tleV07XG5cdFx0XHRkYXRhLmtleXMuc3BsaWNlKGRhdGEua2V5cy5pbmRleE9mKGtleSksIDEpO1xuXHRcdH1cblx0XG5cdFx0dmFyIGRhdGFGb3JCYXNlbGluZTtcblx0XHR2YXIgbWVhbjtcblx0XHRkYXRhW1wiYmFzZWxpbmVcIl0gPSBbXTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgZXhwZWN0ZWRZZWFyTGVuZ3RoOyBpKyspIHtcblx0XHRcdGRhdGFGb3JCYXNlbGluZSA9IFtdO1xuXHRcdFx0Zm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSBleHBlY3RlZFllYXJMZW5ndGgpIHtcblx0XHRcdFx0ZGF0YUZvckJhc2VsaW5lLnB1c2gocGFyc2VJbnQob3JpZ2RhdGFbal1bMV0sIDEwKSk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0bWVhbiA9IGNvbXB1dGVBdmVyYWdlKGRhdGFGb3JCYXNlbGluZSk7XG5cdFx0XHRkYXRhW1wiYmFzZWxpbmVcIl0ucHVzaChtZWFuKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21wdXRlQXZlcmFnZShhcnIpIHtcblx0XHR2YXIgc3VtID0gMCxcblx0XHQgICAgaSxcblx0XHQgICAgbDtcblx0XG5cdFx0Zm9yIChpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHN1bSArPSBhcnJbaV07XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gKHN1bSAvIGwpLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2soKSB7XG5cdFx0dmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdFx0dmFyIGFjdGl2ZVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdFxuXHRcdGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnZ3JhcGggdHlwZScsXG5cdFx0XHRldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHRcdGV2ZW50TGFiZWw6IHR5cGUsXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblx0XG5cdFx0SGFuZGxlR3JhcGhUYWJDaGFuZ2UodHlwZSwgYWN0aXZlVHlwZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKGdyYXBoVHlwZSkge1xuXHRcdGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSB7XG5cdFx0XHR2YXIgb2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdLnNjcm9sbEhlaWdodDtcblx0XHRcdHZhciBvbGRBY3RpdmVHcmFwaEluZm9IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC10eXBlLWluZm8gYWN0aXZlJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHRcdFx0dmFyIHJpZ2h0UGFuZWxTY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3A7XG5cdFx0fVxuXHRcdGRpc2FibGVBY3RpdmVHcmFwaFRhYigpO1xuXHRcdGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSk7XG5cdFx0aWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCwgb2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0LCByaWdodFBhbmVsU2Nyb2xsVG9wKTtcblx0XHQoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0dyYXBoTGlzdEVtcHR5KCkge1xuXHRcdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0gPT09IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkR3JhcGhJbmZvSGVpZ2h0LCBvbGRHcmFwaEVsZW1IZWlnaHQsIG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3ApIHtcblx0XHR2YXIgbmV3R3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodDtcblx0XHR2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdLnNjcm9sbEhlaWdodDtcblx0XG5cdFx0dmFyIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlID0gbmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0O1xuXHRcdHZhciBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wID0gbmV3R3JhcGhJbmZvSGVpZ2h0ICsgKG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3AgLSBvbGRHcmFwaEluZm9IZWlnaHQpICogbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGU7XG5cdFxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcCA9IG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3A7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVBY3RpdmVHcmFwaFRhYigpIHtcblx0XHR2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG5cdFx0dmFyIGFjdGl2ZUNsYXNzID0gXCJncmFwaC1cIiArIGFjdGl2ZUVsZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuXHRcblx0XHRhY3RpdmVFbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpIHtcblx0XHRkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG5bZGF0YS10eXBlPSdcIiArIGdyYXBoVHlwZSArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LmFkZChcImdyYXBoLVwiICsgZ3JhcGhUeXBlKTtcblx0XHRkMy5zZWxlY3RBbGwoJy5ncmFwaC10eXBlLWluZm8nKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZ3JhcGhUeXBlID09PSB0aGlzLmlkLnNwbGl0KCctJylbMF07XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2KHBvaSkge1xuXHRcdHZhciBkZWNpbWFsUGxhY2VzID0gMztcblx0XHR2YXIgbGF0U2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sYXQsIGRlY2ltYWxQbGFjZXMpO1xuXHRcdHZhciBsbmdTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxuZywgZGVjaW1hbFBsYWNlcyk7XG5cdFx0dmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblx0XHR2YXIgem9vbVRvTWFya2VyQnV0dG9uID0gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpO1xuXHRcdHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0U2hvcnQgKyBcIiwgTG9uZzogXCIgKyBsbmdTaG9ydCk7XG5cdFx0dmFyIGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGNvbnRlbnREaXYuY2xhc3NOYW1lID0gXCJncmFwaC1sYXQtbG9uXCI7XG5cdFx0Y29udGVudERpdi5hcHBlbmRDaGlsZChjb250ZW50KTtcblx0XG5cdFx0aGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbik7XG5cdFx0aGVhZGVyLmFwcGVuZENoaWxkKGNvbnRlbnREaXYpO1xuXHRcblx0XHR2YXIgbG9hZGluZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0bG9hZGluZ0Rpdi5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtbG9hZGluZy1kaXZcIik7XG5cdFx0d3JhcHBlci5hcHBlbmRDaGlsZChsb2FkaW5nRGl2KTtcblx0XG5cdFx0d3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKTtcblx0XHR3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1sb2FkaW5nXCIpO1xuXHRcdGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIik7XG5cdFxuXHRcdHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuXHRcdGxpc3QuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cdFx0Z2V0RGF0YShwb2ksIHdyYXBwZXIpO1xuXHRcdHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuXHRcdHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHRcdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4nKTtcblx0XHRidXR0b24uY2xhc3NMaXN0LmFkZCgncGFuLXRvLW1hcmtlci1idG4nKTtcblx0XHRidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCI7XG5cdFx0YnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAocG9pLCBlKSB7XG5cdFx0XHR2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcdFx0bWFwLnBhblRvKFtwb2kubGF0LCBwb2kubG5nXSk7XG5cdFxuXHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gc2hvdyBvbiBtYXBcblx0XHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0XHRldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHRcdFx0XHRldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHRcdFx0ZXZlbnRMYWJlbDogJ3tcInNob3cgb24gbWFwXCI6e1wibGF0XCI6JyArIHBvaS5sYXQgKyAnLFwibG9uZ1wiOicgKyBwb2kubG5nICsgJ319Jyxcblx0XHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9LmJpbmQoYnV0dG9uLCBwb2kpO1xuXHRcdHJldHVybiBidXR0b247XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIHBvaSkge1xuXHRcdGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XG5cdFx0dmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdFx0bWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYpO1xuXHRcdG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIHBvaSk7XG5cdFx0ZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBwb2kpO1xuXHRcdGRpdi5jbGFzc0xpc3QucmVtb3ZlKFwiZ3JhcGgtbG9hZGluZ1wiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcm91bmRGbG9hdChudW1iZXIsIGRlY2ltYWxQbGFjZXMpIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiBNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcykpIC8gTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdikge1xuXHRcdC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0XHR2YXIgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI5IH0sXG5cdFx0ICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdFx0ICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0XHQvLyBTZXQgdGhlIHJhbmdlc1xuXHRcdHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFtwYXJzZURhdGUoZGF0YVswXVswXSksIHBhcnNlRGF0ZShkYXRhW2RhdGEubGVuZ3RoIC0gMV1bMF0pXSk7XG5cdFx0dmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0XHQvLyBEZWZpbmUgdGhlIGF4ZXNcblx0XHR2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpLnRpY2tzKDE2KS50aWNrRm9ybWF0KGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gZC5nZXRGdWxsWWVhcigpO1xuXHRcdH0pO1xuXHRcblx0XHR2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdFx0Ly8gRGVmaW5lIHRoZSBsaW5lXG5cdFx0dmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4geChwYXJzZURhdGUoZFswXSkpO1xuXHRcdH0pLnkoZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiB5KGRbMV0pO1xuXHRcdH0pO1xuXHRcblx0XHR2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdFx0Ly8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHRcdHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKS5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0O1xuXHRcdFx0dmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0XHRcdHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaDtcblx0XHR9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHRcdHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHRcdC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG5cdFx0ZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHRcblx0XHQvLyBBZGQgdGhlIFggQXhpc1xuXHRcdHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHRcdC8vIEFkZCB0aGUgWSBBeGlzXG5cdFx0c3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHRcdC8qKlxuXHQgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAqL1xuXHRcdGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLyBPVkVSTEFQUElORyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhkYXRhLCBkaXYsIHBvaSkge1xuXHRcdHZhciBjaGFydHMgPSB7fTtcblx0XG5cdFx0Ly8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHRcdHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjkgfSxcblx0XHQgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0XHQgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHRcdHZhciBhdmVyYWdlcyA9IGRhdGEuYmFzZWxpbmU7XG5cdFxuXHRcdHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oWzAsIDM2NV0pO1xuXHRcdHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdFx0Ly8gRGVmaW5lIHRoZSBheGVzXG5cdFx0ZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrKGQpIHtcblx0XHRcdHJldHVybiBNT05USF9MQUJFTFNbKGQgLSAxNSkgLyAzMF07XG5cdFx0fVxuXHRcdHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTEpLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKS50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cdFxuXHRcdHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpLnRpY2tzKDYpO1xuXHRcblx0XHQvLyBEZWZpbmUgdGhlIGxpbmVcblx0XHR2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQsIGkpIHtcblx0XHRcdHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KGkgKiA4ICsgMyk7XG5cdFx0fSkueShmdW5jdGlvbiAoZCkge1xuXHRcdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKTtcblx0XHR9KTtcblx0XG5cdFx0dmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xuXHRcblx0XHQvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdFx0dmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdFx0XHR2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tO1xuXHRcdFx0cmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoO1xuXHRcdH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuXHRcdC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuXHRcdC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG5cdFx0LmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXHRcblx0XHRzdmcuY2FsbCh0aXApO1xuXHRcblx0XHQvLyBBZGQgdGhlIFggQXhpc1xuXHRcdHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHRcdC8vIEFkZCB0aGUgWSBBeGlzXG5cdFx0c3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHRcblx0XHR2YXIgcGxvdCwgaSwgbDtcblx0XHRmb3IgKGkgPSAwLCBsID0gcG9pLnBsb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0cGxvdCA9IHBvaS5wbG90c1tpXTtcblx0XHRcdGlmIChwbG90ID09PSBcInRocmVzaG9sZHNcIikgY29udGludWU7XG5cdFx0XHRjaGFydHNbcGxvdF0gPSB7XG5cdFx0XHRcdFwicGF0aFwiOiBkcmF3TGluZWFyUGF0aChkYXRhW3Bsb3RdLCB2YWx1ZWxpbmUsIHN2Zylcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHQvKipcblx0ICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgKi9cblx0XHRmb3IgKGkgPSAwLCBsID0gcG9pLnBsb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0cGxvdCA9IHBvaS5wbG90c1tpXTtcblx0XHRcdGlmIChwbG90ID09PSBcInRocmVzaG9sZHNcIikgY29udGludWU7XG5cdFx0XHRjaGFydHNbcGxvdF0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3Bsb3RdLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cdFx0fVxuXHRcblx0XHR2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHRcdGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcIm92ZXJsYXBwaW5nXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcdH0pO1xuXHRcblx0XHRjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwiYmFzZWxpbmVcIiwgXCJvdmVybGFwcGluZ1wiLCBwb2ksIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQT0xBUiBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKGRhdGEsIGRpdiwgcG9pKSB7XG5cdFx0dmFyIHdpZHRoID0gNDkwLFxuXHRcdCAgICBoZWlnaHQgPSA0OTAsXG5cdFx0ICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xuXHRcblx0XHR2YXIgYXZlcmFnZXMgPSBkYXRhW1wiYmFzZWxpbmVcIl07XG5cdFx0dmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0XHR2YXIgdGhyZXNob2xkcyA9IGZpbmRQb2xhclRocmVzaG9sZHMoYXZlcmFnZXMsIGNlbnRlclsxXVswXSk7XG5cdFxuXHRcdC8qKlxuXHQgICogU2V0cyB1cCBzY2FsaW5nIG9mIGRhdGEuIFdlIGtub3cgdGhhdCB0aGUgbmR2aSB2YWx1ZXMgZmFsbCBiZXR3ZWVuXG5cdCAgKiAwICYgMTAwIHNvIHdlIHNldCBvdXIgZG9tYWluIHRvIHRoYXQuIFRoZSByYW5nZSBjb250cm9scyB3aGVyZSB0aGVcblx0ICAqIHBvaW50cyB3aWxsIGxpZSBpbiBvdXIgZ3JhcGgsIHNvIHdlIHNldCB0aGVtIHRvIGJlIGJldHdlZW4gMCBhbmQgdGhlXG5cdCAgKiByYWRpdXMuXG5cdCAgKi9cblx0XHR2YXIgciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAxMDBdKS5yYW5nZShbMCwgcmFkaXVzXSk7XG5cdFxuXHRcdC8qKlxuXHQgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXG5cdCAgKiBjZW50ZXIgZWFjaCBwb2ludCBpcyB3ZSBwYXNzIHRoZSBkYXRhcG9pbnQgdG8gdGhlIGZ1bmN0aW9uIGRlZmluZWQgYWJvdmUuXG5cdCAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xuXHQgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcblx0ICAqIGl0IGJ5IDIgcGkuXG5cdCAgKi9cblx0XHR2YXIgbGluZSA9IGQzLnJhZGlhbExpbmUoKS5yYWRpdXMoZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiBBcnJheS5pc0FycmF5KGQpID8gcihkWzFdKSA6IHIoZCk7XG5cdFx0fSkuYW5nbGUoZnVuY3Rpb24gKGQsIGkpIHtcblx0XHRcdHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiBpICogOCArIDM7XG5cdFx0XHRyZXR1cm4gKGRheSAtIDEpICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKTtcblx0XHR9KTtcblx0XG5cdFx0LyoqXG5cdCAgKiBTZXRzIHVwIHRoZSBjYW52YXMgd2hlcmUgdGhlIGNpcmNsZSB3aWxsIGJlIGRyYXduLlxuXHQgICovXG5cdFx0dmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuXHRcdHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuXHRcdC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0XHQvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0XHQuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodDtcblx0XHR9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgd2lkdGggLyAyICsgXCIsXCIgKyBoZWlnaHQgLyAyICsgXCIpXCIpO1xuXHRcblx0XHRzdmcuY2FsbCh0aXApO1xuXHRcblx0XHQvKipcblx0ICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXG5cdCAgKi9cblx0XHR2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJyIGF4aXNcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKTtcblx0XG5cdFx0Z3IuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIHIpO1xuXHRcblx0XHRnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gLXIoZCkgLSA0O1xuXHRcdH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHRcdFx0cmV0dXJuIGQ7XG5cdFx0fSk7XG5cdFxuXHRcdC8qKlxuXHQgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xuXHQgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cblx0ICAqL1xuXHRcdHZhciBnYV9hID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7XG5cdFx0fSk7XG5cdFxuXHRcdGdhX2EuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdFx0Z2FfYS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0XHR9KS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdFx0fSkudGV4dChmdW5jdGlvbiAoZCkge1xuXHRcdFx0cmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHRcdH0pO1xuXHRcblx0XHQvKipcblx0ICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcblx0ICAqL1xuXHRcdHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHRocmVzaG9sZHMpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7XG5cdFx0fSk7XG5cdFxuXHRcdHRocmVzaG9sZEVsZW0uYXBwZW5kKFwibGluZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0XHR0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyByYWRpdXMgKyAzMCA6IHJhZGl1cyAtIDMwO1xuXHRcdH0pLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gZC5kYXRhWzFdWzBdICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKSArIDY7XG5cdFx0fSkuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0dmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwibWlkZGxlXCIgOiBudWxsO1xuXHRcdH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0XHRcdHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDtcblx0XHR9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRyZXR1cm4gZC5sYWJlbDtcblx0XHR9KTtcblx0XG5cdFx0dGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgcG9pLnBsb3RzLmluZGV4T2YoXCJ0aHJlc2hvbGRzXCIpICE9PSAtMSA/IDEgOiAwKTtcblx0XG5cdFx0LyoqXG5cdCAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgY2VudGVyIG9mIHRoZSBkYXRhXG5cdCAgKi9cblx0XHR2YXIgY2VudGVyRGF5ID0gY2VudGVyWzFdWzBdO1xuXHRcdHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAzNjUgLyAyKSAlIDM2NTtcblx0XHR2YXIgY2VudGVyRGF5RGF0YSA9IFtjZW50ZXJEYXksIDEwMF07XG5cdFx0dmFyIGNlbnRlckRheU9wcG9zaXRlRGF0YSA9IFtjZW50ZXJEYXlPcHBvc2l0ZSwgMTAwXTtcblx0XHR2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXTtcblx0XG5cdFx0ZHJhd1BvbGFyUGF0aChncm93aW5nU2Vhc29uRGF0YSwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHRcdGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHRcdHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKFtjZW50ZXJbMV1dKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJjZW50ZXJcIikuYXR0cihcInJcIiwgNCkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0dmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0XHRcdHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdFx0fSkuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgXCIjZWEwYzQ4XCIpLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHR0aXAuc2hvdyhcIkNlbnRlcjogXCIgKyBTdHJpbmcoZFsxXSkuc3Vic3RyaW5nKDAsIDcpKTtcblx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0XHR9KS5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHR0aXAuaGlkZSgpO1xuXHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDQpO1xuXHRcdH0pO1xuXHRcblx0XHR2YXIgY2hhcnRzID0ge307XG5cdFxuXHRcdC8qKlxuXHQgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuXHQgICovXG5cdFx0dmFyIHBsb3QsIGksIGw7XG5cdFx0Zm9yIChpID0gMCwgbCA9IHBvaS5wbG90cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHBsb3QgPSBwb2kucGxvdHNbaV07XG5cdFx0XHRpZiAocGxvdCA9PT0gXCJ0aHJlc2hvbGRzXCIpIGNvbnRpbnVlO1xuXHRcdFx0Y2hhcnRzW3Bsb3RdID0ge1xuXHRcdFx0XHRcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3Bsb3RdLCBsaW5lLCBzdmcpXG5cdFx0XHR9O1xuXHRcdH1cblx0XG5cdFx0LyoqXG5cdCAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuXHQgICovXG5cdFx0Zm9yIChpID0gMCwgbCA9IHBvaS5wbG90cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHBsb3QgPSBwb2kucGxvdHNbaV07XG5cdFx0XHRpZiAocGxvdCA9PT0gXCJ0aHJlc2hvbGRzXCIpIGNvbnRpbnVlO1xuXHRcdFx0Y2hhcnRzW3Bsb3RdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtwbG90XSwgbGluZSwgc3ZnKTtcblx0XHR9XG5cdFxuXHRcdHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblx0XG5cdFx0ZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0Y3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwicG9sYXJcIiwgcG9pLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcdH0pO1xuXHRcblx0XHRjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwiYmFzZWxpbmVcIiwgXCJwb2xhclwiLCBwb2ksIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHRcdHZhciB0aHJlc2hvbGRDaGVja2JveCA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcblx0XG5cdFx0dGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBwb2kubGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIHBvaS5sbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkucHJvcGVydHkoXCJjaGVja2VkXCIsIHBvaS5wbG90cy5pbmRleE9mKFwidGhyZXNob2xkc1wiKSAhPT0gLTEpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHR0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCB0aGlzLmNoZWNrZWQgPyAxIDogMCk7XG5cdFx0XHR2YXIgb2Zmb24gPSB0aGlzLmNoZWNrZWQgPyAnb2ZmJyA6ICdvbic7XG5cdFxuXHRcdFx0aWYgKHRoaXMuY2hlY2tlZCkge1xuXHRcdFx0XHRhZGRLZXlUb1BPSShwb2ksIFwidGhyZXNob2xkc1wiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlbW92ZUtleUZyb21QT0kocG9pLCBcInRocmVzaG9sZHNcIik7XG5cdFx0XHR9XG5cdFxuXHRcdFx0KDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHRocmVzaG9sZCBjbGljayBvZmZcblx0XHRcdGRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrKCd0aHJlc2hvbGQgcG9sYXIgdGltZXNlcmllcyAnICsgb2Zmb24pO1xuXHRcdH0pO1xuXHRcblx0XHR0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiVGhyZXNob2xkc1wiKS5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgcG9pLmxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBwb2kubG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHRcdHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0XHR2YXIgdG90YWxTdW0gPSAwO1xuXHRcdHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHRcdHZhciBzdW07XG5cdFx0bGVuZ3RoID0gNDY7XG5cdFxuXHRcdGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGFyciA9IGRhdGFbZGF0YS5rZXlzW2ldXTtcblx0XHRcdGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcblx0XHRcdFx0aW5jb21wbGV0ZVllYXJzKys7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0c3VtID0gMDtcblx0XHRcdGZvciAoaiA9IDA7IGogPCBsZW5ndGggLyAyOyBqKyspIHtcblx0XHRcdFx0c3VtICs9IGFycltqXVsxXSAtIGFycltqICsgMjNdWzFdO1xuXHRcdFx0fVxuXHRcdFx0c3VtID0gc3VtIC8gMjM7XG5cdFx0XHR0b3RhbFN1bSArPSBzdW07XG5cdFx0fVxuXHRcdHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0XHR2YXIgYXJlYURpZmYgPSAxMDAwMDAwO1xuXHRcdHZhciBjaGVja0RpZmY7XG5cdFx0dmFyIGFyZWFJbmRleCA9IDA7XG5cdFx0dmFyIGxlZnRBcmVhLCByaWdodEFyZWE7XG5cdFx0dmFyIGF2Z3MgPSBkYXRhLmJhc2VsaW5lO1xuXHRcdHZhciBrLCBjb3VudGVyO1xuXHRcblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIC8gMjsgaSsrKSB7XG5cdFx0XHRsZWZ0QXJlYSA9IDA7XG5cdFx0XHRyaWdodEFyZWEgPSAwO1xuXHRcdFx0Zm9yIChjb3VudGVyID0gMDsgY291bnRlciA8IGxlbmd0aCAvIDI7IGNvdW50ZXIrKykge1xuXHRcdFx0XHRqID0gKGkgKyBjb3VudGVyKSAlIDQ2O1xuXHRcdFx0XHRrID0gKGogKyAyMykgJSA0Njtcblx0XG5cdFx0XHRcdGxlZnRBcmVhICs9IHBhcnNlSW50KGF2Z3Nbal0sIDEwKTtcblx0XHRcdFx0cmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sIDEwKTtcblx0XHRcdH1cblx0XHRcdGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcblx0XHRcdGlmIChjaGVja0RpZmYgPCBhcmVhRGlmZikge1xuXHRcdFx0XHRhcmVhRGlmZiA9IGNoZWNrRGlmZjtcblx0XHRcdFx0YXJlYUluZGV4ID0gaTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuXHRcdHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblx0XG5cdFx0dmFyIG1pZHBvaW50ID0gKGZpcnN0UmFkaXVzICsgc2Vjb25kUmFkaXVzKSAvIDI7XG5cdFx0dmFyIGZpcnN0RGlmZiA9IE1hdGguYWJzKHRvdGFsU3VtIC0gbWlkcG9pbnQpO1xuXHRcdHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gbWlkcG9pbnQpO1xuXHRcdGlmIChzZWNvbmREaWZmIDwgZmlyc3REaWZmKSB7XG5cdFx0XHRhcmVhSW5kZXggPSBhcmVhSW5kZXggKyAyMztcblx0XHR9XG5cdFxuXHRcdHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG5cdFx0dmFyIGRhdGFjZW50ZXIgPSBbYXJlYUluZGV4ICogOCArIDMsIHRvdGFsU3VtXTtcblx0XG5cdFx0cmV0dXJuIFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpdCBzaG91bGQgYmUgZmxpcHBlZFxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyhkYXRhLCBzdGFydERheSkge1xuXHRcdHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xuXHRcdHN0YXJ0SW5kZXggKz0gc3RhcnRJbmRleCA+IDIyID8gLTIzIDogMjM7XG5cdFx0dmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHRcdHZhciB0b3RhbFN1bSA9IDA7XG5cdFx0dmFyIHN1bTtcblx0XHRsZW5ndGggPSA0Njtcblx0XG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0XHRqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0XHRcdHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0XHR9XG5cdFxuXHRcdHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG5cdFx0dmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuXHRcdHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuXHRcdCAgICBlaWdodHlJbmRleEZvdW5kID0gZmFsc2U7XG5cdFx0dmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXg7XG5cdFxuXHRcdHRvdGFsU3VtID0gMDtcblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRcdGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHRcdFx0dG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuXHRcdFx0aWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcblx0XHRcdFx0ZmlmdGVlbkluZGV4ID0gajtcblx0XHRcdFx0ZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmICghZWlnaHR5SW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGVpZ2h0eVRocmVzaG9sZCkge1xuXHRcdFx0XHRlaWdodHlJbmRleCA9IGo7XG5cdFx0XHRcdGVpZ2h0eUluZGV4Rm91bmQgPSB0cnVlO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cdFxuXHRcdHZhciBmaWZ0ZWVuRW5kID0gW2ZpZnRlZW5JbmRleCAqIDggKyAzLCAxMDBdO1xuXHRcdHZhciBlaWdodHlFbmQgPSBbZWlnaHR5SW5kZXggKiA4ICsgMywgMTAwXTtcblx0XG5cdFx0cmV0dXJuIFt7XG5cdFx0XHRcImxhYmVsXCI6IFwiMTUlXCIsXG5cdFx0XHRcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZmlmdGVlbkVuZF1cblx0XHR9LCB7XG5cdFx0XHRcImxhYmVsXCI6IFwiODAlXCIsXG5cdFx0XHRcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuXHRcdH1dO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdFx0cmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZShkYXRhKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdQb2xhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdFx0cmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmRhdHVtKGRhdGEpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdFx0cmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0XHRcdHZhciBwb2ludCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkIDogW2kgKiA4ICsgMywgZF07XG5cdFx0XHR2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0XHRcdHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdFx0fSlcblx0XHQvLy5hdHRyKFwiclwiLCAzKVxuXHRcdC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbiAoZCwgaSkge1xuXHRcdFx0dmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdLnN1YnN0cmluZygwLCA0KSA6IDA7XG5cdFx0XHRyZXR1cm4gcHVsbERpc3RpbmN0Q29sb3IodmFsKTtcblx0XHR9KS5vbihcIm1vdXNlb3ZlclwiLCBoYW5kbGVQb2ludE1vdXNlb3Zlcikub24oXCJtb3VzZW91dFwiLCBoYW5kbGVQb2ludE1vdXNlb3V0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW92ZXIoZCkge1xuXHRcdHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICsgZDtcblx0XHR0aXAuc2hvdyh0aXBTdHJpbmcpO1xuXHRcdHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCBcIjRcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xuXHRcdHRpcC5oaWRlKCk7XG5cdFx0dGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIFwiMlwiKTtcblx0XG5cdFx0dmFyIGFjdGl2ZVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdFxuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXG5cdFx0Ly8gd2UgbWlzcyBhIGZldyBidXQgdGhhdCBpcyBiZXR0ZXIgdGhhbiBvdmVyIGNvdW50aW5nLlxuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0XHRcdGV2ZW50QWN0aW9uOiAnaG92ZXInLFxuXHRcdFx0ZXZlbnRMYWJlbDogYWN0aXZlVHlwZSArICcgdG9vbCB0aXAnLFxuXHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94KHdyYXBwZXIsIGtleSwgdHlwZSwgcG9pLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcblx0XHR2YXIgY2hlY2tib3hXcmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG5cdFx0dmFyIGxhdCA9IHBvaS5sYXQ7XG5cdFx0dmFyIGxuZyA9IHBvaS5sbmc7XG5cdFxuXHRcdGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJkYXRhLWxpbmtcIiwga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgcG9pLnBsb3RzLmluZGV4T2Yoa2V5KSAhPT0gLTEgPyB0cnVlIDogZmFsc2UpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHR2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG5cdFx0XHRpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHRcdFx0XHRoYW5kbGVDaGVja2JveERpc2FibGUoY2hhcnRzLCBuZXdZZWFyKTtcblx0XHRcdFx0cmVtb3ZlS2V5RnJvbVBPSShwb2ksIGtleSk7XG5cdFx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG5cdFx0XHRcdGRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrKG5ld1llYXIgKyAnICcgKyB0eXBlICsgJyB0aW1lc2VyaWVzIG9mZicpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlQ2hlY2tib3hFbmFibGUoY2hhcnRzLCBuZXdZZWFyLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XHRcdFx0YWRkS2V5VG9QT0kocG9pLCBrZXkpO1xuXHRcdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9uXG5cdFx0XHRcdGRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrKG5ld1llYXIgKyAnICcgKyB0eXBlICsgJyB0aW1lc2VyaWVzIG9uJyk7XG5cdFx0XHR9XG5cdFx0XHRoYW5kbGVDaGVja2JveFN5bmMoa2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpLCB0aGlzLmNoZWNrZWQpO1xuXHRcdFx0KDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0XHR9KTtcblx0XG5cdFx0Y2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoa2V5ICE9PSBcImJhc2VsaW5lXCIgPyBrZXkgOiBcIkJhc2VsaW5lXCIpLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdFx0Y2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKS5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcImJhc2VsaW5lXCIgPyBrZXkgOiAwKSkuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDaGVja2JveERpc2FibGUoY2hhcnRzLCBuZXdZZWFyKSB7XG5cdFx0Y2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdFx0Y2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQ2hlY2tib3hFbmFibGUoY2hhcnRzLCBuZXdZZWFyLCBkYXRhLCBsaW5lLCBzdmcpIHtcblx0XHRpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHRcdFx0Y2hhcnRzW25ld1llYXJdID0ge307XG5cdFx0fVxuXHRcdGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd0xpbmVhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0XHRjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDaGVja2JveFN5bmMoa2V5LCBjaGVja2VkU3RhdHVzLCB3cmFwcGVyKSB7XG5cdFx0ZDMuc2VsZWN0QWxsKFwiaW5wdXRbZGF0YS1saW5rPSdcIiArIGtleSArIFwiJ11cIikuZWFjaChmdW5jdGlvbiAocCwgaikge1xuXHRcdFx0dmFyIGVsZW0gPSBkMy5zZWxlY3QodGhpcyk7XG5cdFx0XHRpZiAoZWxlbS5wcm9wZXJ0eShcImNoZWNrZWRcIikgIT09IGNoZWNrZWRTdGF0dXMpIHtcblx0XHRcdFx0ZWxlbS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgY2hlY2tlZFN0YXR1cyk7XG5cdFx0XHRcdGVsZW0uZGlzcGF0Y2goXCJjaGFuZ2VcIik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUtleUZyb21QT0kocG9pLCBrZXkpIHtcblx0XHR2YXIgaW5kZXggPSBwb2kucGxvdHMuaW5kZXhPZihrZXkpO1xuXHRcdGlmIChpbmRleCA9PT0gLTEpIHJldHVybjtcblx0XHRwb2kucGxvdHMuc3BsaWNlKGluZGV4LCAxKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkS2V5VG9QT0kocG9pLCBrZXkpIHtcblx0XHRpZiAocG9pLnBsb3RzLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHJldHVybjtcblx0XHRwb2kucGxvdHMucHVzaChrZXkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNwYXRjaEdyYXBoQ2hlY2tib3hDbGljayhsYWJlbCkge1xuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0XHRcdGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHRcdFx0ZXZlbnRMYWJlbDogbGFiZWwsXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHVsbERpc3RpbmN0Q29sb3IoeWVhcikge1xuXHRcdHZhciBjb2xvclJhbXAgPSBbXCIjZmZlNDc2XCIsIFwiIzAzNjU5M1wiLCBcIiMxMTZjOTFcIiwgXCIjMWU3MzkwXCIsIFwiIzJjN2I4ZVwiLCBcIiMzOTgyOGNcIiwgXCIjNGM4YzhhXCIsIFwiIzVlOTU4OVwiLCBcIiM3MTlmODdcIiwgXCIjODNhODg2XCIsIFwiIzk1YjE4M1wiLCBcIiNhNmJhODBcIiwgXCIjYjhjMzdjXCIsIFwiI2NhY2M3OVwiLCBcIiNkNmQyNzlcIiwgXCIjZTJkNzc5XCIsIFwiI2VmZGQ3OFwiLCBcIiNmYmUzNzhcIl07XG5cdFxuXHRcdHJldHVybiB5ZWFyID09PSAwID8gXCIjZmZmXCIgOiBjb2xvclJhbXBbcGFyc2VJbnQoeWVhciwgMTApICUgY29sb3JSYW1wLmxlbmd0aF07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGUpIHtcblx0XHRkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuXHRcdHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG5cdFx0dmFyIG1vbnRoID0gcGFyc2VJbnQoZGF0ZS5zdWJzdHJpbmcoNCwgNiksIDEwKSAtIDE7XG5cdFx0dmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXHRcblx0XHRyZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5KGRhdGUpIHtcblx0XHRpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG5cdFx0XHRyZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGRhdGU7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcblx0XHRpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHtcblx0XHRcdHJldHVybiBkYXRlO1xuXHRcdH1cblx0XG5cdFx0ZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0XHRyZXR1cm4gZm9ybWF0TW9udGgoZGF0ZS5nZXRNb250aCgpKSArIFwiIFwiICsgb3JkaW5hbF9zdWZmaXhfb2YoZGF0ZS5nZXREYXRlKCkpICsgXCIsIFwiICsgZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRNb250aChtb250aCkge1xuXHRcdHJldHVybiBGT1JNQVRURURfTU9OVEhfTEFCRUxTW21vbnRoXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoZGF5KSB7XG5cdFx0dmFyIGogPSBkYXkgJSAxMCxcblx0XHQgICAgayA9IGRheSAlIDEwMDtcblx0XHRpZiAoaiA9PT0gMSAmJiBrICE9PSAxMSkge1xuXHRcdFx0cmV0dXJuIGRheSArIFwic3RcIjtcblx0XHR9XG5cdFx0aWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcblx0XHRcdHJldHVybiBkYXkgKyBcIm5kXCI7XG5cdFx0fVxuXHRcdGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG5cdFx0XHRyZXR1cm4gZGF5ICsgXCJyZFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gZGF5ICsgXCJ0aFwiO1xuXHR9XG5cdFxuXHR2YXIgTU9OVEhfTEFCRUxTID0ge1xuXHRcdDA6IFwiSmFuXCIsXG5cdFx0MTogXCJGZWJcIixcblx0XHQyOiBcIk1hclwiLFxuXHRcdDM6IFwiQXByXCIsXG5cdFx0NDogXCJNYXlcIixcblx0XHQ1OiBcIkp1blwiLFxuXHRcdDY6IFwiSnVsXCIsXG5cdFx0NzogXCJBdWdcIixcblx0XHQ4OiBcIlNlcFwiLFxuXHRcdDk6IFwiT2N0XCIsXG5cdFx0MTA6IFwiTm92XCIsXG5cdFx0MTE6IFwiRGVjXCJcblx0fTtcblx0XG5cdHZhciBGT1JNQVRURURfTU9OVEhfTEFCRUxTID0ge1xuXHRcdDA6IFwiSmFuLlwiLFxuXHRcdDE6IFwiRmViLlwiLFxuXHRcdDI6IFwiTWFyLlwiLFxuXHRcdDM6IFwiQXByLlwiLFxuXHRcdDQ6IFwiTWF5XCIsXG5cdFx0NTogXCJKdW4uXCIsXG5cdFx0NjogXCJKdWwuXCIsXG5cdFx0NzogXCJBdWcuXCIsXG5cdFx0ODogXCJTZXAuXCIsXG5cdFx0OTogXCJPY3QuXCIsXG5cdFx0MTA6IFwiTm92LlwiLFxuXHRcdDExOiBcIkRlYy5cIlxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRleHBvcnRzLkJpbmRDb3B5TGlua0V2ZW50cyA9IEJpbmRDb3B5TGlua0V2ZW50cztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX2Jhc2VsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybChtYXApIHtcblx0XHRtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwoZSkge1xuXHRcdHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHRcdHZhciBwYXJhbXMgPSBbbWFrZUNlbnRlclN0cmluZyhtYXApLCBtYWtlWm9vbVN0cmluZyhtYXApLCBtYWtlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZUxheWVyR3JvdXBzU3RyaW5nKCksIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSwgbWFrZUFjdGl2ZVRhYlN0cmluZygpLCBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKV07XG5cdFxuXHRcdHNldFNoYXJlVXJsKG1ha2VTaGFyZVVybChwYXJhbXMpKTtcblx0XHRzZXRDb3B5TGlua1VybCgpO1xuXHRcdHNldFNvY2lhbFVybHMoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGNvbmZpZykge1xuXHRcdHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcblx0XHRpZiAoIXNoYXJlKSByZXR1cm47XG5cdFx0aWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5jZW50ZXIgPSBzaGFyZS5jZW50ZXI7XG5cdFx0aWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuem9vbSA9IHNoYXJlLnpvb207XG5cdFx0aWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcblx0XHRpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xuXHRcdGlmIChzaGFyZS5wb2lzKSBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcoc2hhcmUucG9pcywgY29uZmlnKTtcblx0XHRpZiAoc2hhcmUudGFiKSBjb25maWcudGFiID0gc2hhcmUudGFiO1xuXHRcdGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG5cdFx0aWYgKHNoYXJlLmxheWVyR3JvdXBzKSBjb25maWcubGF5ZXJHcm91cHMgPSBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllckdyb3VwcywgY29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVNoYXJlVXJsKHBhcmFtcykge1xuXHRcdHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcblx0XHRcdHJldHVybiBwICE9PSB1bmRlZmluZWQ7XG5cdFx0fSkuam9pbihcIiZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFNoYXJlVXJsKHVybCkge1xuXHRcdGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0XHRcdHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldENvcHlMaW5rVXJsKCkge1xuXHRcdHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHVybCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEJpbmRDb3B5TGlua0V2ZW50cygpIHtcblx0XHRkMy5zZWxlY3QoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgaGFuZGxlQm9keUNsaWNrKTtcblx0XHRkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluayBhXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2spO1xuXHRcdGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rLXVybFwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua1VybENsaWNrKTtcblx0XHRkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay1wb3B1cC1yZW1vdmVyXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaG91bGQgY2xvc2UgdGhlIGNvcHkgbGluayBwb3B1cCBpZiBpdCBpcyBhY3RpdmUgYW5kIGlmIHlvdSBjbGljayBvbiBhbnkgZWxlbWVudFxuXHQgKiB0aGF0IGlzIG5vdCB0aGUgcG9wdXAgb3IgaXRzIGNoaWxkcmVuLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrKCkge1xuXHRcdHZhciBldmVudCA9IGQzLmV2ZW50O1xuXHRcdHZhciBub2RlUGF0aCA9IFtdO1xuXHRcdG5vZGVQYXRoID0gZ2V0RG9tUGF0aChldmVudC50YXJnZXQpO1xuXHRcblx0XHR2YXIgdG9DbG9zZVBvcHVwID0gdHJ1ZTtcblx0XHR2YXIgaSwgbDtcblx0XG5cdFx0Zm9yIChpID0gMCwgbCA9IG5vZGVQYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKG5vZGVQYXRoW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2hhcmV1cmwtbGluay1wb3B1cCcpIHx8IG5vZGVQYXRoW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2hhcmV1cmwtbGluaycpKSB7XG5cdFx0XHRcdFx0dG9DbG9zZVBvcHVwID0gZmFsc2U7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Ly8gY2xpY2tpbmcgc3ZnIHRocm93cyBhbiBlcnJvciBpbiBJRVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0aWYgKHRvQ2xvc2VQb3B1cCkge1xuXHRcdFx0dmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGFyZXVybC1saW5rLXBvcHVwJykuaXRlbSgwKTtcblx0XHRcdGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREb21QYXRoKG5vZGUpIHtcblx0XHR2YXIgcGF0aCA9IFtdO1xuXHRcdHdoaWxlIChub2RlICYmIG5vZGUucGFyZW50Tm9kZSkge1xuXHRcdFx0cGF0aC5wdXNoKG5vZGUpO1xuXHRcdFx0bm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0XHR9XG5cdFx0cmV0dXJuIHBhdGg7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua0J1dHRvbkNsaWNrKCkge1xuXHRcdHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKTtcblx0XHRpZiAoZDMuc2VsZWN0KHNoYXJlUG9wdXApLmNsYXNzZWQoXCJhY3RpdmVcIikpIHtcblx0XHRcdGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2soKSB7XG5cdFx0dmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApO1xuXHRcdGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua1VybENsaWNrKCkge1xuXHRcdHNlbGVjdENvcHlMaW5rVXJsKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKSB7XG5cdFx0c2hhcmVQb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuXHRcdHNlbGVjdENvcHlMaW5rVXJsKCk7XG5cdFxuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybFxuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcblx0XHRcdGV2ZW50QWN0aW9uOiAnb3BlbicsXG5cdFx0XHRldmVudExhYmVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLFxuXHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCkge1xuXHRcblx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBzaGFyZSB1cmwgY2xvc2Vcblx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG5cdFx0XHRldmVudEFjdGlvbjogJ2Nsb3NlJyxcblx0XHRcdGV2ZW50TGFiZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblx0XG5cdFx0c2hhcmVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZWxlY3RDb3B5TGlua1VybCgpIHtcblx0XHR2YXIgc2hhcmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIik7XG5cdFx0c2hhcmVJbnB1dC5mb2N1cygpO1xuXHRcdHNoYXJlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgc2hhcmVJbnB1dC52YWx1ZS5sZW5ndGgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTb2NpYWxVcmxzKCkge1xuXHRcdHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cdFx0dmFyIHNvY2lhbExpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLXNvY2lhbFwiKTtcblx0XHR2YXIgc29jaWFsTGluaztcblx0XHR2YXIgbmV3VXJsO1xuXHRcdHZhciBpLCBsO1xuXHRcblx0XHRmb3IgKGkgPSAwLCBsID0gc29jaWFsTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRzb2NpYWxMaW5rID0gc29jaWFsTGlua3NbaV07XG5cdFxuXHRcdFx0bmV3VXJsID0gc29jaWFsTGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhc2V1cmxcIikgKyB1cmw7XG5cdFx0XHRzb2NpYWxMaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbmV3VXJsKTtcblx0XG5cdFx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBmb3Igc29jaWFsIHVybHNcblx0XHRcdHNvY2lhbExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHRcdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0XHRldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHRcdFx0XHRcdGV2ZW50QWN0aW9uOiB0aGlzLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiksXG5cdFx0XHRcdFx0ZXZlbnRMYWJlbDogdGhpcy5ocmVmLFxuXHRcdFx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyhtYXApIHtcblx0XHR2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuXHRcdHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVN0cmluZyhtYXApIHtcblx0XHRyZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nKG1hcCkge1xuXHRcdHZhciBsYXllcnMgPSBbXTtcblx0XHR2YXIgb3BhY2l0eVZhbHMgPSB7fTtcblx0XHR2YXIgY3VycmVudExheWVycyA9ICgwLCBfbGF5ZXIuR2V0Q3VycmVudExheWVycykoKTtcblx0XG5cdFx0bWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdHZhciBvcHRpb25zID0gbGF5ZXIub3B0aW9ucztcblx0XHRcdGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XG5cdFx0XHRcdG9wYWNpdHlWYWxzW29wdGlvbnMubGF5ZXJzXSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJvcGFjaXR5XCIpID8gb3B0aW9ucy5vcGFjaXR5IDogXCIxXCI7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFxuXHRcdHZhciBjdXJyZW50TGF5ZXI7XG5cdFx0dmFyIGk7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG5cdFx0XHRsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuXHRcdFx0bGF5ZXJzLnB1c2gob3BhY2l0eVZhbHNbY3VycmVudExheWVyXSk7XG5cdFx0fVxuXHRcdHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyhtYXApIHtcblx0XHR2YXIgbGF5ZXJzID0gW107XG5cdFx0bWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMudHlwZSA9PT0gX2Jhc2VsYXllci5CQVNFX0xBWUVSX1RZUEUpIHtcblx0XHRcdFx0bGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzU3RyaW5nKCkge1xuXHRcdHZhciBhY3RpdmVMYXllckdyb3VwcyA9ICgwLCBfcGFuZWwuR2V0QWN0aXZlTGF5ZXJHcm91cHMpKCk7XG5cdFx0cmV0dXJuIFwibGF5ZXJHcm91cHM9XCIgKyBhY3RpdmVMYXllckdyb3Vwcy5tYXAoZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiBkLmlkO1xuXHRcdH0pLmpvaW4oJywnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSB7XG5cdFx0dmFyIHBvaXMgPSAoMCwgX3BvaS5HZXRBbGxQb2ludHNPZkludGVyZXN0KSgpO1xuXHRcdGlmICghcG9pcy5sZW5ndGgpIHJldHVybjtcblx0XHR2YXIgcG9pU3RyaW5nID0gXCJwb2lzPVwiO1xuXHRcdHBvaXMuZm9yRWFjaChmdW5jdGlvbiAocG9pKSB7XG5cdFx0XHRwb2lTdHJpbmcgKz0gcG9pLmxhdCArICcsJyArIHBvaS5sbmc7XG5cdFx0XHRpZiAocG9pLnBsb3RzICYmIHBvaS5wbG90cy5sZW5ndGgpIHtcblx0XHRcdFx0cG9pU3RyaW5nICs9ICcsJyArIHBvaS5wbG90cy5qb2luKCcsJyk7XG5cdFx0XHR9XG5cdFx0XHRwb2lTdHJpbmcgKz0gJzsnO1xuXHRcdH0pO1xuXHRcdHJldHVybiBwb2lTdHJpbmc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSB7XG5cdFx0cmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKCkge1xuXHRcdHJldHVybiBcImdyYXBoPVwiICsgZDMuc2VsZWN0KFwiLmdyYXBoLXR5cGUtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS10eXBlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVNoYXJlVXJsKCkge1xuXHRcdHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuXHRcdGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcblx0XG5cdFx0cGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcblx0XHRwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblx0XG5cdFx0Zm9ybWF0UGFyYW1zKHBhcmFtcyk7XG5cdFx0cmV0dXJuIHBhcmFtcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKSB7XG5cdFx0cGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcblx0XHRwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XG5cdFx0cmV0dXJuIHBhcmFtcy5zcGxpdChcIiZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hbmdsZVBhcmFtU3RyaW5nKHVybCkge1xuXHRcdHJldHVybiB1cmwucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpLnJlcGxhY2UoL1xcOy9nLCBcIiUzQlwiKS5yZXBsYWNlKC9cXC8vZywgXCIlMkZcIikucmVwbGFjZSgvXFwsL2csIFwiJTJDXCIpLnJlcGxhY2UoL1xcJi9nLCBcIiUyNlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0XHRyZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIikucmVwbGFjZSgvXFwlM1tifEJdL2csIFwiO1wiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtc0Fycikge1xuXHRcdHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcblx0XHR2YXIgcGFyYW1QYWlyO1xuXHRcdHZhciBpO1xuXHRcblx0XHRmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuXHRcdFx0cGFyc2VkUGFyYW1zW3BhcmFtUGFpclswXV0gPSBwYXJhbVBhaXJbMV07XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gcGFyc2VkUGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQYXJhbXMocGFyYW1zKSB7XG5cdFx0aWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcblx0XHRpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG5cdFx0aWYgKHBhcmFtcy5iYXNlbGF5ZXJzKSBwYXJhbXMuYmFzZWxheWVycyA9IGZvcm1hdEJhc2VMYXllclBhcmFtKHBhcmFtcy5iYXNlbGF5ZXJzKTtcblx0XHRpZiAocGFyYW1zLnBvaXMpIHBhcmFtcy5wb2lzID0gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBhcmFtcy5wb2lzKTtcblx0XHRpZiAocGFyYW1zLmxheWVyR3JvdXBzKSBwYXJhbXMubGF5ZXJHcm91cHMgPSBmb3JtYXRMYXllckdyb3Vwc1BhcmFtKHBhcmFtcy5sYXllckdyb3Vwcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtKGNlbnRlcikge1xuXHRcdHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtKGxheWVycykge1xuXHRcdHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XG5cdFx0XHRcImVuYWJsZWRMYXllcnNcIjogW10sXG5cdFx0XHRcIm9wYWNpdHlWYWxzXCI6IHt9XG5cdFx0fTtcblx0XHR2YXIgbGF5ZXJJZDtcblx0XHR2YXIgaTtcblx0XG5cdFx0bGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XG5cdFx0XHRsYXllcklkID0gbGF5ZXJzW2ldO1xuXHRcdFx0Zm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcblx0XHRcdGZvcm1hdHRlZExheWVycy5vcGFjaXR5VmFsc1tsYXllcklkXSA9IGxheWVyc1tpICsgMV07XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbShiYXNlbGF5ZXJzKSB7XG5cdFx0cmV0dXJuIGJhc2VsYXllcnMuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocG9pcykge1xuXHRcdHJldHVybiBwb2lzLnNwbGl0KCc7JykuZmlsdGVyKGZ1bmN0aW9uIChzdHIpIHtcblx0XHRcdHJldHVybiBzdHIgIT09ICcnO1xuXHRcdH0pLm1hcChmdW5jdGlvbiAocG9pKSB7XG5cdFx0XHRwb2kgPSBwb2kuc3BsaXQoJywnKTtcblx0XHRcdGlmIChwb2kubGVuZ3RoID4gMikge1xuXHRcdFx0XHRyZXR1cm4gKDAsIF9wb2kuY3JlYXRlUE9JKShwb2lbMF0sIHBvaVsxXSwgcG9pLnNwbGljZSgyKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gKDAsIF9wb2kuY3JlYXRlUE9JKShwb2lbMF0sIHBvaVsxXSwgbnVsbCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVyR3JvdXBzUGFyYW0obGF5ZXJHcm91cFNldHRpbmdzKSB7XG5cdFx0cmV0dXJuIGxheWVyR3JvdXBTZXR0aW5ncy5zcGxpdCgnLCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhhY3RpdmVMYXllckdyb3VwSWRzLCBjb25maWcpIHtcblx0XHRjb25maWcubGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdFx0XHQvLyBzZXQgbGF5ZXIgZ3JvdXAgdG8gYWN0aXZlIGlmIGl0cyBpZCBhcHBlYXJzIGluIHRoZSBzaGFyZSB1cmwgc2V0dGluZ3Ncblx0XHRcdGxheWVyR3JvdXAuYWN0aXZlID0gYWN0aXZlTGF5ZXJHcm91cElkcy5maWx0ZXIoZnVuY3Rpb24gKGlkKSB7XG5cdFx0XHRcdHJldHVybiBpZCA9PT0gbGF5ZXJHcm91cC5pZDtcblx0XHRcdH0pLmxlbmd0aCA+IDA7XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHRcdHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XG5cdFx0Y29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XG5cdFxuXHRcdHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHRcdHZhciBlbmFibGVkTGF5ZXI7XG5cdFx0dmFyIGZvdW5kTGF5ZXI7XG5cdFx0dmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cdFxuXHRcdGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRmb3VuZExheWVyID0gZmFsc2U7XG5cdFx0XHRlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xuXHRcdFx0Zm9yIChwcm9wIGluIGxheWVycykge1xuXHRcdFx0XHRpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHRcdFx0XHRsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcblx0XHRcdFx0XHRcdGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuXHRcdFx0XHRcdFx0Zm91bmRMYXllciA9IHRydWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0XHR2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xuXHRcdHZhciBiYXNlbGF5ZXI7XG5cdFx0dmFyIGk7XG5cdFxuXHRcdGZvciAoaSA9IDA7IGkgPCBiYXNlbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuXHRcdFx0YmFzZWxheWVyLmFjdGl2ZSA9IHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSA/IHRydWUgOiBmYWxzZTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhwb2lzLCBjb25maWcpIHtcblx0XHRjb25maWdbXCJwb2lzXCJdID0gcG9pcztcblx0fVxuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CQVNFX0xBWUVSX1RZUEUgPSB1bmRlZmluZWQ7XG5cdGV4cG9ydHMuQ3JlYXRlQmFzZUxheWVycyA9IENyZWF0ZUJhc2VMYXllcnM7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIEJBU0VfTEFZRVJfVFlQRSA9IGV4cG9ydHMuQkFTRV9MQVlFUl9UWVBFID0gXCJiYXNlbGF5ZXJcIjtcblx0XG5cdHZhciBfYmFzZWxheWVycztcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZUJhc2VMYXllcnMobWFwLCBsYXllckNvbmZpZykge1xuXHRcdGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgW3tcblx0XHRcdFwiaWRcIjogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXG5cdFx0XHRcInVybFwiOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcblx0XHRcdFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHRcdH1dO1xuXHRcblx0XHRfYmFzZWxheWVycyA9IGxheWVyQ29uZmlnO1xuXHRcdHZhciBpO1xuXHRcdHZhciBiYXNlTGF5ZXI7XG5cdFx0dmFyIGNvbmZpZztcblx0XG5cdFx0Zm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25maWcgPSBsYXllckNvbmZpZ1tpXTtcblx0XG5cdFx0XHRpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuXHRcdFx0YmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XG5cdFx0XHRjb25maWcubGF5ZXIgPSBiYXNlTGF5ZXI7XG5cdFx0XHRiYXNlTGF5ZXIuYWRkVG8obWFwKTtcblx0XHR9XG5cdFxuXHRcdGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkoY29uZmlnKSB7XG5cdFx0dmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0YmFzZVVJLmNsYXNzTmFtZSA9IFwiYmFzZWxheWVyLXVpXCI7XG5cdFx0dmFyIGJhc2VXcmFwcGVyO1xuXHRcdHZhciBiYXNlSW1nO1xuXHRcdHZhciBiYXNlTGFiZWw7XG5cdFxuXHRcdHZhciBsYXllcjtcblx0XHRmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdGxheWVyID0gY29uZmlnW2ldO1xuXHRcdFx0aWYgKCFsYXllci5oYXNPd25Qcm9wZXJ0eShcImltYWdlXCIpKSBjb250aW51ZTtcblx0XG5cdFx0XHRiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0XHRiYXNlV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIsIGxheWVyLmlkKTtcblx0XHRcdGJhc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHRcdFx0YmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuXHRcdFx0YmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbGF5ZXIubGFiZWwpO1xuXHRcdFx0YmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsYXllci5sYWJlbCk7XG5cdFx0XHRiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0YmFzZUxhYmVsLnRleHRDb250ZW50ID0gbGF5ZXIubGFiZWw7XG5cdFx0XHRiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlSW1nKTtcblx0XHRcdGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG5cdFx0XHRiYXNlV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmFzZUNsaWNrKTtcblx0XG5cdFx0XHRkMy5zZWxlY3QoYmFzZVdyYXBwZXIpLmNsYXNzZWQoXCJiYXNlLXNlbGVjdG9yXCIsIHRydWUpLmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcblx0XG5cdFx0XHRiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuXHRcdH1cblx0XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2soZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0dmFyIGxheWVyaWQgPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIik7XG5cdFx0dG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuXHRcdHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcblx0XHRhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKTtcblx0XG5cdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNoYW5nZWluZyBiYXNlIGxheWVyXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnbWFwJyxcblx0XHRcdGV2ZW50QWN0aW9uOiAnY2hhbmdlIGJhc2UgbGF5ZXInLFxuXHRcdFx0ZXZlbnRMYWJlbDogbGF5ZXJpZCxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXHRcblx0XHQoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkoYmFzZVVJRWxlbSkge1xuXHRcdGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcblx0XHRkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpIHtcblx0XHR2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0XHRtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHRcdFx0aWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG5cdFx0XHRtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKSB7XG5cdFx0dmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdFx0dmFyIGxheWVyO1xuXHRcdGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRsYXllciA9IF9iYXNlbGF5ZXJzW2ldO1xuXHRcdFx0aWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcblx0XHRcdGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcblx0XHRcdGxheWVyLmxheWVyLmFkZFRvKG1hcCk7XG5cdFx0XHRsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXIobGF5ZXJDb25maWcpIHtcblx0XHRyZXR1cm4gTC50aWxlTGF5ZXIobGF5ZXJDb25maWcudXJsLCBtYWtlQmFzZUxheWVyT3B0aW9ucyhsYXllckNvbmZpZykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQmFzZUxheWVyT3B0aW9ucyhjb25maWcpIHtcblx0XHR2YXIgb3B0aW9ucyA9IHt9O1xuXHRcdGlmIChjb25maWcuaWQpIG9wdGlvbnMuaWQgPSBjb25maWcuaWQ7XG5cdFx0aWYgKGNvbmZpZy5hdHRyaWJ1dGlvbikgb3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGNvbmZpZy5hdHRyaWJ1dGlvbjtcblx0XHRpZiAoY29uZmlnLnN1YmRvbWFpbnMpIG9wdGlvbnMuc3ViZG9tYWlucyA9IGNvbmZpZy5zdWJkb21haW5zO1xuXHRcdG9wdGlvbnMudHlwZSA9IEJBU0VfTEFZRVJfVFlQRTtcblx0XG5cdFx0cmV0dXJuIG9wdGlvbnM7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmNyZWF0ZU1hcmtlciA9IGNyZWF0ZU1hcmtlcjtcblx0ZXhwb3J0cy5nZXRJY29uID0gZ2V0SWNvbjtcblx0ZnVuY3Rpb24gY3JlYXRlTWFya2VyKGxhdCwgbG5nKSB7XG5cdFx0cmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHsgaWNvbjogZ3JhcGhJY29uIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRJY29uKHR5cGUpIHtcblx0XHRyZXR1cm4gdHlwZSA9PT0gJ2hvdmVyJyA/IGhvdmVySWNvbiA6IGdyYXBoSWNvbjtcblx0fVxuXHRcblx0dmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XG5cdFxuXHR2YXIgZ3JhcGhJY29uID0gbmV3IGJhc2VJY29uKHtcblx0XHRpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcblx0XHRzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0XHRpY29uU2l6ZTogWzI1LCA0MV0sXG5cdFx0aWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdFx0cG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHRcdHNoYWRvd1NpemU6IFs0MSwgNDFdXG5cdH0pO1xuXHRcblx0dmFyIGhvdmVySWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdFx0aWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcblx0XHRzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0XHRpY29uU2l6ZTogWzI1LCA0MV0sXG5cdFx0aWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdFx0cG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHRcdHNoYWRvd1NpemU6IFs0MSwgNDFdXG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CaW5kVGFiRXZlbnRzID0gQmluZFRhYkV2ZW50cztcblx0ZXhwb3J0cy5HZXRBY3RpdmVUYWIgPSBHZXRBY3RpdmVUYWI7XG5cdGV4cG9ydHMuSGFuZGxlVGFiQ2hhbmdlID0gSGFuZGxlVGFiQ2hhbmdlO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFRhYkV2ZW50cygpIHtcblx0XHRkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0QWN0aXZlVGFiKCkge1xuXHRcdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFuZWwtdG9wLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKCkge1xuXHRcdC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXG5cdFx0aWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSByZXR1cm47XG5cdFxuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcblx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdGV2ZW50Q2F0ZWdvcnk6ICd0YWInLFxuXHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0XHRldmVudExhYmVsOiB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpLFxuXHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0fSk7XG5cdFxuXHRcdEhhbmRsZVRhYkNoYW5nZSh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSGFuZGxlVGFiQ2hhbmdlKG5ld0NsYXNzKSB7XG5cdFx0ZGlzYWJsZUFjdGl2ZVRhYigpO1xuXHRcdGVuYWJsZVRhYihuZXdDbGFzcyk7XG5cdFx0KDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlVGFiKG5ld0NsYXNzKSB7XG5cdFx0ZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG5bZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdFxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuY2xhc3NMaXN0LmFkZChuZXdDbGFzcyk7XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKTtcblx0XG5cdFx0ZDMuc2VsZWN0KFwiLnBhbmVsLXNlY3Rpb24td3JhcHBlcltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0XG5cdFx0dG9nZ2xlTWFwUGFkZGluZygpO1xuXHRcdHJlc2V0UGFuZWxXaWR0aCgpO1xuXHRcdCgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZVRhYigpIHtcblx0XHR2YXIgYWN0aXZlQ2xhc3MgPSBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xuXHRcblx0XHRkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJykuY2xhc3NlZChhY3RpdmVDbGFzcywgZmFsc2UpO1xuXHRcblx0XHRkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKS5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcoKSB7XG5cdFx0dmFyIHBhZGRpbmdSaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikub2Zmc2V0V2lkdGg7XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nUmlnaHQgKyBcInB4XCI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW5jZSB0aGUgcGFuZWwgaGFzIGNoaWxkIGVsZW1lbnRzIHdpdGggcG9zaXRpb24gZml4ZWQgYW5kIHdpZHRoIGluaGVyaXRcblx0ICogd2UgbmVlZCB0byBjbGVhciB0aGUgaW5saW5lIHdpZHRoIHByb3BlcnR5IGlmIGFuZCBvbmx5IGlmIHRoZSBpbmxpbmVcblx0ICogd2lkdGggaXMgbGVzcyB0aGFuIHRoZSBtaW4gd2lkdGhcblx0ICovXG5cdGZ1bmN0aW9uIHJlc2V0UGFuZWxXaWR0aCgpIHtcblx0XHR2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpO1xuXHRcdHZhciB3aWR0aCA9IHBhbmVsLnN0eWxlLndpZHRoO1xuXHRcdGlmICghd2lkdGgpIHJldHVybjtcblx0XG5cdFx0dmFyIHBhbmVsTWluV2lkdGggPSBkMy5zZWxlY3QocGFuZWwpLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdFx0aWYgKHBhcnNlSW50KHdpZHRoLnNsaWNlKDAsIC0yKSwgMTApID4gcGFyc2VJbnQocGFuZWxNaW5XaWR0aCwgMTApKSByZXR1cm47XG5cdFxuXHRcdHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDMxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uID0gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uO1xuXHRleHBvcnRzLm1ha2VPcGFjaXR5U2xpZGVyID0gbWFrZU9wYWNpdHlTbGlkZXI7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHQvLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xuXHR2YXIgT1BBQ0lUWV9SQU5HRV9NQVggPSA5MDtcblx0XG5cdHZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMSwgMF0pLnJhbmdlKFswLCBPUEFDSVRZX1JBTkdFX01BWF0pLmNsYW1wKHRydWUpO1xuXHRcblx0ZnVuY3Rpb24gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIG9wYWNpdHkpIHtcblx0XHRvcGFjaXR5ID0gb3BhY2l0eSB8fCBsYXllci5vcGFjaXR5O1xuXHRcdHNsaWRlckhhbmRsZS5zdHlsZS50b3AgPSAnJyArIG9wYWNpdHlTY2FsZShvcGFjaXR5KSArICdweCc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyKSB7XG5cdFx0dmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxO1xuXHRcdHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dmFyIHNsaWRlclRyYWNrT3ZlcmxheSA9IG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KTtcblx0XHR2YXIgaWNvbldyYXBwZXJDbG9zZWQgPSBtYWtlT3BhY2l0eUljb25XcmFwcGVyKCdjbG9zZWQnLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KTtcblx0XG5cdFx0d3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci13cmFwcGVyJyk7XG5cdFx0d3JhcHBlci5hcHBlbmRDaGlsZChzbGlkZXJUcmFja092ZXJsYXkpO1xuXHRcdHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbldyYXBwZXJDbG9zZWQpO1xuXHRcdHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eUljb25XcmFwcGVyKHN0YXRlLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KSB7XG5cdFx0dmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHR2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uLXdyYXBwZXInKTtcblx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktaWNvbicpO1xuXHRcdGljb24uY2xhc3NMaXN0LmFkZChzdGF0ZSk7XG5cdFx0aWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWdzL29wYWNpdHktaWNvbi0nICsgc3RhdGUgKyAnLTY0eDY0LnBuZycpO1xuXHRcdGljb24uc2V0QXR0cmlidXRlKCdhbHQnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKTtcblx0XHRpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKTtcblx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKGljb24pO1xuXHRcdHdyYXBwZXIub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHR2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHRcdFx0KDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCAwKTtcblx0XHRcdHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCAwKTtcblx0XHR9O1xuXHRcdHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcblx0XHR2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHZhciB0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHZhciBzbGlkZXJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdFx0b3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5Jyk7XG5cdFx0dHJhY2suY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2snKTtcblx0XHRzbGlkZXJIYW5kbGUuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJyk7XG5cdFxuXHRcdG92ZXJsYXkuYXBwZW5kQ2hpbGQodHJhY2spO1xuXHRcdG92ZXJsYXkuYXBwZW5kQ2hpbGQoc2xpZGVySGFuZGxlKTtcblx0XG5cdFx0aWYgKGxheWVyLmFjdGl2ZSkgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUpO1xuXHRcdHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpO1xuXHRcblx0XHRyZXR1cm4gb3ZlcmxheTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcdGQzLnNlbGVjdChvdmVybGF5KS5jYWxsKGQzLmRyYWcoKS5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBzbGlkZXJIYW5kbGUgPSBvdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHRcdFx0dmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KTtcblx0XHRcdCgwLCBfbGF5ZXIudXBkYXRlTGF5ZXJPcGFjaXR5KShsYXllciwgbmV3T3BhY2l0eSk7XG5cdFx0XHRzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgbmV3T3BhY2l0eSk7XG5cdFx0fSkub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblx0XG5cdFx0XHR2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpO1xuXHRcblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIG9wYWNpdHkgc2xpZGVyIGNoYW5nZVxuXHRcdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRcdGV2ZW50Q2F0ZWdvcnk6ICdvcGFjaXR5IHNsaWRlcicsXG5cdFx0XHRcdGV2ZW50QWN0aW9uOiAnY2hhbmdlJyxcblx0XHRcdFx0ZXZlbnRMYWJlbDogJ3tcIicgKyBsYXllci5uYW1lICsgJ1wiOiBcIicgKyBuZXdPcGFjaXR5ICsgJ1wifScsXG5cdFx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdFx0fSk7XG5cdFxuXHRcdFx0KDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0XHR9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcblx0XHR2YXIgeVBvcyA9IGQzLm1vdXNlKG92ZXJsYXkpWzFdO1xuXHRcdHZhciBuZXdPcGFjaXR5ID0gb3BhY2l0eVNjYWxlLmludmVydCh5UG9zKTtcblx0XHRyZXR1cm4gbmV3T3BhY2l0eTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ3JlYXRlTG9nbztcblx0Lypcblx0ICBcImxvZ29cIjoge1xuXHRcdFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXG5cdFx0XCJhbHRcIjogXCJMb2dvIGZvciB0aGUgTGFuRGF0IHByb2plY3RcIixcblx0XHRcImxpbmtcIjogXCJodHRwczovL2xhbmRhdC1kZXYubmVtYWMub3JnXCIsXG5cdFx0XCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxuXHQgIH0sXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVMb2dvKGxvZ29kYXRhKSB7XG5cdFx0aWYgKCFsb2dvZGF0YS5pbWFnZSkgcmV0dXJuO1xuXHRcblx0XHR2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xuXHRcdHZhciBsb2dvSW1hZ2UgPSBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpO1xuXHRcdHZhciBsb2dvTGluayA9IGxvZ29kYXRhLmxpbmsgPyBjcmVhdGVMb2dvTGluayhsb2dvZGF0YS5saW5rKSA6IG51bGw7XG5cdFxuXHRcdGlmIChsb2dvTGluaykge1xuXHRcdFx0bG9nb0xpbmsuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcblx0XHRcdGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcblx0XHR9XG5cdFxuXHRcdHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XG5cdFx0dmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG5cdFx0aW5zZXJ0RWxlbWVudC5pbnNlcnRCZWZvcmUobG9nb1dyYXBwZXIsIGV4aXN0aW5nQ2hpbGQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvV3JhcHBlcigpIHtcblx0XHR2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGQzLnNlbGVjdChsb2dvV3JhcHBlcikuY2xhc3NlZChcInByb2plY3QtbG9nb1wiLCB0cnVlKTtcblx0XHRyZXR1cm4gbG9nb1dyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSkge1xuXHRcdHZhciBsb2dvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHRcdGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xuXHRcdGlmIChsb2dvZGF0YS5sYWJlbCkge1xuXHRcdFx0bG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XG5cdFx0XHRsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbG9nb2RhdGEubGFiZWwpO1xuXHRcdH1cblx0XHRyZXR1cm4gbG9nb0ltYWdlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvTGluayhsaW5rKSB7XG5cdFx0dmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG5cdFx0bG9nb0xpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBsaW5rKTtcblx0XHRsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG5cdFxuXHRcdGxvZ29MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjbGlja2luZyBsb2dvXG5cdFx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRcdGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHRcdFx0XHRldmVudExhYmVsOiAnbGFuZGF0IGxvZ28nLFxuXHRcdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcblx0XHRyZXR1cm4gbG9nb0xpbms7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAzMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJpbmRNb2JpbGVNZW51RXZlbnRzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRNb2JpbGVNZW51RXZlbnRzKCkge1xuXHRcdGQzLnNlbGVjdChcIiNtb2JpbGUtdG9nZ2xlLXBhbmVsLWJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGhhbmRsZU1vYmlsZVRvZ2dsZVBhbmVsQnRuQ2xpY2spO1xuXHRcdGQzLnNlbGVjdEFsbChcIiNtb2JpbGUtY2xlYXItbWFwLWJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGhhbmRsZU1vYmlsZUNsZWFyTWFwQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNb2JpbGVDbGVhck1hcEJ0bkNsaWNrKCkge1xuXHRcdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdCgwLCBfbWFwLmNsZWFyTWFwKSgpO1xuXHRcdGRpc3BhdGNoTW9iaWxlQ2xlYXJNYXBCdG5DbGlja0FuYWx5dGljcygpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNb2JpbGVUb2dnbGVQYW5lbEJ0bkNsaWNrKCkge1xuXHRcdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KFwiI3dyYXBwZXJcIik7XG5cdFx0dmFyIHN0YXR1cyA9IHdyYXBwZXIuY2xhc3NlZChcIm1vYmlsZS1tZW51LWhpZGRlblwiKTtcblx0XHR3cmFwcGVyLmNsYXNzZWQoXCJtb2JpbGUtbWVudS1oaWRkZW5cIiwgIXN0YXR1cyk7XG5cdFx0ZGlzcGF0Y2hNb2JpbGVUb2dnbGVQYW5lbEJ0bkNsaWNrQW5hbHl0aWNzKCFzdGF0dXMgPyBcIm9wZW5pbmdcIiA6IFwiY2xvc2luZ1wiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzcGF0Y2hNb2JpbGVDbGVhck1hcEJ0bkNsaWNrQW5hbHl0aWNzKCkge1xuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21vYmlsZSBjbGVhcm1hcCcsXG5cdFx0XHRldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHRcdGV2ZW50TGFiZWw6ICdNb2JpbGUgQ2xlYXIgTWFwJyxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNwYXRjaE1vYmlsZVRvZ2dsZVBhbmVsQnRuQ2xpY2tBbmFseXRpY3Moc3RhdHVzKSB7XG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnbW9iaWxlIG1lbnUnLFxuXHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0XHRldmVudExhYmVsOiAnTW9iaWxlIFBhbmVsIFRvZ2dsZScgKyBzdGF0dXMsXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDM0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQmluZERlc2t0b3BNZW51RXZlbnRzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdGZ1bmN0aW9uIEJpbmREZXNrdG9wTWVudUV2ZW50cygpIHtcblx0XHRkMy5zZWxlY3QoXCIjdG9nZ2xlLXBhbmVsLWJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGhhbmRsZURlc2t0b3BUb2dnbGVQYW5lbEJ0bkNsaWNrKTtcblx0XHRkMy5zZWxlY3RBbGwoXCIjY2xlYXItbWFwLWJ1dHRvblwiKS5vbihcImNsaWNrXCIsIGhhbmRsZURlc2t0b3BDbGVhck1hcEJ0bkNsaWNrKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlRGVza3RvcENsZWFyTWFwQnRuQ2xpY2soZSkge1xuXHRcdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdCgwLCBfbWFwLmNsZWFyTWFwKSgpO1xuXHRcdC8vIFF1aWNrIGFuZCBkaXJ0eSBzb2x1dGlvbiAtLSBjcmVhdGVzIGEgbmV3IHNlc3Npb24gZm9yIGdvb2dsZSBhbmFseXRpY3M/XG5cdFx0Ly92YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVswXVxuXHRcdC8vd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxcblx0XHRkaXNwYXRjaERlc2t0b3BDbGVhck1hcEJ0bkNsaWNrQW5hbHl0aWNzKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZURlc2t0b3BUb2dnbGVQYW5lbEJ0bkNsaWNrKGUpIHtcblx0XHRkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChcIiN3cmFwcGVyXCIpO1xuXHRcdHZhciBzdGF0dXMgPSB3cmFwcGVyLmNsYXNzZWQoXCJwYW5lbC1hY3RpdmVcIik7XG5cdFx0d3JhcHBlci5jbGFzc2VkKFwicGFuZWwtYWN0aXZlXCIsICFzdGF0dXMpO1xuXHRcdHdyYXBwZXIuY2xhc3NlZChcInBhbmVsLWluYWN0aXZlXCIsIHN0YXR1cyk7XG5cdFx0KDAsIF9tYXAuR2V0TWFwKSgpLmludmFsaWRhdGVTaXplKHsgcGFuOiBmYWxzZSB9KTtcblx0XHRkaXNwYXRjaERlc2t0b3BUb2dnbGVQYW5lbEJ0bkNsaWNrQW5hbHl0aWNzKCFzdGF0dXMgPyBcIk9wZW5cIiA6IFwiQ2xvc2VcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc3BhdGNoRGVza3RvcENsZWFyTWFwQnRuQ2xpY2tBbmFseXRpY3MoKSB7XG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnZGVza3RvcCcsXG5cdFx0XHRldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHRcdGV2ZW50TGFiZWw6ICdDbGVhciBNYXAgQnRuJyxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNwYXRjaERlc2t0b3BUb2dnbGVQYW5lbEJ0bkNsaWNrQW5hbHl0aWNzKHN0YXR1cykge1xuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ2Rlc2t0b3AnLFxuXHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0XHRldmVudExhYmVsOiAnUGFuZWwgVG9nZ2xlICcgKyBzdGF0dXMsXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleF9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAyMzY5NDUwMzlmYmYzNjg2OWQ2NiIsImltcG9ydCB7UGFyc2VDb25maWd9IGZyb20gJy4vcGFyc2VyJztcbmltcG9ydCBDcmVhdGVTZWFyY2ggZnJvbSAnLi9zZWFyY2gnO1xuaW1wb3J0IHtTZXR1cFBhbmVsfSBmcm9tICcuL3BhbmVsJztcbmltcG9ydCB7Q3JlYXRlQmFzZUxheWVyc30gZnJvbSAnLi9iYXNlbGF5ZXInO1xuaW1wb3J0IHtTZXR1cEdyYXBocywgSGFuZGxlR3JhcGhUYWJDaGFuZ2V9IGZyb20gJy4vZ3JhcGgnXG5pbXBvcnQge0JpbmRHcmFwaEV2ZW50c30gZnJvbSAnLi9wb2knO1xuaW1wb3J0IHtCaW5kVGFiRXZlbnRzLCBIYW5kbGVUYWJDaGFuZ2V9IGZyb20gJy4vdGFicydcbmltcG9ydCB7Q3JlYXRlTWFwfSBmcm9tICcuL21hcCdcbmltcG9ydCB7QmluZFVwZGF0ZVNoYXJlVXJsLCBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcsIEJpbmRDb3B5TGlua0V2ZW50c30gZnJvbSAnLi9zaGFyZSdcbmltcG9ydCB7Q3JlYXRlRGVmYXVsdExheWVyc30gZnJvbSAnLi9sYXllcidcbmltcG9ydCBDcmVhdGVMb2dvIGZyb20gJy4vbG9nbyc7XG5pbXBvcnQge1NldHVwUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knO1xuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSc7XG5pbXBvcnQgQmluZE1vYmlsZU1lbnVFdmVudHMgZnJvbSAnLi9tb2JpbGUnO1xuaW1wb3J0IEJpbmREZXNrdG9wTWVudUV2ZW50cyBmcm9tICcuL3BhbmVsVG9nZ2xlJztcblxudmFyIGNzcyA9IHJlcXVpcmUoJy4uL2Nzcy9zYXNzL2xhbmRhdC5zY3NzJylcblxuLy8gRG9lcyBub3QgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXG52YXIgQmFzZSA9IGZ1bmN0aW9uIChjb25maWcpIHtcblx0UGFyc2VDb25maWcoY29uZmlnLCBjYWxsYmFjayk7XG5cdFNldHVwR3JhcGhzKCk7XG5cdEJpbmRUYWJFdmVudHMoKTtcblx0QmluZENvcHlMaW5rRXZlbnRzKCk7XG5cdEJpbmRNb2JpbGVNZW51RXZlbnRzKCk7XG5cdEJpbmREZXNrdG9wTWVudUV2ZW50cygpO1xufVxuXG4vLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxudmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0QWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGRhdGEpXG5cdHZhciBtYXAgPSBDcmVhdGVNYXAoZGF0YS5tYXApO1xuXHRDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcblx0Q3JlYXRlRGVmYXVsdExheWVycyhkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuXHRTZXR1cFBhbmVsKGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XG5cdENyZWF0ZVNlYXJjaChtYXApO1xuXHRDcmVhdGVMb2dvKGRhdGEubG9nbyk7XG5cdGlmIChkYXRhLnRhYikgSGFuZGxlVGFiQ2hhbmdlKGRhdGEudGFiKTtcblx0aWYgKGRhdGEuZ3JhcGgpIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKGRhdGEuZ3JhcGgpO1xuXHRCaW5kR3JhcGhFdmVudHMobWFwKTtcblx0QmluZFVwZGF0ZVNoYXJlVXJsKG1hcCk7XG5cdFNldHVwUG9pbnRzT2ZJbnRlcmVzdChtYXAsIGRhdGEucG9pcylcblx0dXBkYXRlU2hhcmVVcmwoKVxufVxuXG53aW5kb3cuQmFzZSA9IEJhc2U7XG5cbmV4cG9ydCBkZWZhdWx0IHtCYXNlfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2UuanMiLCIvKipcbiAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcbiAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXG4gKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG4gKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBhcnNlQ29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xuXHRHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWpheE9iamVjdChyZXNwb25zZUhhbmRsZXIpIHtcblx0dmFyIHhtbGh0dHBcblx0aWYgKCF3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgd2luZG93LkFjdGl2ZVhPYmplY3QpIHtcblx0XHR4bWxodHRwID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KFwiTVNYTUwyLlhNTEhUVFAuMy4wXCIpXG5cdH0gZWxzZSB7XG5cdFx0eG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cdH1cblx0eG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHRcdFx0cmVzcG9uc2VIYW5kbGVyKHhtbGh0dHAucmVzcG9uc2UpXG5cdFx0fVxuXHR9XG5cdHJldHVybiB4bWxodHRwXG59XG5cbmZ1bmN0aW9uIEdldENvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0dmFyIHhtbGh0dHAgPSBHZXRBamF4T2JqZWN0KGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdHZhciBkYXRhID0gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKVxuXHRcdGNhbGxiYWNrKGRhdGEpXG5cdH0pXG5cdHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0eG1saHR0cC5zZW5kKCk7XG5cdGNvbnNvbGUubG9nKFwiaGlcIilcbn1cblxuZnVuY3Rpb24gcmVzcG9uc2VIYW5kbGVyIChyZXNwb25zZSkge1xuXHRyZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpXG5cdGZvcm1hdE1hcChyZXNwb25zZSk7XG5cdGZvcm1hdExheWVycyhyZXNwb25zZSk7XG5cdHJldHVybiByZXNwb25zZVxufVxuXG5mdW5jdGlvbiBmb3JtYXRNYXAgKGRhdGEpIHtcblx0aWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJzIChkYXRhKSB7XG5cdHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcblx0dmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcblx0dmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG5cdHZhciBsYXllcmdyb3VwO1xuXHR2YXIgaTtcblxuXHRmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuXHRcdGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdFx0bGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xuXHRcdFx0c2V0RGVmYXVsdExheWVyT3BhY2l0eShsYXllcmdyb3VwW2ldLCBkYXRhLmRlZmF1bHRMYXllck9wYWNpdHkpXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRMYXllck9wYWNpdHkgKGxheWVyLCBvcGFjaXR5KSB7XG5cdGxheWVyLm9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IG9wYWNpdHlcbn1cblxuZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsIChsYXllciwgdXJsKSB7XG5cdGxheWVyLnVybCA9IGxheWVyLnVybCB8fCB1cmw7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wYXJzZXIuanMiLCJpbXBvcnQgeyBHZW9TZWFyY2hDb250cm9sLCBPcGVuU3RyZWV0TWFwUHJvdmlkZXIgfSBmcm9tICdsZWFmbGV0LWdlb3NlYXJjaCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZVNlYXJjaCAobWFwKSB7XG5cdGNvbnN0IHByb3ZpZGVyID0gbmV3IE9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xuXG5cdGNvbnN0IHNlYXJjaENvbnRyb2wgPSBuZXcgR2VvU2VhcmNoQ29udHJvbCh7XG5cdFx0cHJvdmlkZXI6IHByb3ZpZGVyLFxuXHRcdHNob3dNYXJrZXI6IGZhbHNlLFxuXHRcdGF1dG9Db21wbGV0ZTogdHJ1ZSxcblx0XHRzaG93UG9wdXA6IGZhbHNlLFxuXHR9KTtcblxuXHRtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblxuXHR2YXIgc2VhcmNoRWxlbWVudHMgPSBzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHNcblxuXHRMLkRvbUV2ZW50Lm9uKHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcblx0XHRMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cblx0XHR2YXIgc2VhcmNoRW50cmllcyA9IHNlYXJjaEVsZW1lbnRzLmZvcm1cblx0XHRcdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZXN1bHRzJylbMF0uY2hpbGRyZW5cblxuXHRcdGZvciAodmFyIGk9MDsgaTxzZWFyY2hFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoZXYudGFyZ2V0ID09PSBzZWFyY2hFbnRyaWVzW2ldKSB7XG5cdFx0XHRcdHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFyY2ggYnkgYWRkcmVzc1xuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRldmVudEFjdGlvbjogJ3NlYXJjaCcsXG5cdFx0XHRldmVudExhYmVsOiAnY2xpY2snLFxuXHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0fSk7XG5cblx0fSk7XG5cblx0TC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXYpIHtcblx0XHRMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cblx0XHRpZiAoZXYud2hpY2ggPT0gMTMgfHwgZXYua2V5Q29kZSA9PSAxMykge1xuXHRcdFx0c2VhcmNoRWxlbWVudHMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG5cblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0XHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0XHRldmVudENhdGVnb3J5OiAnbWFwJyxcblx0XHRcdFx0ZXZlbnRBY3Rpb246ICdzZWFyY2ggYWRkcmVzcycsXG5cdFx0XHRcdGV2ZW50TGFiZWw6IGV2LnRhcmdldC52YWx1ZSxcblx0XHRcdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zZWFyY2guanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbGVhZmxldENvbnRyb2wgPSByZXF1aXJlKCcuL2xlYWZsZXRDb250cm9sJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9zZWFyY2hFbGVtZW50ID0gcmVxdWlyZSgnLi9zZWFyY2hFbGVtZW50Jyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2JpbmdQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2JpbmdQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZXNyaVByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9nb29nbGVQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2dvb2dsZVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL3Byb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cbnZhciBfbG9kYXNoID0gcmVxdWlyZSgnbG9kYXNoLmRlYm91bmNlJyk7XG5cbnZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cbnZhciBfcmVzdWx0TGlzdCA9IHJlcXVpcmUoJy4vcmVzdWx0TGlzdCcpO1xuXG52YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246ICd0b3BsZWZ0JyxcbiAgICBzdHlsZTogJ2J1dHRvbicsXG4gICAgc2hvd01hcmtlcjogdHJ1ZSxcbiAgICBzaG93UG9wdXA6IGZhbHNlLFxuICAgIHBvcHVwRm9ybWF0OiBmdW5jdGlvbiBwb3B1cEZvcm1hdChfcmVmKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gX3JlZi5yZXN1bHQ7XG4gICAgICByZXR1cm4gJycgKyByZXN1bHQubGFiZWw7XG4gICAgfSxcbiAgICBtYXJrZXI6IHtcbiAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgbWF4TWFya2VyczogMSxcbiAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuICAgIGFuaW1hdGVab29tOiB0cnVlLFxuICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG4gICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG4gICAgICByZXNldEJ1dHRvbjogJ3Jlc2V0JyxcbiAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuICAgICAgZm9ybTogJycsXG4gICAgICBpbnB1dDogJydcbiAgICB9LFxuICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcbiAgICBhdXRvQ29tcGxldGVEZWxheTogMjUwLFxuICAgIGF1dG9DbG9zZTogZmFsc2UsXG4gICAga2VlcFJlc3VsdDogZmFsc2VcbiAgfTtcbn07XG5cbnZhciB3YXNIYW5kbGVyRW5hYmxlZCA9IHt9O1xudmFyIG1hcEhhbmRsZXJzID0gWydkcmFnZ2luZycsICd0b3VjaFpvb20nLCAnZG91YmxlQ2xpY2tab29tJywgJ3Njcm9sbFdoZWVsWm9vbScsICdib3hab29tJywgJ2tleWJvYXJkJ107XG5cbnZhciBDb250cm9sID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG4gICAgdGhpcy5oYW5kbGVyc0Rpc2FibGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMoKSwgb3B0aW9ucyk7XG5cbiAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMuc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9vcHRpb25zLnNlYXJjaExhYmVsLFxuICAgICAgICBhdXRvQ29tcGxldGUgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGUsXG4gICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cbiAgICBpZiAoc3R5bGUgIT09ICdidXR0b24nKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcbiAgICB9XG5cbiAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuICAgICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9uU3VibWl0KHF1ZXJ5KTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uY29udGFpbmVyLFxuICAgICAgICBmb3JtID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmZvcm0sXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXG5cbiAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuICAgIGJ1dHRvbi50aXRsZSA9IHNlYXJjaExhYmVsO1xuICAgIGJ1dHRvbi5ocmVmID0gJyMnO1xuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdmFyIHJlc2V0QnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMucmVzZXRCdXR0b24sIGZvcm0pO1xuICAgIHJlc2V0QnV0dG9uLmlubmVySFRNTCA9ICdYJztcbiAgICBidXR0b24uaHJlZiA9ICcjJztcbiAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNsZWFyUmVzdWx0cyhudWxsLCB0cnVlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZjIpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gX3JlZjIucmVzdWx0O1xuXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG4gICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsLCBkYXRhOiByZXN1bHQgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgwLCBfbG9kYXNoMi5kZWZhdWx0KShmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcbiAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSwgdHJ1ZSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG5cbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIF90aGlzLmRpc2FibGVIYW5kbGVycyhlKTtcbiAgICB9LCB0cnVlKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIF90aGlzLnJlc3RvcmVIYW5kbGVycyhlKTtcbiAgICB9LCB0cnVlKTtcblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uLCByZXNldEJ1dHRvbjogcmVzZXRCdXR0b24gfTtcbiAgfSxcbiAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cblxuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIGlmIChzaG93TWFya2VyKSB7XG4gICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG4gICAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXG4gICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXG4gICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICByb290LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcbiAgfSxcbiAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblxuXG4gICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICB0aGlzLmNsZWFyUmVzdWx0cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgfSxcbiAgZGlzYWJsZUhhbmRsZXJzOiBmdW5jdGlvbiBkaXNhYmxlSGFuZGxlcnMoZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuXG4gICAgaWYgKHRoaXMuaGFuZGxlcnNEaXNhYmxlZCB8fCBlICYmIGUudGFyZ2V0ICE9PSBmb3JtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVyc0Rpc2FibGVkID0gdHJ1ZTtcbiAgICBtYXBIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICBpZiAoX3RoaXMyLm1hcFtoYW5kbGVyXSkge1xuICAgICAgICB3YXNIYW5kbGVyRW5hYmxlZFtoYW5kbGVyXSA9IF90aGlzMi5tYXBbaGFuZGxlcl0uZW5hYmxlZCgpO1xuICAgICAgICBfdGhpczIubWFwW2hhbmRsZXJdLmRpc2FibGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgcmVzdG9yZUhhbmRsZXJzOiBmdW5jdGlvbiByZXN0b3JlSGFuZGxlcnMoZSkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuXG4gICAgaWYgKCF0aGlzLmhhbmRsZXJzRGlzYWJsZWQgfHwgZSAmJiBlLnRhcmdldCAhPT0gZm9ybSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlcnNEaXNhYmxlZCA9IGZhbHNlO1xuICAgIG1hcEhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgIGlmICh3YXNIYW5kbGVyRW5hYmxlZFtoYW5kbGVyXSkge1xuICAgICAgICBfdGhpczMubWFwW2hhbmRsZXJdLmVuYWJsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuICAgIGlmICghW19jb25zdGFudHMuRU5URVJfS0VZLCBfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXG5cbiAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcblxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuICAgICAgdmFyIF9pdGVtID0gbGlzdC5zZWxlY3QobGlzdC5zZWxlY3RlZCk7XG4gICAgICB0aGlzLm9uU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlLCBkYXRhOiBfaXRlbSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbWF4ID0gbGlzdC5jb3VudCgpIC0gMTtcbiAgICBpZiAobWF4IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblxuICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcbiAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG4gIH0sXG4gIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG4gICAgdmFyIGZvcmNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgIGlmIChldmVudCAmJiBldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaW5wdXQgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuaW5wdXQ7XG4gICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAga2VlcFJlc3VsdCA9IF9vcHRpb25zMy5rZWVwUmVzdWx0LFxuICAgICAgICBhdXRvQ29tcGxldGUgPSBfb3B0aW9uczMuYXV0b0NvbXBsZXRlO1xuXG5cbiAgICBpZiAoZm9yY2UgfHwgIWtlZXBSZXN1bHQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICB0aGlzLm1hcmtlcnMuY2xlYXJMYXllcnMoKTtcbiAgICB9XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcbiAgICB9XG4gIH0sXG4gIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblxuICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cblxuICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHsgcXVlcnk6IHF1ZXJ5IH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuICAgICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG4gICAgICAgICAgcmV0dXJuICRJZl8xLmNhbGwodGhpcyk7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG4gICAgICAgIHJldHVybiAkSWZfMS5jYWxsKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiAkSWZfMSgpIHtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHByb3ZpZGVyLCByZXN1bHRzO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMykge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMztcblxuICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSwgcXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCwgX3JlZjMpIHtcbiAgICB2YXIgcXVlcnkgPSBfcmVmMy5xdWVyeTtcbiAgICB2YXIgYXV0b0Nsb3NlID0gdGhpcy5vcHRpb25zLmF1dG9DbG9zZTtcblxuXG4gICAgdmFyIG1hcmtlcnMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMuX2xheWVycyk7XG4gICAgaWYgKG1hcmtlcnMubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhNYXJrZXJzKSB7XG4gICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG4gICAgfVxuXG4gICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCwgcXVlcnkpO1xuICAgIHRoaXMuY2VudGVyTWFwKHJlc3VsdCk7XG5cbiAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG4gICAgICBsb2NhdGlvbjogcmVzdWx0LFxuICAgICAgbWFya2VyOiBtYXJrZXJcbiAgICB9KTtcblxuICAgIGlmIChhdXRvQ2xvc2UpIHtcbiAgICAgIHRoaXMuY2xvc2VSZXN1bHRzKCk7XG4gICAgfVxuICB9LFxuICBjbG9zZVJlc3VsdHM6IGZ1bmN0aW9uIGNsb3NlUmVzdWx0cygpIHtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXN0b3JlSGFuZGxlcnMoKTtcbiAgICB0aGlzLmNsZWFyUmVzdWx0cygpO1xuICB9LFxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihyZXN1bHQsIHF1ZXJ5KSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBvcHRpb25zID0gX29wdGlvbnM0Lm1hcmtlcixcbiAgICAgICAgc2hvd1BvcHVwID0gX29wdGlvbnM0LnNob3dQb3B1cCxcbiAgICAgICAgcG9wdXBGb3JtYXQgPSBfb3B0aW9uczQucG9wdXBGb3JtYXQ7XG5cbiAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKFtyZXN1bHQueSwgcmVzdWx0LnhdLCBvcHRpb25zKTtcbiAgICB2YXIgcG9wdXBMYWJlbCA9IHJlc3VsdC5sYWJlbDtcblxuICAgIGlmICh0eXBlb2YgcG9wdXBGb3JtYXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBvcHVwTGFiZWwgPSBwb3B1cEZvcm1hdCh7IHF1ZXJ5OiBxdWVyeSwgcmVzdWx0OiByZXN1bHQgfSk7XG4gICAgfVxuXG4gICAgbWFya2VyLmJpbmRQb3B1cChwb3B1cExhYmVsKTtcblxuICAgIHRoaXMubWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xuXG4gICAgaWYgKHNob3dQb3B1cCkge1xuICAgICAgbWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmRyYWdnYWJsZSkge1xuICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgX3RoaXM0Lm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9tYXJrZXIvZHJhZ2VuZCcsIHtcbiAgICAgICAgICBsb2NhdGlvbjogbWFya2VyLmdldExhdExuZygpLFxuICAgICAgICAgIGV2ZW50OiBhcmdzXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczUuYW5pbWF0ZVpvb207XG5cblxuICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG4gICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfVxuICB9LFxuICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuICAgIHZhciBfb3B0aW9uczYgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNi5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNi56b29tTGV2ZWw7XG5cbiAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcbiAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG4gIH1cblxuICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9sZWFmbGV0Q29udHJvbC5qcyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG4gKlxuICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cbiAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cbiAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG4gKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG4gKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcbiAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcyxpbnB1dCkge1xuICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpIDtcbiAgICB2YXIgdCA9IFwicmV0dXJuIFwiK3NyYyA7XG4gICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdIDtcbiAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nIDtcbiAgICB2YXIgbSA9IFtdIDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpIDtcbiAgICAgICAgaWYgKG14KVxuICAgICAgICAgICAgbS5wdXNoKG14KSA7XG4gICAgICAgIGVsc2UgYnJlYWsgO1xuICAgIH1cbiAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICB0ID0gdC5zbGljZSgwLGUuaW5kZXgpK2luY2x1ZGVzW2VbMV1dK3Quc3Vic3RyKGUuaW5kZXgrZVswXS5sZW5ndGgpIDtcbiAgICB9KSA7XG4gICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywnICcpLnJlcGxhY2UoL1xccysvZywnICcpIDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsdCkoKSA7XG59XG5cbnZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcbiAgICB6b3VzYW46cmVxdWlyZSgnLi96b3VzYW4nKS50b1N0cmluZygpLFxuICAgIHRoZW5hYmxlOnJlcXVpcmUoJy4vdGhlbmFibGVGYWN0b3J5JykudG9TdHJpbmcoKVxufSxcbmZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZixjYXRjaGVyKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jYmluZFwiLHt2YWx1ZTokYXN5bmNiaW5kLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG5cbiAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LHgscyxlLHUpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdT91bmRlZmluZWQ6cTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLmNhbGwodClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcbiAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG4gICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzO1xuICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5UaGVuYWJsZSkoYm91bmRUaGVuKTtcbiAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBuZXcgKCRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbiA7XG4gICAgICAgIHJldHVybiBib3VuZFRoZW4gO1xuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZixhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufSkgO1xuXG5mdW5jdGlvbiAkYXN5bmNzcGF3bihwcm9taXNlUHJvdmlkZXIsc2VsZikge1xuICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY3NwYXduKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCIkYXN5bmNzcGF3blwiLHt2YWx1ZTokYXN5bmNzcGF3bixlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KSA7XG4gICAgfVxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybiA7XG5cbiAgICB2YXIgZ2VuRiA9IHRoaXMgO1xuICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICBmdW5jdGlvbiBzdGVwKGZuLGFyZykge1xuICAgICAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbixhcmcpO1xuICAgICAgICAgICAgICAgIGlmKG5leHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgJiYgbmV4dC52YWx1ZT09PW5leHQudmFsdWUudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC52YWx1ZShyZXNvbHZlLHJlamVjdCkgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGwgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQudmFsdWUudGhlbihmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LHYpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi50aHJvdyxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCxuZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICByZWplY3QgJiYgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGwgO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGVwKGdlbi5uZXh0KTtcbiAgICB9KTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuJGFzeW5jYmluZCgpIDtcbiRhc3luY3NwYXduKCkgO1xuXG4vLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncbm1vZHVsZS5leHBvcnRzID0ge1xuICAgICRhc3luY2JpbmQ6JGFzeW5jYmluZCxcbiAgICAkYXN5bmNzcGF3bjokYXN5bmNzcGF3blxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvcnVudGltZS5qcyIsIi8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcbnpvdXNhbiAtIEEgTGlnaHRuaW5nIEZhc3QsIFlldCBWZXJ5IFNtYWxsIFByb21pc2UgQSsgQ29tcGxpYW50IEltcGxlbWVudGF0aW9uXG5odHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5BdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5WZXJzaW9uIDIuMy4zXG5MaWNlbnNlOiBNSVQgKi9cblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0aWNrKXtcbiAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3M9PT1cIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2spIHx8ICh0eXBlb2Ygc2V0SW1tZWRpYXRlPT09XCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSkgfHwgZnVuY3Rpb24oZil7c2V0VGltZW91dChmLDApfTtcbiAgICB2YXIgc29vbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcSA9IFtdLCBmcVN0YXJ0ID0gMCwgYnVmZmVyU2l6ZSA9IDEwMjQ7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcbiAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHsgZnFbZnFTdGFydF0oKSB9IGNhdGNoKGV4KSB7IC8qIGNvbnNvbGUuZXJyb3IoZXgpICovIH1cbiAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGZxLnNwbGljZSgwLCBidWZmZXJTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgZnEucHVzaChmbik7XG4gICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSlcbiAgICAgICAgICAgICAgICB0aWNrKGNhbGxRdWV1ZSk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIFpvdXNhbihmdW5jKSB7XG4gICAgICAgIGlmIChmdW5jKSB7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgZnVuYyhmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIG1lLnJlamVjdChhcmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKHJhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZVTEZJTExFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKG1lLmMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gbWUuYy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdDogZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG4gICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG4gICAgICAgICAgICB2YXIgY2xpZW50cyA9IHRoaXMuYztcbiAgICAgICAgICAgIGlmIChjbGllbnRzKVxuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoO24gPCBsOyBuKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aGVuOiBmdW5jdGlvbiAob25GLCBvblIpIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuICAgICAgICAgICAgdmFyIGNsaWVudCA9IHtcbiAgICAgICAgICAgICAgICB5OiBvbkYsXG4gICAgICAgICAgICAgICAgbjogb25SLFxuICAgICAgICAgICAgICAgIHA6IHBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jLnB1c2goY2xpZW50KTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYyA9IFtjbGllbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsIGEgPSB0aGlzLnY7XG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNUQVRFX0ZVTEZJTExFRChjLCBhcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMueS5jYWxsKHVuZGVmaW5lZCwgYXJnKTtcbiAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnAucmVzb2x2ZShhcmcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNUQVRFX1JFSkVDVEVEKGMsIHJlYXNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy5uLmNhbGwodW5kZWZpbmVkLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZWplY3QocmVhc29uKTtcbiAgICB9XG5cbiAgICBab3VzYW4ucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiAodmFsIGluc3RhbmNlb2YgWm91c2FuKSlcbiAgICAgICAgICAgIHJldHVybiB2YWwgO1xuICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgei5yZXNvbHZlKHZhbCk7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH07XG4gICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciAmJiAoZXJyIGluc3RhbmNlb2YgWm91c2FuKSlcbiAgICAgICAgICAgIHJldHVybiBlcnIgO1xuICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgei5yZWplY3QoZXJyKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcblxuICAgIFpvdXNhbi52ZXJzaW9uID0gXCIyLjMuMy1ub2RlbnRcIiA7XG4gICAgcmV0dXJuIFpvdXNhbiA7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS96b3VzYW4uanMiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ2YXIgc2NvcGUgPSAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwpIHx8XG4gICAgICAgICAgICAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZikgfHxcbiAgICAgICAgICAgIHdpbmRvdztcbnZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHNjb3BlLCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbi8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1lZGlhdGVgIHdhc1xuLy8gYWJsZSB0byBpbnN0YWxsIG9udG8uICBTZWFyY2ggZWFjaCBwb3NzaWJpbGl0eSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcbi8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSAmJiB0eXBlb2Ygb2JqLnRoZW49PT1cImZ1bmN0aW9uXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x1dGlvbihwLHIsaG93KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKiAyLjIuNy4xICovXG4gICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKTpyIDtcblxuICAgICAgICAgICAgaWYgKHA9PT14KSAvKiAyLjMuMSAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpIDtcblxuICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcbiAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuICAgICAgICAgICAgICAgIHgudGhlbihmdW5jdGlvbih5KXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLHkpO1xuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIHAucmVqZWN0KGUpXG4gICAgICAgICAgICAgICAgfSkgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoeCkgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuICAgICAgICAgICAgcC5yZWplY3QoZXgpIDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodil7fVxuICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMscmVqKXtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG4gICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6X3VuY2hhaW5lZCxcbiAgICAgICAgcmVqZWN0Ol91bmNoYWluZWQsXG4gICAgICAgIHRoZW46dGhlbkNoYWluXG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiB0aGVuKHJlcyxyZWope1xuICAgICAgICB2YXIgY2hhaW4gPSBuZXcgQ2hhaW5lZCgpIDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVyKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVGhlbmFibGUodmFsdWUpID8gdmFsdWUudGhlbihyZXMscmVqKSA6IHJlc29sdXRpb24oY2hhaW4sdmFsdWUscmVzKTtcbiAgICAgICAgICAgIH0sZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaikgO1xuICAgICAgICAgICAgfSkgO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbixleCxyZWopO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFpbiA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZXIgPSByZXNvbHZlciA7XG4gICAgICAgIHRoaXMudGhlbiA9IHRoZW4gO1xuICAgIH07XG5cbiAgICBUaGVuYWJsZS5yZXNvbHZlID0gZnVuY3Rpb24odil7XG4gICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHt0aGVuOmZ1bmN0aW9uKHJlc29sdmUpe3JldHVybiByZXNvbHZlKHYpfX07XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLmlzVGhlbmFibGUgPSBpc1RoZW5hYmxlIDtcblxuICAgIHJldHVybiBUaGVuYWJsZSA7XG59IDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvdGhlbmFibGVGYWN0b3J5LmpzIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2VhcmNoRWxlbWVudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcbiAgICAgICAgX3JlZiRzZWFyY2hMYWJlbCA9IF9yZWYuc2VhcmNoTGFiZWwsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG4gICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcbiAgICB2YXIgaW5wdXQgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdpbnB1dCcsIFsnZ2xhc3MnLCBjbGFzc05hbWVzLmlucHV0XS5qb2luKCcgJyksIGZvcm0pO1xuXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcbiAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlYXJjaExhYmVsO1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25JbnB1dChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlVcChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlQcmVzcyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25Gb2N1cyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkJsdXIoZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIGZvcm06IGZvcm0sIGlucHV0OiBpbnB1dCB9O1xuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG4gICAga2V5OiAnb25Gb2N1cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25CbHVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uU3VibWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBfZWxlbWVudHMsIGlucHV0LCBjb250YWluZXI7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcbiAgICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25JbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cblxuICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbktleVVwJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlVcChldmVudCkge1xuICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuICAgICAgICAgIGlucHV0ID0gX2VsZW1lbnRzMi5pbnB1dDtcblxuXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblxuICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlQcmVzcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuICAgICAgICB0aGlzLm9uU3VibWl0KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRRdWVyeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnRzLmlucHV0O1xuXG4gICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTZWFyY2hFbGVtZW50O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTZWFyY2hFbGVtZW50O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG52YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn07XG5cbnZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG4gIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcbiAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuICAgICAgcmVzb2x2ZShqc29uKTtcbiAgICB9O1xuXG4gICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcbiAgfSk7XG59O1xuXG52YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cbnZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2RvbVV0aWxzLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcbnZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG52YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG52YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcbnZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcbnZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXG52YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9jb25zdGFudHMuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBjeCA9IGZ1bmN0aW9uIGN4KCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xufTtcblxudmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFJlc3VsdExpc3QoKSB7XG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcbiAgICAgICAgaGFuZGxlQ2xpY2sgPSBfcmVmJGhhbmRsZUNsaWNrID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlQ2xpY2ssXG4gICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cbiAgICBfaW5pdGlhbGlzZVByb3BzLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcbiAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cbiAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuICAgIHZhciByZXN1bHRJdGVtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goY2xhc3NOYW1lcy5pdGVtKSk7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCByZXN1bHRJdGVtOiByZXN1bHRJdGVtIH07XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVzdWx0TGlzdCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuICAgICAgICAgIHJlc3VsdEl0ZW0gPSBfZWxlbWVudHMucmVzdWx0SXRlbTtcblxuICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgaWR4KTtcbiAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlbGVjdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaWR4KSB7XG4gICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cyA/IHRoaXMucmVzdWx0cy5sZW5ndGggOiAwO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlc3VsdExpc3Q7XG59KCk7XG5cbnZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXG4gICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG4gICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcbiAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGpzb25wOiBqc29ucFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcbiAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXG4gICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXG4gICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuICAgICAgfSkuam9pbignJicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICB0ZXh0OiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcbiAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcbiAgICAgICAgICBsYWJlbDogci5uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcbiAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcbiAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG4gICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnk7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgcTogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuICdodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2VuZHBvaW50UmV2ZXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50UmV2ZXJzZSgpIHtcbiAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICAgICAgICBvc21faWQ6IGRhdGEucmF3Lm9zbV9pZCxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICAgICAgICBvc21fdHlwZTogdGhpcy50cmFuc2xhdGVPc21UeXBlKGRhdGEucmF3Lm9zbV90eXBlKVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gJ2h0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3JldmVyc2U/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjMpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjMuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5sb24sXG4gICAgICAgICAgeTogci5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWFyY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZjQpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBxdWVyeSwgZGF0YSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmNC5xdWVyeSwgZGF0YSA9IF9yZWY0LmRhdGE7XG5cbiAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6JztcblxuICAgICAgICB1cmwgPSBkYXRhID8gdGhpcy5lbmRwb2ludFJldmVyc2UoeyBkYXRhOiBkYXRhLCBwcm90b2NvbDogcHJvdG9jb2wgfSkgOiB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YTogZGF0YSA/IFtqc29uXSA6IGpzb24gfSkpO1xuICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndHJhbnNsYXRlT3NtVHlwZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyYW5zbGF0ZU9zbVR5cGUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09ICdub2RlJykgcmV0dXJuICdOJztcbiAgICAgIGlmICh0eXBlID09PSAnd2F5JykgcmV0dXJuICdXJztcbiAgICAgIGlmICh0eXBlID09PSAncmVsYXRpb24nKSByZXR1cm4gJ1InO1xuICAgICAgcmV0dXJuICcnOyAvLyBVbmtub3duXG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwiaW1wb3J0IHt0b2dnbGVMYXllcn0gZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7bWFrZU9wYWNpdHlTbGlkZXJ9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHtzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb259IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcblxudmFyIGxheWVyR3JvdXBMYXlvdXQgPSBbXVxudmFyIGxheWVyR3JvdXBzXG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRBY3RpdmVMYXllckdyb3VwcyAoKSB7XG5cdHJldHVybiBsYXllckdyb3VwTGF5b3V0LmZpbHRlcihsYXllckdyb3VwID0+IHtcblx0XHRyZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmVcblx0fSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0UGFuZWxTdGF0ZSAoKSB7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExheWVyR3JvdXBzICgpIHtcblx0cmV0dXJuIGxheWVyR3JvdXBzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBhbmVsIChsYXllcnMsIGxheW91dCkge1xuXHRsYXllckdyb3VwTGF5b3V0ID0gbGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXVxuXHRsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcblx0bWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG5cdG1ha2VQYW5lbERyYWdnYWJsZSgpXG5cdHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpXG59XG5cbmZ1bmN0aW9uIGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSB7XG5cdHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XG5cdHJldHVybiB1YS5pbmRleE9mKCdNU0lFJykgPiAtMSB8fCB1YS5pbmRleE9mKCdydjoxMS4wJykgPiAtMVxufVxuXG5mdW5jdGlvbiBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKSB7XG5cdHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpXG5cdHBhbmVsLm9uc2Nyb2xsID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodFxufVxuXG5mdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG5cdGlmIChicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkpIHJldHVyblxuXG5cdHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcblxuXHRvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJylcblxuXHRvdmVybGF5LmNhbGwoZDMuZHJhZygpXG5cdFx0Lm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xuXHRcdHBhbmVsRHJhZ0V2ZW50SGFuZGxlci5jYWxsKHRoaXMpXG5cdH0pKTtcbn1cblxuZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuXHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcblx0dXBkYXRlUGFuZWxXaWR0aCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ICgpIHtcblx0dmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxuXHR2YXIgcGFuZWxPZmZzZXRIZWlnaHQgPSBwYW5lbC5wcm9wZXJ0eSgnb2Zmc2V0SGVpZ2h0Jylcblx0dmFyIHBhbmVsRHJhZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5Jylcblx0dmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKVxuXG5cdHZhciBuZXdIZWlnaHRcblxuXHRpZiAocGFuZWwuY2xhc3NlZCgnZ3JhcGhzLWFjdGl2ZScpKSB7XG5cdFx0dmFyIGdyYXBoTGlzdEV4dHJhU3BhY2UgPSA3MDBcblx0XHR2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKVxuXHRcdG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3Quc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0RXh0cmFTcGFjZVxuXHR9XG5cdGVsc2UgeyAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcblx0XHR2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxuXHRcdG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0XG5cdH1cblx0bmV3SGVpZ2h0ID0gbmV3SGVpZ2h0ID4gcGFuZWxPZmZzZXRIZWlnaHQgPyBgJHtuZXdIZWlnaHR9YCsncHgnIDogbnVsbFxuXHRwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodFxufVxuXG5mdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xuXHR2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpXG5cdHZhciBwYW5lbE1pbldpZHRoID0gK3BhbmVsLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMilcblx0dmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKVxuXG5cdHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxuXHR2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aFxuXG5cdHZhciBtYXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJylcblxuXHR2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueFxuXHR2YXIgeERlbHRhID0gKHdyYXBwZXJXaWR0aCAtIG1vdXNlWCkgLSBwYW5lbENsaWVudFdpZHRoXG5cblx0dmFyIG5ld1BhbmVsV2lkdGggPSBwYW5lbENsaWVudFdpZHRoICsgeERlbHRhXG5cdG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/XG5cdFx0cGFuZWxNaW5XaWR0aFxuXHQ6ICAgbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/XG5cdFx0d3JhcHBlcldpZHRoXG5cdDogICBuZXdQYW5lbFdpZHRoXG5cdG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7bmV3UGFuZWxXaWR0aH1gKydweCdcblx0cGFuZWwuc3R5bGUoJ3dpZHRoJywgYCR7bmV3UGFuZWxXaWR0aH1gKydweCcpXG59XG5cbmZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyAobGF5b3V0KSB7XG5cdHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0Jylcblx0XHQuc2VsZWN0QWxsKCcubGF5ZXItZ3JvdXAtd3JhcHBlcicpXG5cdFx0LmRhdGEobGF5b3V0KVxuXHRcdC5lbnRlcigpXG5cdFx0XHQuYXBwZW5kKCdkaXYnKVxuXHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKVxuXHRcdFx0LmF0dHIoJ2lkJywgbGF5ZXJHcm91cCA9PiBsYXllckdyb3VwLmlkKVxuXHRcdFx0LmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXG5cdFx0XHQuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHRcdFx0XHRkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKVxuXHRcdFx0XHRcdC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcblx0XHRcdFx0XHQub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblxuXHRcdFx0XHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBsaXN0IGFjY29yZGlhbnNcblx0XHRcdFx0XHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0XHRcdFx0ICBldmVudENhdGVnb3J5OiAnbGF5ZXIgbGlzdCcsXG5cdFx0XHRcdFx0XHQgIGV2ZW50QWN0aW9uOiAndG9nZ2xlICcgKyAhbGF5ZXJHcm91cC5hY3RpdmUsXG5cdFx0XHRcdFx0XHQgIGV2ZW50TGFiZWw6IGxheWVyR3JvdXAubmFtZSxcblx0XHRcdFx0XHRcdCAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0bGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XG5cdFx0XHRcdFx0XHRkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCAoKSA9PiBsYXllckdyb3VwLmFjdGl2ZSk7XG5cdFx0XHRcdFx0XHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcblx0XHRcdFx0XHRcdHVwZGF0ZVNoYXJlVXJsKClcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC50ZXh0KGxheWVyR3JvdXAubmFtZSlcblx0XHRcdH0pXG5cdFx0XHQuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyAobGF5ZXJHcm91cHMsIGxheWVycykge1xuXHRsYXllckdyb3Vwcy5zZWxlY3RBbGwoJy5sYXllci1zZWxlY3QnKVxuXHRcdC5kYXRhKGxheWVyR3JvdXAgPT4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdKVxuXHRcdC5lbnRlcigpLmFwcGVuZCgnZGl2Jylcblx0XHQuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0Jylcblx0XHQuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRcdHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblx0XHRcdHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKVxuXHRcdFx0bGF5ZXIubGF5ZXJEaXYgPSBsYXllckRpdlxuXHRcdFx0bWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG5cdFx0XHRtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcblx0XHRcdG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xuXHRcdFx0bGF5ZXJEaXYubm9kZSgpLmFwcGVuZENoaWxkKG1ha2VMYXllclRvb2xzKGxheWVyKSk7XG5cdFx0fSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VDaGVja2JveCAobGF5ZXIsIGxheWVyRGl2KSB7XG5cdGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKVxuXHRcdC5hdHRyKCd0eXBlJywgJ2NoZWNrYm94Jylcblx0XHQuYXR0cignaWQnLCBsYXllciA9PiBsYXllci5pZClcblx0XHQuYXR0cignY2hlY2tlZCcsIChsYXllcikgPT4ge1xuXHRcdFx0cmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG5cdFx0fSlcblx0XHQub24oJ2NsaWNrJywgZnVuY3Rpb24obGF5ZXIpIHtcblx0XHRcdHRvZ2dsZUxheWVyKGxheWVyKVxuXHRcdFx0dG9nZ2xlTGF5ZXJUb29sc1VJKGxheWVyKVxuXHRcdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlTGF5ZXJUb29sc1VJIChsYXllcikge1xuXHRsYXllci5sYXllckRpdi5zZWxlY3QoJy5sYXllci10b29scy13cmFwcGVyJylcblx0XHQuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblx0aWYgKGxheWVyLmFjdGl2ZSkge1xuXHRcdHZhciBzbGlkZXJIYW5kbGUgPSBsYXllci5sYXllckRpdi5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5ub2RlKClcblx0XHRzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgbGF5ZXIub3BhY2l0aXkpXG5cdH0gICAgXG59XG5cbmZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcblx0bGF5ZXJEaXZcblx0XHQuYXBwZW5kKCdkaXYnKVxuXHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsLXdyYXBwZXInKVxuXHRcdC5hcHBlbmQoJ2xhYmVsJylcblx0XHRcdC5hdHRyKCdmb3InLCBsYXllciA9PiBsYXllci5pZClcblx0XHRcdC5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpXG5cdFx0XHQuaHRtbChsYXllciA9PiBsYXllci5uYW1lKTtcbn1cblxuZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uIChsYXllciwgbGF5ZXJEaXYpIHtcblx0aWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcblx0XHRsYXllckRpdi5hcHBlbmQoJ2RpdicpXG5cdFx0XHQuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4td3JhcHBlcicpXG5cdFx0XHQub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKVxuXHRcdFx0XHRcdC5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKVxuXHRcdFx0XHRcdC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0ICBcblx0XHRcdFx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGxheWVyIGluZm9cblx0XHRcdFx0XHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0XHRcdFx0ICBldmVudENhdGVnb3J5OiAnbGF5ZXIgaW5mbycsXG5cdFx0XHRcdFx0XHQgIGV2ZW50QWN0aW9uOiAnY2xpY2tlZCcsXG5cdFx0XHRcdFx0XHQgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUgKyBcIiBcIiArICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyksXG5cdFx0XHRcdFx0XHQgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdFx0XHRcdFx0fSk7XG5cblxuXHRcdFx0XHRcdFx0cmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0XHQuYXBwZW5kKCdpbWcnKVxuXHRcdFx0XHQuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1pY29uJylcblx0XHRcdFx0LmF0dHIoJ3NyYycsICdpbWdzL21vcmUtaW5mby1pY29uLTY0eDY0LnBuZycpXG5cdFx0XHRcdC5hdHRyKFwiYWx0XCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKVxuXHRcdFx0XHQuYXR0cihcInRpdGxlXCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKVxuXG5cdFx0bGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxuXHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpXG5cdFx0XHQudGV4dChsYXllciA9PiBsYXllci5pbmZvKTtcblx0fVxufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpIHtcblx0dmFyIGxheWVyVG9vbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXHRsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2xheWVyLXRvb2xzLXdyYXBwZXInKVxuXHRpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG5cblx0dmFyIG9wYWNpdHlTbGlkZXIgPSBtYWtlT3BhY2l0eVNsaWRlcihsYXllcik7XG5cdHZhciBsZWdlbmQgPSBtYWtlTGVnZW5kKGxheWVyKTtcblxuXHRsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKGxlZ2VuZClcblx0bGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChvcGFjaXR5U2xpZGVyKVxuXG5cdHJldHVybiBsYXllclRvb2xzRGl2XG59XG5cbmZ1bmN0aW9uIG1ha2VMZWdlbmQgKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xuXHR2YXIgbGVnZW5kV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdHZhciBsZWdlbmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuXHRsZWdlbmRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2xlZ2VuZC13cmFwcGVyJylcblx0bGVnZW5kSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgbGF5ZXIubGVnZW5kKVxuXHRsZWdlbmRXcmFwcGVyLmFwcGVuZENoaWxkKGxlZ2VuZEltZylcblx0cmV0dXJuIGxlZ2VuZFdyYXBwZXJcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhbmVsLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcbmltcG9ydCB7dG9nZ2xlTGF5ZXJUb29sc1VJfSBmcm9tIFwiLi9wYW5lbFwiO1xuLyoqXG4gKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxuICogdGhlIG9yZGVyIG9mIGxheWVycyBpbiB0aGUgbWFwXG4gKi9cbnZhciBfY3VycmVudF9sYXllcnMgPSBbXTtcbnZhciBfY3VycmVudF9sYXllcnNfb2JqZWN0cyA9IFtdO1xuXG4vKipcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXG4gKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxuICogICAgICAgbGVhZmxldCBsYXllci5cbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzICgpIHtcblx0cmV0dXJuIF9jdXJyZW50X2xheWVycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR1cm5PZmZOb25CYXNlTGF5ZXJzICgpIHtcblx0d2hpbGUgKF9jdXJyZW50X2xheWVyc19vYmplY3RzLmxlbmd0aCkge1xuXHRcdHZhciBsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzLnBvcCgpXG5cdFx0bGF5ZXIuYWN0aXZlID0gZmFsc2Vcblx0XHRkaXNhYmxlTGF5ZXIobGF5ZXIpXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGF5ZXIuaWQpLmNoZWNrZWQgPSBmYWxzZVxuXHRcdHRvZ2dsZUxheWVyVG9vbHNVSShsYXllcilcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyAobGF5ZXJzLCBkZWZhdWx0TGF5ZXJzKSB7XG5cdHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHR2YXIgZGVmYXVsdExheWVyO1xuXHR2YXIgZm91bmRMYXllcjtcblxuXHRpZiAoIWRlZmF1bHRMYXllcnMgfHwgZGVmYXVsdExheWVycy5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuXHRcdGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0XHRkZWZhdWx0TGF5ZXIgPSBkZWZhdWx0TGF5ZXJzW2ldO1xuXHRcdGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0XHRcdGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdFx0XHRsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHRcdFx0Zm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0aWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuXHRcdFx0XHRcdGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuXHRcdFx0XHRcdGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVMYXllciAobGF5ZXIpIHtcblx0aWYgKCFsYXllci5hY3RpdmUpIHtcblx0XHRlbmFibGVMYXllcihsYXllcik7XG5cblx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIG9uXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0ICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxuXHRcdCAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb24nLFxuXHRcdCAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcblx0XHQgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0ZGlzYWJsZUxheWVyKGxheWVyKTtcblxuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb2ZmXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0ICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxuXHRcdCAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb2ZmJyxcblx0XHQgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUsXG5cdFx0ICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVMYXllciAobGF5ZXIpIHtcblx0dmFyIG1hcCA9IEdldE1hcCgpO1xuXG5cdGxheWVyLmFjdGl2ZSA9IHRydWU7XG5cdGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XG5cdG1hcC5hZGRMYXllcihsYXllci5tYXBMYXllcik7XG5cdGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHRtb3ZlT3ZlcmxheUxheWVyc1RvVG9wKCk7XG5cdHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIG1vdmVPdmVybGF5TGF5ZXJzVG9Ub3AgKCkge1xuXHR2YXIgbGF5ZXI7XG5cdHZhciBpLCBsO1xuXG5cdGZvciAoaSA9IDAsIGwgPSBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzW2ldO1xuXHRcdGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlciAobGF5ZXIpIHtcblx0X2N1cnJlbnRfbGF5ZXJzLnB1c2gobGF5ZXIuaWQpO1xuXHRfY3VycmVudF9sYXllcnNfb2JqZWN0cy5wdXNoKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcblx0dmFyIG1hcCA9IEdldE1hcCgpO1xuXG5cdGxheWVyLmFjdGl2ZSA9IGZhbHNlO1xuXHRpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuXHRcdG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG5cdH1cblx0cmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcblx0dXBkYXRlU2hhcmVVcmwoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xuXHR2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuXHRpZiAobG9jID09PSAtMSkgcmV0dXJuO1xuXHRfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XG5cdF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5IChsYXllciwgbmV3T3BhY2l0eSkge1xuXHRsYXllci5vcGFjaXR5ID0gbmV3T3BhY2l0eVxuXHRsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG5ld09wYWNpdHkpXG59XG5cbmZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIgKGxheWVyKSB7XG5cdHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG5cdFx0bGF5ZXJzOiBsYXllci5pZCxcblx0XHR0cmFuc3BhcmVudDogbGF5ZXIudHJhbnNwYXJlbnQgfHwgdHJ1ZSxcblx0XHR2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG5cdFx0Y3JzOiBsYXllci5jcnMgfHwgTC5DUlMuRVBTRzkwMDkxMyxcblx0XHRmb3JtYXQ6IGxheWVyLmZvcm1hdCB8fCAnaW1hZ2UvcG5nJyxcblx0XHRvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IC43NSxcblx0XHR0aWxlU2l6ZTogbGF5ZXIudGlsZVNpemUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIikuY2xpZW50V2lkdGhcblx0fSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXllci5qcyIsImltcG9ydCB7cmVtb3ZlQWxsUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knXG5pbXBvcnQge3R1cm5PZmZOb25CYXNlTGF5ZXJzfSBmcm9tICcuL2xheWVyJ1xuaW1wb3J0IHtyZW1vdmVBbGxHcmFwaHN9IGZyb20gJy4vZ3JhcGgnXG5pbXBvcnQge3Jlc2V0UGFuZWxTdGF0ZX0gZnJvbSAnLi9wYW5lbCdcbmltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSAgJy4vcGFuZWwnXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuXG52YXIgbWFwO1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJNYXAgKCkge1xuXHRyZW1vdmVBbGxQb2ludHNPZkludGVyZXN0KClcblx0cmVtb3ZlQWxsR3JhcGhzKClcblx0dHVybk9mZk5vbkJhc2VMYXllcnMoKVxuXHRyZXNldFBhbmVsU3RhdGUoKVxuXHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcblx0dXBkYXRlU2hhcmVVcmwoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlTWFwIChtYXBDb25maWcpIHtcblx0dmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XG5cdHZhciBvcHRpb25zID0gbWFwQ29uZmlnLm9wdGlvbnMgfHwge1wic2Nyb2xsV2hlZWxab29tXCIgOiBmYWxzZX07XG5cdHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmNlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xuXHR2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuem9vbSB8fCA2O1xuXG5cdG1hcCA9IEwubWFwKGlkLCBvcHRpb25zKS5zZXRWaWV3KGluaXRpYWxDZW50ZXIsIGluaXRpYWxab29tKTtcblx0TC5jb250cm9sLmF0dHJpYnV0aW9uKCkuYWRkVG8obWFwKVxuXG5cdHZhciBsZWFmbGV0Wm9vbUluID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtY29udHJvbC16b29tLWluXCIpWzBdO1xuXG5cdGxlYWZsZXRab29tSW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRldmVudEFjdGlvbjogJ2NsaWNrIGJ1dHRvbicsXG5cdFx0XHRldmVudExhYmVsOiAnem9vbSBpbicsXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHR9KTtcblx0fSlcblxuXHR2YXIgbGVhZmxldFpvb21PdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20tb3V0XCIpWzBdO1xuXG5cdGxlYWZsZXRab29tT3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljayBidXR0b24nLFxuXHRcdFx0ZXZlbnRMYWJlbDogJ3pvb20gb3V0Jyxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXHR9KVxuXG5cdG1hcC5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZSl7XG5cdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGRyYWcgKHBhbikgZW5kXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnbWFwJyxcblx0XHRcdGV2ZW50QWN0aW9uOiAnZHJhZycsXG5cdFx0XHRldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuXHRcdFx0bm9uSW50ZXJhY3Rpb246IHRydWVcblx0XHR9KTtcblx0fSlcblxuXHRtYXAub24oXCJ6b29tZW5kXCIsIGZ1bmN0aW9uKGUpe1xuXHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciB6b29tIGVuZFxuXHRcdGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0XHRldmVudEFjdGlvbjogJ3pvb20nLFxuXHRcdFx0ZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcblx0XHRcdG5vbkludGVyYWN0aW9uOiB0cnVlXG5cdFx0fSk7XG5cdH0pXG5cdHJldHVybiBtYXA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRNYXAgKCkge1xuXHRyZXR1cm4gbWFwO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbWFwLmpzIiwiaW1wb3J0IHtjcmVhdGVHcmFwaERpdn0gZnJvbSAnLi9ncmFwaCc7XG5pbXBvcnQge2NyZWF0ZU1hcmtlciwgZ2V0SWNvbn0gZnJvbSAnLi9tYXJrZXInO1xuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSc7XG5pbXBvcnQge0dldE1hcH0gZnJvbSAnLi9tYXAnO1xuaW1wb3J0IHtHZXRBY3RpdmVUYWIsIEhhbmRsZVRhYkNoYW5nZX0gZnJvbSAnLi90YWJzJztcbmltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSAnLi9wYW5lbCc7XG5cbnZhciBfcG9pbnRzX29mX2ludGVyZXN0ID0gW11cblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyAobWFwKSB7XG5cdG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFsbFBvaW50c09mSW50ZXJlc3QgKCkge1xuXHR2YXIgbWFwID0gR2V0TWFwKClcblx0X3BvaW50c19vZl9pbnRlcmVzdC5mb3JFYWNoKHBvaSA9PiB7XG5cdFx0bWFwLnJlbW92ZUxheWVyKHBvaS5tYXJrZXIpXG5cdH0pXG5cdF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXBDbGljayAoZSkge1xuXHR2YXIgbWFwID0gdGhpcztcblx0dmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcblx0dmFyIGxuZyA9IGUubGF0bG5nLmxuZztcblxuXHR2YXIgcG9pID0gY3JlYXRlUE9JKGxhdCwgbG5nLCBudWxsKTtcblx0QWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKHBvaSk7XG5cdFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpO1xuXHR1cGRhdGVTaGFyZVVybCgpO1xuXG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxuXHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRldmVudENhdGVnb3J5OiAnbWFwJyxcblx0XHRldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHRldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeSh7XCJhY3Rpb25cIjpcImFkZCBtYXAgbWFya2VyXCIsXCJsYXRcIjpsYXQsXCJsb25nXCI6bG5nfSksXG5cdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSkge1xuXHR2YXIgZWxlbSA9IGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKTtcblx0ZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC1lbGVtLWhlYWRlclwiKVswXS5hcHBlbmRDaGlsZChlbGVtKTtcblx0ZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXG5cdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgcmVtb3ZlIGdyYXBoXG5cdFx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0XHRldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHRcdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0XHRldmVudExhYmVsOiAncmVtb3ZlJyxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXG5cdFx0UmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pKVxuXHRcdFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgZGl2LCBtYXJrZXIpXG5cdFx0dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXG5cdFx0dXBkYXRlU2hhcmVVcmwoKVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSAoKSB7XG5cdHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0ZWxlbS5jbGFzc05hbWUgPSBcInJlbW92ZS1ncmFwaFwiO1xuXHRlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcblx0ZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcblx0cmV0dXJuIGVsZW07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRBbGxQb2ludHNPZkludGVyZXN0ICgpIHtcblx0cmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQT0kgKGxhdCwgbG5nLCBwbG90cykge1xuXHRyZXR1cm4ge1xuXHRcdGxhdDogbGF0LFxuXHRcdGxuZzogbG5nLFxuXHRcdHBsb3RzOiBwbG90cyB8fCBbXCJiYXNlbGluZVwiLCBcIjIwMTVcIiwgXCJ0aHJlc2hvbGRzXCJdXG5cdH1cbn1cblxuZnVuY3Rpb24gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyIChwb2kpIHtcblx0X3BvaW50c19vZl9pbnRlcmVzdC5wdXNoKHBvaSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QgKG1hcCwgbmV3UG9pcykge1xuXHRBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QobmV3UG9pcylcblx0dmFyIHBvaXMgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0KClcblx0dmFyIG1hcCA9IEdldE1hcCgpXG5cdHBvaXMuZm9yRWFjaChwb2kgPT4ge1xuXHRcdFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpXG5cdH0pXG59XG5cbmZ1bmN0aW9uIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdCAocG9pcykge1xuXHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShfcG9pbnRzX29mX2ludGVyZXN0LCBwb2lzKTtcbn1cblxuZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pVG9SZW1vdmUpIHtcblx0X3BvaW50c19vZl9pbnRlcmVzdCA9IF9wb2ludHNfb2ZfaW50ZXJlc3QuZmlsdGVyKHBvaSA9PiB7XG5cdFx0cmV0dXJuICEocG9pID09PSBwb2lUb1JlbW92ZSlcblx0fSk7XG59XG5cbmZ1bmN0aW9uIFNldHVwUG9pbnRPZkludGVyZXN0VUkgKG1hcCwgcG9pKSB7XG5cdHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihwb2kpO1xuXHR2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKHBvaS5sYXQsIHBvaS5sbmcpO1xuXHRwb2kuZ3JhcGhEaXYgPSBkaXZcblx0cG9pLm1hcmtlciA9IG1hcmtlclxuXHRtYXJrZXIuYWRkVG8obWFwKVxuXHRjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlciwgcG9pKTtcblxuXHRkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdob3ZlcicpKTtcblx0fSlcblx0ZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcblx0XHRtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKTtcblx0fSlcblx0bWFya2VyLm9uKCdjbGljayBkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0aGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpXG5cdH0pXG5cdG1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHtcblx0XHRtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdob3ZlcicpKVxuXHR9KVxuXHRtYXJrZXIub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcblx0XHRtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKVxuXHRcdHBvaS5ncmFwaERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYW4tdG8tbWFya2VyLWJ0bicpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKVxuXHR9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50IChlLCBwb2kpIHtcblx0ZS5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cdEhhbmRsZVRhYkNoYW5nZSgnZ3JhcGhzLWFjdGl2ZScpXG5cdHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKVxuXHR0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKVxufVxuXG5mdW5jdGlvbiB0cmlnZ2VyR3JhcGhBbmltYXRpb24gKHBvaSkge1xuXHRwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJylcbn1cblxuZnVuY3Rpb24gc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaCAocG9pKSB7XG5cdHZhciByaWdodFBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdHJpZ2h0UGFuZWwuc2Nyb2xsVG9wID0gcG9pLmdyYXBoRGl2Lm9mZnNldFRvcDtcbn1cblxuZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkgKG1hcCwgZGl2LCBtYXJrZXIpIHtcblx0dmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuXHRsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG5cdG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXHR1cGRhdGVTaGFyZVVybCgpXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wb2kuanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xuaW1wb3J0IHtHZXRBamF4T2JqZWN0fSBmcm9tICcuL3BhcnNlcidcblxudmFyIHRpcCA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBHcmFwaHMgKCkge1xuXHRkMy5zZWxlY3RBbGwoXCIuZ3JhcGgtdHlwZS1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayk7XG5cdGV4dGVuZERhdGVNb2R1bGUoKTtcblx0dGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBbGxHcmFwaHMoKSB7XG5cdHZhciBncmFwaExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpXG5cdHdoaWxlIChncmFwaExpc3QuZmlyc3RDaGlsZCkge1xuXHRcdGdyYXBoTGlzdC5yZW1vdmVDaGlsZChncmFwaExpc3QuZmlyc3RDaGlsZClcblx0fVxufVxuXG5mdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlICgpIHtcblx0RGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHRcdGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcblx0XHRyZXR1cm4gKCh5ZWFyICUgMTAwKSAhPSAwIHx8ICh5ZWFyICUgNDAwKSA9PSAwKTtcblx0fTtcblxuXHQvLyBHZXQgRGF5IG9mIFllYXJcblx0RGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0XHR2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG5cdFx0dmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XG5cdFx0dmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHRcdGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuXHRcdHJldHVybiBkYXlPZlllYXI7XG5cdH07XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UgKGRpdiwgcG9pLCByZXNwb25zZSkge1xuXHRyZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XG5cdGRyYXdHcmFwaChyZXNwb25zZSwgZGl2LCBwb2kpO1xuXHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YShwb2ksIGRpdikge1xuXHR2YXIgdXJsID0gXCJodHRwczovL2ZjYXYtbmR2aS5uZW1hYy5vcmcvbGFuZGRhdF9wcm9kdWN0LmNnaT9hcmdzPVwiICsgcG9pLmxuZyArIFwiLFwiICsgcG9pLmxhdDtcblx0dmFyIG9SZXEgPSBHZXRBamF4T2JqZWN0KGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgcG9pLCByZXNwb25zZSlcblx0fSlcblxuXHRvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcblx0b1JlcS5zZW5kKClcbn1cblxuZnVuY3Rpb24gc3BsaXREYXRhKGRhdGEpIHtcblx0dmFyIGk7XG5cdGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0ZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiByZXByb2Nlc3NEYXRhIChvcmlnZGF0YSkge1xuXHR2YXIgZXhwZWN0ZWRZZWFyTGVuZ3RoID0gNDY7XG5cdHZhciBkYXRhID0ge307XG5cdHZhciBwb2ludDtcblx0dmFyIGtleTtcblx0dmFyIGksIGo7XG5cblx0ZGF0YVtcImtleXNcIl0gPSBbXTtcblx0Zm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0cG9pbnQgPSBvcmlnZGF0YVtpXTtcblx0XHRrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCw0KTtcblx0XHRpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0ZGF0YVtrZXldID0gW107XG5cdFx0XHRkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG5cdFx0fVxuXHRcdGRhdGFba2V5XS5wdXNoKHBvaW50KTtcblx0fVxuXG5cdHZhciBrZXlzVG9CZURlbGV0ZWQgPSBbXTtcblx0Zm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuXHRcdGtleSA9IGRhdGEua2V5c1tpXTtcblx0XHRpZiAoZGF0YVtrZXldLmxlbmd0aCAhPT0gZXhwZWN0ZWRZZWFyTGVuZ3RoKSB7XG5cdFx0XHRrZXlzVG9CZURlbGV0ZWQucHVzaChrZXkpO1xuXHRcdH1cblx0fVxuXG5cdGZvciAoaSA9IDA7IGkgPCBrZXlzVG9CZURlbGV0ZWQubGVuZ3RoOyBpKyspIHtcblx0XHRrZXkgPSBrZXlzVG9CZURlbGV0ZWRbaV07XG5cdFx0ZGVsZXRlIGRhdGFba2V5XTtcblx0XHRkYXRhLmtleXMuc3BsaWNlKGRhdGEua2V5cy5pbmRleE9mKGtleSksIDEpO1xuXHR9XG5cblx0dmFyIGRhdGFGb3JCYXNlbGluZTtcblx0dmFyIG1lYW47XG5cdGRhdGFbXCJiYXNlbGluZVwiXSA9IFtdO1xuXHRmb3IgKGkgPSAwOyBpIDwgZXhwZWN0ZWRZZWFyTGVuZ3RoOyBpKyspIHtcblx0XHRkYXRhRm9yQmFzZWxpbmUgPSBbXTtcblx0XHRmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuXHRcdFx0ZGF0YUZvckJhc2VsaW5lLnB1c2gocGFyc2VJbnQob3JpZ2RhdGFbal1bMV0sIDEwKSk7XG5cdFx0fVxuXG5cdFx0bWVhbiA9IGNvbXB1dGVBdmVyYWdlKGRhdGFGb3JCYXNlbGluZSk7XG5cdFx0ZGF0YVtcImJhc2VsaW5lXCJdLnB1c2gobWVhbik7XG5cdH1cblxuXHRyZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZUF2ZXJhZ2UgKGFycikge1xuXHR2YXIgc3VtID0gMCwgaSwgbDtcblxuXHRmb3IgKGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdHN1bSArPSBhcnJbaV07XG5cdH1cblxuXHRyZXR1cm4gKHN1bSAvIGwpLnRvU3RyaW5nKCk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayAoKSB7XG5cdHZhciB0eXBlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuXHR2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblxuXHRpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcblx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoIHR5cGUnLFxuXHQgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgIGV2ZW50TGFiZWw6IHR5cGUsXG5cdCAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdH0pO1xuXG5cdEhhbmRsZUdyYXBoVGFiQ2hhbmdlKHR5cGUsIGFjdGl2ZVR5cGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSGFuZGxlR3JhcGhUYWJDaGFuZ2UgKGdyYXBoVHlwZSkge1xuXHRpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkge1xuXHRcdHZhciBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0XG5cdFx0dmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHRcblx0XHR2YXIgcmlnaHRQYW5lbFNjcm9sbFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcFxuXHR9XG5cdGRpc2FibGVBY3RpdmVHcmFwaFRhYigpO1xuXHRlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpO1xuXHRpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApXG5cdHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIGlzR3JhcGhMaXN0RW1wdHkoKSB7XG5cdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0gPT09IHVuZGVmaW5lZFxufVxuXG5mdW5jdGlvbiBhZGp1c3RTY3JvbGxQb3NpdGlvbihvbGRHcmFwaEluZm9IZWlnaHQsIG9sZEdyYXBoRWxlbUhlaWdodCwgb2xkUmlnaHRQYW5lbFNjcm9sbFRvcCkge1xuXHR2YXIgbmV3R3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodFxuXHR2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdLnNjcm9sbEhlaWdodFxuXG5cdHZhciBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZSA9IChuZXdHcmFwaEVsZW1IZWlnaHQgLyBvbGRHcmFwaEVsZW1IZWlnaHQpXG5cdHZhciBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wID0gbmV3R3JhcGhJbmZvSGVpZ2h0ICsgKFxuXHRcdChvbGRSaWdodFBhbmVsU2Nyb2xsVG9wIC0gb2xkR3JhcGhJbmZvSGVpZ2h0KSAqIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlXG5cdClcblxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3AgPSBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wXG59XG5cbmZ1bmN0aW9uIGRpc2FibGVBY3RpdmVHcmFwaFRhYiAoKSB7XG5cdHZhciBhY3RpdmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXTtcblx0dmFyIGFjdGl2ZUNsYXNzID0gXCJncmFwaC1cIiArIGFjdGl2ZUVsZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuXG5cdGFjdGl2ZUVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVHcmFwaFRhYiAoZ3JhcGhUeXBlKSB7XG5cdGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bltkYXRhLXR5cGU9J1wiICsgZ3JhcGhUeXBlICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LmFkZChcImdyYXBoLVwiICsgZ3JhcGhUeXBlKTtcblx0ZDMuc2VsZWN0QWxsKCcuZ3JhcGgtdHlwZS1pbmZvJylcblx0LmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZ3JhcGhUeXBlID09PSB0aGlzLmlkLnNwbGl0KCctJylbMF1cblx0fSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2IChwb2kpIHtcblx0dmFyIGRlY2ltYWxQbGFjZXMgPSAzXG5cdHZhciBsYXRTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxhdCwgZGVjaW1hbFBsYWNlcylcblx0dmFyIGxuZ1Nob3J0ID0gcm91bmRGbG9hdChwb2kubG5nLCBkZWNpbWFsUGxhY2VzKVxuXHR2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHR3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRlcilcblx0dmFyIHpvb21Ub01hcmtlckJ1dHRvbiA9IG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKVxuXHR2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTGF0OiBcIiArIGxhdFNob3J0ICsgXCIsIExvbmc6IFwiICsgbG5nU2hvcnQpO1xuXHR2YXIgY29udGVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdGNvbnRlbnREaXYuY2xhc3NOYW1lID0gXCJncmFwaC1sYXQtbG9uXCI7XG5cdGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cblx0aGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbilcblx0aGVhZGVyLmFwcGVuZENoaWxkKGNvbnRlbnREaXYpO1xuXG5cdHZhciBsb2FkaW5nRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0bG9hZGluZ0Rpdi5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtbG9hZGluZy1kaXZcIik7XG5cdHdyYXBwZXIuYXBwZW5kQ2hpbGQobG9hZGluZ0Rpdik7XG5cblx0d3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKTtcblx0d3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtbG9hZGluZ1wiKTtcblx0aGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtLWhlYWRlclwiKTtcblxuXHR2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcblx0bGlzdC5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcblx0Z2V0RGF0YShwb2ksIHdyYXBwZXIpO1xuXHRyZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpIHtcblx0dmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcblx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpXG5cdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwYW4tdG8tbWFya2VyLWJ0bicpXG5cdGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2hvdyBPbiBNYXBcIlxuXHRidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChwb2ksIGUpIHtcblx0XHR2YXIgbWFwID0gR2V0TWFwKClcblx0XHRtYXAucGFuVG8oW3BvaS5sYXQsIHBvaS5sbmddKVxuXG5cdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gc2hvdyBvbiBtYXBcblx0XHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHQgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdFx0ICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHQgIGV2ZW50TGFiZWw6ICd7XCJzaG93IG9uIG1hcFwiOntcImxhdFwiOicgKyBwb2kubGF0ICsgJyxcImxvbmdcIjonKyAgcG9pLmxuZysgJ319Jyxcblx0XHQgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdH0pO1xuXG5cdH0uYmluZChidXR0b24sIHBvaSlcblx0cmV0dXJuIGJ1dHRvblxufVxuXG5mdW5jdGlvbiBkcmF3R3JhcGgoZGF0YSwgZGl2LCBwb2kpIHtcblx0ZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcblx0dmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2KTtcblx0bWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgcG9pKTtcblx0ZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBwb2kpO1xuXHRkaXYuY2xhc3NMaXN0LnJlbW92ZShcImdyYXBoLWxvYWRpbmdcIik7XG59XG5cbmZ1bmN0aW9uIHJvdW5kRmxvYXQobnVtYmVyLCBkZWNpbWFsUGxhY2VzKSB7XG5cdHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKSkgLyAoTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdikge1xuXHQvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG5cdHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOX0sXG5cdHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG5cdC8vIFNldCB0aGUgcmFuZ2VzXG5cdHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcblx0XHQuZG9tYWluKFtcblx0XHRcdHBhcnNlRGF0ZShkYXRhWzBdWzBdKSxcblx0XHRcdHBhcnNlRGF0ZShkYXRhW2RhdGEubGVuZ3RoLTFdWzBdKVxuXHRcdF0pO1xuXHR2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXG5cdFx0LmRvbWFpbihbMCwgMTAwXSk7XG5cblx0Ly8gRGVmaW5lIHRoZSBheGVzXG5cdHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcblx0XHQudGlja3MoMTYpXG5cdFx0LnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcblx0XHRcdHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG5cdFx0fSk7XG5cblx0dmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcblx0XHQudGlja3MoNik7XG5cblx0Ly8gRGVmaW5lIHRoZSBsaW5lXG5cdHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcblx0XHQueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXG5cdFx0LnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XG5cblx0dmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxuXHRcdC5hcHBlbmQoXCJkaXZcIilcblx0XHQuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XG5cblx0Ly8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHR2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcblx0XHQuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcblx0XHQuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxuXHRcdFx0dmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxuXHRcdFx0cmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoXG5cdFx0fSlcblx0XHQuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG5cdFx0LmFwcGVuZChcImdcIilcblx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cblx0c3ZnLmNhbGwodGlwKTtcblxuXHQvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuXHRkcmF3TGluZWFyUGF0aChkYXRhLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cblx0Ly8gQWRkIHRoZSBYIEF4aXNcblx0c3ZnLmFwcGVuZChcImdcIilcblx0XHQuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG5cdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuXHRcdC5jYWxsKHhBeGlzKTtcblxuXHQvLyBBZGQgdGhlIFkgQXhpc1xuXHRzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcblx0XHQuY2FsbCh5QXhpcyk7XG5cdC8qKlxuXHQgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuXHQgKi9cblx0ZHJhd0xpbmVhclBvaW50cyhkYXRhLCB2YWx1ZWxpbmUsIHN2Zyk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vIE9WRVJMQVBQSU5HIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMgKGRhdGEsIGRpdiwgcG9pKSB7XG5cdHZhciBjaGFydHMgPSB7fTtcblxuXHQvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG5cdHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOX0sXG5cdFx0d2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0XHRoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblxuXHR2YXIgYXZlcmFnZXMgPSBkYXRhLmJhc2VsaW5lO1xuXG5cdHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKVxuXHRcdC5kb21haW4oWzAsIDM2NV0pO1xuXHR2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXG5cdFx0LmRvbWFpbihbMCwgMTAwXSk7XG5cblx0Ly8gRGVmaW5lIHRoZSBheGVzXG5cdGZ1bmN0aW9uIGZvcm1hdE1vbnRoVGljayAoZCkge1xuXHRcdHJldHVybiAoTU9OVEhfTEFCRUxTWyhkLTE1KS8zMF0pO1xuXHR9XG5cdHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcblx0XHQudGlja3MoMTEpXG5cdFx0LnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKVxuXHRcdC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cblx0dmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcblx0XHQudGlja3MoNik7XG5cblx0Ly8gRGVmaW5lIHRoZSBsaW5lXG5cdHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcblx0XHQueChmdW5jdGlvbihkLCBpKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeCgoaSAqIDgpICsgMyApKTsgfSlcblx0XHQueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XG5cblx0dmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xuXG5cdC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcblx0dmFyIHN2ZyA9IHdyYXBwZXJcblx0XHQuYXBwZW5kKFwic3ZnXCIpXG5cdFx0XHQuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0XG5cdFx0XHRcdHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b21cblx0XHRcdFx0cmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoXG5cdFx0XHR9KVxuXHRcdFx0LmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuXHRcdFx0Ly8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG5cdFx0XHQvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuXHRcdC5hcHBlbmQoXCJnXCIpXG5cdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLFxuXHRcdFx0XHQgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cblx0c3ZnLmNhbGwodGlwKTtcblxuXHQvLyBBZGQgdGhlIFggQXhpc1xuXHRzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcblx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG5cdFx0LmNhbGwoeEF4aXMpO1xuXG5cdC8vIEFkZCB0aGUgWSBBeGlzXG5cdHN2Zy5hcHBlbmQoXCJnXCIpXG5cdFx0LmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuXHRcdC5jYWxsKHlBeGlzKTtcblxuXHR2YXIgcGxvdCwgaSwgbDtcblx0Zm9yIChpID0gMCwgbCA9IHBvaS5wbG90cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRwbG90ID0gcG9pLnBsb3RzW2ldO1xuXHRcdGlmIChwbG90ID09PSBcInRocmVzaG9sZHNcIikgY29udGludWU7XG5cdFx0Y2hhcnRzW3Bsb3RdID0ge1xuXHRcdFx0XCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW3Bsb3RdLCB2YWx1ZWxpbmUsIHN2Zylcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICovXG5cdGZvciAoaSA9IDAsIGwgPSBwb2kucGxvdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0cGxvdCA9IHBvaS5wbG90c1tpXTtcblx0XHRpZiAocGxvdCA9PT0gXCJ0aHJlc2hvbGRzXCIpIGNvbnRpbnVlO1xuXHRcdGNoYXJ0c1twbG90XS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbcGxvdF0sIHZhbHVlbGluZSwgc3ZnKTtcblx0fVxuXG5cdHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblxuXHRkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0Y3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwib3ZlcmxhcHBpbmdcIiwgcG9pLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdH0pO1xuXG5cdGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJiYXNlbGluZVwiLCBcIm92ZXJsYXBwaW5nXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyAoZGF0YSwgZGl2LCBwb2kpIHtcblx0dmFyIHdpZHRoID0gNDkwLFxuXHRcdGhlaWdodCA9IDQ5MCxcblx0XHRyYWRpdXMgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KSAvIDIgLSAzMDtcblxuXHR2YXIgYXZlcmFnZXMgPSBkYXRhW1wiYmFzZWxpbmVcIl07XG5cdHZhciBjZW50ZXIgPSBmaW5kUG9sYXJDZW50ZXIoZGF0YSk7XG5cdHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblxuXHQvKipcblx0ICogU2V0cyB1cCBzY2FsaW5nIG9mIGRhdGEuIFdlIGtub3cgdGhhdCB0aGUgbmR2aSB2YWx1ZXMgZmFsbCBiZXR3ZWVuXG5cdCAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxuXHQgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxuXHQgKiByYWRpdXMuXG5cdCAqL1xuXHR2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcblx0XHQuZG9tYWluKFswLCAxMDBdKVxuXHRcdC5yYW5nZShbMCwgcmFkaXVzXSk7XG5cblx0LyoqXG5cdCAqIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZHJhdyBlYWNoIHBvaW50LiBUbyBjb21wdXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZVxuXHQgKiBjZW50ZXIgZWFjaCBwb2ludCBpcyB3ZSBwYXNzIHRoZSBkYXRhcG9pbnQgdG8gdGhlIGZ1bmN0aW9uIGRlZmluZWQgYWJvdmUuXG5cdCAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG5cdCAqIHJhZGlhbnMsIHNvIHdlIGNvbnZlcnQgdGhlIGRheSB0byBhIG51bWJlciBiZXR3ZWVuIDAgJiAxIGFuZCB0aGVuIG11bHRpcGx5XG5cdCAqIGl0IGJ5IDIgcGkuXG5cdCAqL1xuXHR2YXIgbGluZSA9IGQzLnJhZGlhbExpbmUoKVxuXHRcdC5yYWRpdXMoZnVuY3Rpb24oZCkgeyByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHIoZFsxXSkgOiByKGQpOyB9KVxuXHRcdC5hbmdsZShmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHR2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogKGkgKiA4KSArIDM7XG5cdFx0XHRyZXR1cm4gKCgoKGRheSAtIDEpJTM2NSkvMzY1KSAqICgyKk1hdGguUEkpKTtcblx0XHR9KTtcblxuXHQvKipcblx0ICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cblx0ICovXG5cdHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJwb2xhci1ncmFwaFwiLCB0cnVlKTtcblx0dmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdFx0Ly8uYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuXHRcdC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuXHRcdC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuICcwIDAgJysgd2lkdGggKyAnICcgKyBoZWlnaHRcblx0XHR9KVxuXHRcdC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcblx0XHQuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgd2lkdGggLyAyICsgXCIsXCIgKyBoZWlnaHQgLyAyICsgXCIpXCIpO1xuXG5cdHN2Zy5jYWxsKHRpcCk7XG5cblx0LyoqXG5cdCAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXG5cdCAqL1xuXHR2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJyIGF4aXNcIilcblx0XHQuc2VsZWN0QWxsKFwiZ1wiKVxuXHRcdC5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpXG5cdFx0LmVudGVyKCkuYXBwZW5kKFwiZ1wiKTtcblxuXHRnci5hcHBlbmQoXCJjaXJjbGVcIilcblx0XHQuYXR0cihcInJcIiwgcik7XG5cblx0Z3IuYXBwZW5kKFwidGV4dFwiKVxuXHRcdC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAtcihkKSAtIDQ7IH0pXG5cdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpXG5cdFx0LnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcblx0XHQudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KTtcblxuXHQvKipcblx0ICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xuXHQgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuXHQgKi9cblx0dmFyIGdhX2EgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIilcblx0XHQuc2VsZWN0QWxsKFwiZ1wiKVxuXHRcdC5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKVxuXHRcdC5lbnRlcigpLmFwcGVuZChcImdcIilcblx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XG5cblx0Z2FfYS5hcHBlbmQoXCJsaW5lXCIpXG5cdFx0LmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXG5cdGdhX2EuYXBwZW5kKFwidGV4dFwiKVxuXHRcdC5hdHRyKFwieFwiLCByYWRpdXMgKyA2KVxuXHRcdC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuXHRcdC5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwiZW5kXCIgOiBudWxsOyB9KVxuXHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsOyB9KVxuXHRcdC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1PTlRIX0xBQkVMU1tkLzMwXTsgfSk7XG5cblx0LyoqXG5cdCAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcblx0ICovXG5cdHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIilcblx0XHQuc2VsZWN0QWxsKFwiZ1wiKVxuXHRcdC5kYXRhKHRocmVzaG9sZHMpXG5cdFx0LmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7IH0pO1xuXG5cdHRocmVzaG9sZEVsZW0uYXBwZW5kKFwibGluZVwiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG5cdFx0LmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXG5cdHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKVxuXHRcdC5hdHRyKFwieFwiLCBmdW5jdGlvbiAoZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IHJhZGl1cyArIDMwIDogcmFkaXVzIC0gMzB9KVxuXHRcdC5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gKCgoKGQuZGF0YVsxXVswXSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpICsgNjsgfSlcblx0XHQuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcblx0XHQuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJtaWRkbGVcIiA6IG51bGw7IH0pXG5cdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsOyB9KVxuXHRcdC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubGFiZWw7IH0pO1xuXG5cdHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsIChwb2kucGxvdHMuaW5kZXhPZihcInRocmVzaG9sZHNcIikgIT09IC0xKSA/IDEgOiAwKTtcblxuXHQvKipcblx0ICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxuXHQgKi9cblx0dmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcblx0dmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArICgzNjUvMikpICUgMzY1O1xuXHR2YXIgY2VudGVyRGF5RGF0YSA9IFtjZW50ZXJEYXksIDEwMF07XG5cdHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XG5cdHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdXG5cblx0ZHJhd1BvbGFyUGF0aChncm93aW5nU2Vhc29uRGF0YSwgbGluZSwgc3ZnKVxuXHRcdC5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cblx0ZHJhd1BvbGFyUGF0aChjZW50ZXIsIGxpbmUsIHN2Zylcblx0XHQuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblxuXHRzdmcuc2VsZWN0QWxsKFwicG9pbnRcIilcblx0XHQuZGF0YShbY2VudGVyWzFdXSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoXCJjaXJjbGVcIilcblx0XHQuYXR0cihcImNsYXNzXCIsIFwiY2VudGVyXCIpXG5cdFx0LmF0dHIoXCJyXCIsIDQpXG5cdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0dmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0XHRcdHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcblx0XHR9KVxuXHRcdC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuXHRcdC5hdHRyKFwiZmlsbFwiLCBcIiNlYTBjNDhcIilcblx0XHQub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0dGlwLnNob3coXCJDZW50ZXI6IFwiICArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuXHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpXG5cdFx0fSlcblx0XHQub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0dGlwLmhpZGUoKTtcblx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA0KVxuXHRcdH0pO1xuXG5cdHZhciBjaGFydHMgPSB7fTtcblxuXHQvKipcblx0ICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuXHQgKi9cblx0dmFyIHBsb3QsIGksIGw7XG5cdGZvciAoaSA9IDAsIGwgPSBwb2kucGxvdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0cGxvdCA9IHBvaS5wbG90c1tpXTtcblx0XHRpZiAocGxvdCA9PT0gXCJ0aHJlc2hvbGRzXCIpIGNvbnRpbnVlO1xuXHRcdGNoYXJ0c1twbG90XSA9IHtcblx0XHRcdFwicGF0aFwiIDogZHJhd1BvbGFyUGF0aChkYXRhW3Bsb3RdLCBsaW5lLCBzdmcpXG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAqL1xuXHRmb3IgKGkgPSAwLCBsID0gcG9pLnBsb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdHBsb3QgPSBwb2kucGxvdHNbaV07XG5cdFx0aWYgKHBsb3QgPT09IFwidGhyZXNob2xkc1wiKSBjb250aW51ZTtcblx0XHRjaGFydHNbcGxvdF0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3Bsb3RdLCBsaW5lLCBzdmcpO1xuXHR9XG5cblx0dmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXG5cdGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJwb2xhclwiLCBwb2ksIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdH0pO1xuXG5cdGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJiYXNlbGluZVwiLCBcInBvbGFyXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblxuXHR2YXIgdGhyZXNob2xkQ2hlY2tib3g9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIilcblx0XHQuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcblxuXHR0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKVxuXHRcdC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG5cdFx0LmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIHBvaS5sYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgcG9pLmxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxuXHRcdC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgcG9pLnBsb3RzLmluZGV4T2YoXCJ0aHJlc2hvbGRzXCIpICE9PSAtMSlcblx0XHQub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsICh0aGlzLmNoZWNrZWQpID8gMSA6IDApO1xuXHRcdFx0dmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xuXG5cdFx0XHRpZiAodGhpcy5jaGVja2VkKSB7XG5cdFx0XHRcdGFkZEtleVRvUE9JKHBvaSwgXCJ0aHJlc2hvbGRzXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlS2V5RnJvbVBPSShwb2ksIFwidGhyZXNob2xkc1wiKTtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlU2hhcmVVcmwoKTtcblx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHRocmVzaG9sZCBjbGljayBvZmZcblx0XHRcdGRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrKCd0aHJlc2hvbGQgcG9sYXIgdGltZXNlcmllcyAnICsgb2Zmb24pO1xuXHRcdH0pO1xuXG5cdHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpXG5cdFx0LnRleHQoXCJUaHJlc2hvbGRzXCIpXG5cdFx0LmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBwb2kubGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIHBvaS5sbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG59XG5cbi8qIFBPTEFSIEdSQVBIIEhFTFBFUlMgKi9cblxuZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyIChkYXRhKSB7XG5cdHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0dmFyIHRvdGFsU3VtID0gMDtcblx0dmFyIGluY29tcGxldGVZZWFycyA9IDA7XG5cdHZhciBzdW07XG5cdGxlbmd0aCA9IDQ2O1xuXG5cdGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdFx0aWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHRcdFx0aW5jb21wbGV0ZVllYXJzKys7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0c3VtID0gMDtcblx0XHRmb3IgKGogPSAwOyBqIDwgbGVuZ3RoLzI7IGorKykge1xuXHRcdFx0c3VtICs9IChhcnJbal1bMV0gLSBhcnJbaisyM11bMV0pO1xuXHRcdH1cblx0XHRzdW0gPSBzdW0gLyAyMztcblx0XHR0b3RhbFN1bSArPSBzdW07XG5cdH1cblx0dG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XG5cblx0dmFyIGFyZWFEaWZmID0gMTAwMDAwMDtcblx0dmFyIGNoZWNrRGlmZjtcblx0dmFyIGFyZWFJbmRleCA9IDA7XG5cdHZhciBsZWZ0QXJlYSwgcmlnaHRBcmVhO1xuXHR2YXIgYXZncyA9IGRhdGEuYmFzZWxpbmU7XG5cdHZhciBrLCBjb3VudGVyO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBsZW5ndGgvMjsgaSsrKSB7XG5cdFx0bGVmdEFyZWEgPSAwO1xuXHRcdHJpZ2h0QXJlYSA9IDA7XG5cdFx0Zm9yIChjb3VudGVyID0gMDsgY291bnRlciA8IGxlbmd0aC8yOyBjb3VudGVyKyspIHtcblx0XHRcdGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG5cdFx0XHRrID0gKGogKyAyMykgJSA0NjtcblxuXHRcdFx0bGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuXHRcdFx0cmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sMTApO1xuXHRcdH1cblx0XHRjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XG5cdFx0aWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG5cdFx0XHRhcmVhRGlmZiA9IGNoZWNrRGlmZjtcblx0XHRcdGFyZWFJbmRleCA9IGk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIGZpcnN0UmFkaXVzID0gcGFyc2VJbnQoYXZnc1thcmVhSW5kZXhdLCAxMCk7XG5cdHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblxuXHR2YXIgbWlkcG9pbnQgPSAoZmlyc3RSYWRpdXMgKyBzZWNvbmRSYWRpdXMpIC8gMjtcblx0dmFyIGZpcnN0RGlmZiA9IE1hdGguYWJzKHRvdGFsU3VtIC0gbWlkcG9pbnQpO1xuXHR2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIG1pZHBvaW50KTtcblx0aWYgKHNlY29uZERpZmYgPCBmaXJzdERpZmYpIHtcblx0XHRhcmVhSW5kZXggPSBhcmVhSW5kZXggKyAyMztcblx0fVxuXG5cdHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG5cdHZhciBkYXRhY2VudGVyID0gWyhhcmVhSW5kZXggKiA4KSArIDMsIHRvdGFsU3VtXTtcblxuXHRyZXR1cm4oW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl0pO1xufVxuXG4vKipcbiAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaXQgc2hvdWxkIGJlIGZsaXBwZWRcbiAqL1xuZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyAoZGF0YSwgc3RhcnREYXkpIHtcblx0dmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG5cdHN0YXJ0SW5kZXggKz0gKHN0YXJ0SW5kZXggPiAyMikgPyAoLTIzKSA6IDIzO1xuXHR2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdHZhciB0b3RhbFN1bSA9IDA7XG5cdHZhciBzdW07XG5cdGxlbmd0aCA9IDQ2O1xuXG5cdGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHRcdHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0fVxuXG5cdHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG5cdHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcblx0dmFyIGZpZnRlZW5JbmRleEZvdW5kID0gZmFsc2UsXG5cdFx0ZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlO1xuXHR2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleDtcblxuXHR0b3RhbFN1bSA9IDA7XG5cdGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHRcdHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0XHRpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuXHRcdFx0ZmlmdGVlbkluZGV4ID0gajtcblx0XHRcdGZpZnRlZW5JbmRleEZvdW5kID0gdHJ1ZTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcblx0XHRcdGVpZ2h0eUluZGV4ID0gajtcblx0XHRcdGVpZ2h0eUluZGV4Rm91bmQgPSB0cnVlO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHR9XG5cblx0dmFyIGNpcmNsZUNlbnRlciA9IFswLCAwXTtcblxuXHR2YXIgZmlmdGVlbkVuZCA9IFsoZmlmdGVlbkluZGV4ICogOCkgKyAzLCAxMDBdO1xuXHR2YXIgZWlnaHR5RW5kID0gWyhlaWdodHlJbmRleCAqIDgpICsgMywgMTAwXTtcblxuXHRyZXR1cm4gW1xuXHRcdHtcblx0XHRcdFwibGFiZWxcIiA6IFwiMTUlXCIsXG5cdFx0XHRcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGZpZnRlZW5FbmRdXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRcImxhYmVsXCIgOiBcIjgwJVwiLFxuXHRcdFx0XCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG5cdFx0fVxuXHRdO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0cmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXG5cdFx0LmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcblx0XHQuYXR0cihcImRcIiwgbGluZShkYXRhKSk7XG59XG5cbmZ1bmN0aW9uIGRyYXdQb2xhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxuXHRcdC5kYXR1bShkYXRhKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG5cdFx0LmF0dHIoXCJkXCIsIGxpbmUpO1xufVxuXG5mdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2Zykge1xuXHRyZXR1cm4gc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXG5cdFx0LmRhdGEoZGF0YSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoXCJjaXJjbGVcIilcblx0XHQuYXR0cihcInJcIiwgMilcblx0XHQuYXR0cihcImNsYXNzXCIsIFwicG9pbnRcIilcblx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHR2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xuXHRcdFx0dmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG5cdFx0XHRyZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXG5cdFx0fSlcblx0XHQvLy5hdHRyKFwiclwiLCAzKVxuXHRcdC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuXHRcdC5hdHRyKFwiZmlsbFwiLGZ1bmN0aW9uKGQsaSl7XG5cdFx0XHR2YXIgdmFsID0gQXJyYXkuaXNBcnJheShkKSA/IGRbMF0uc3Vic3RyaW5nKDAsIDQpIDogMDtcblx0XHRcdHJldHVybiBwdWxsRGlzdGluY3RDb2xvcih2YWwpXG5cdFx0fSlcblx0XHQub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpXG5cdFx0Lm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcblx0dmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XG5cdHRpcC5zaG93KHRpcFN0cmluZyk7XG5cdHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCBcIjRcIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xuXHR0aXAuaGlkZSgpO1xuXHR0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCIyXCIpO1xuXG5cdHZhciBhY3RpdmVUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuXG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXG5cdC8vIHdlIG1pc3MgYSBmZXcgYnV0IHRoYXQgaXMgYmV0dGVyIHRoYW4gb3ZlciBjb3VudGluZy5cblx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICBldmVudEFjdGlvbjogJ2hvdmVyJyxcblx0ICBldmVudExhYmVsOiBhY3RpdmVUeXBlICsgJyB0b29sIHRpcCcsXG5cdCAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHBvaSwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKSB7XG5cdHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0dmFyIGxhdCA9IHBvaS5sYXQ7XG5cdHZhciBsbmcgPSBwb2kubG5nO1xuXG5cdGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuXHRcdC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG5cdFx0LmF0dHIoXCJpZFwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXG5cdFx0LmF0dHIoXCJkYXRhLWxpbmtcIiwga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxuXHRcdC5hdHRyKFwidmFsdWVcIiwga2V5KVxuXHRcdC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKHBvaS5wbG90cy5pbmRleE9mKGtleSkgIT09IC0xKSA/IHRydWUgOiBmYWxzZSlcblx0XHQub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0XHRcdGlmICghdGhpcy5jaGVja2VkKSB7XG5cdFx0XHRcdGhhbmRsZUNoZWNrYm94RGlzYWJsZShjaGFydHMsIG5ld1llYXIpO1xuXHRcdFx0XHRyZW1vdmVLZXlGcm9tUE9JKHBvaSwga2V5KTtcblx0XHRcdFx0Ly9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcblx0XHRcdFx0ZGlzcGF0Y2hHcmFwaENoZWNrYm94Q2xpY2sobmV3WWVhciArICcgJyArIHR5cGUgKyAnIHRpbWVzZXJpZXMgb2ZmJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoYW5kbGVDaGVja2JveEVuYWJsZShjaGFydHMsIG5ld1llYXIsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcdFx0XHRhZGRLZXlUb1BPSShwb2ksIGtleSk7XG5cdFx0XHRcdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb25cblx0XHRcdFx0ZGlzcGF0Y2hHcmFwaENoZWNrYm94Q2xpY2sobmV3WWVhciArICcgJyArIHR5cGUgKyAnIHRpbWVzZXJpZXMgb24nKTtcblx0XHRcdH1cblx0XHRcdGhhbmRsZUNoZWNrYm94U3luYyhrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIiksIHRoaXMuY2hlY2tlZCk7XG5cdFx0XHR1cGRhdGVTaGFyZVVybCgpO1xuXHRcdH0pO1xuXG5cdGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxuXHRcdC50ZXh0KGtleSAhPT0gXCJiYXNlbGluZVwiID8ga2V5IDogXCJCYXNlbGluZVwiKVxuXHRcdC5hdHRyKFwiZm9yXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cblx0Y2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKVxuXHRcdC5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcImJhc2VsaW5lXCIgPyBrZXkgOiAwKSlcblx0XHQuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDaGVja2JveERpc2FibGUgKGNoYXJ0cywgbmV3WWVhcikge1xuXHRjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0Y2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2hlY2tib3hFbmFibGUgKGNoYXJ0cywgbmV3WWVhciwgZGF0YSwgbGluZSwgc3ZnKSB7XG5cdGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdFx0Y2hhcnRzW25ld1llYXJdID0ge307XG5cdH1cblx0Y2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHRjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDaGVja2JveFN5bmMgKGtleSwgY2hlY2tlZFN0YXR1cywgd3JhcHBlcikge1xuXHRkMy5zZWxlY3RBbGwoXCJpbnB1dFtkYXRhLWxpbms9J1wiICsga2V5ICsgXCInXVwiKS5lYWNoKGZ1bmN0aW9uIChwLCBqKSB7XG5cdFx0dmFyIGVsZW0gPSBkMy5zZWxlY3QodGhpcyk7XG5cdFx0aWYgKGVsZW0ucHJvcGVydHkoXCJjaGVja2VkXCIpICE9PSBjaGVja2VkU3RhdHVzKSB7XG5cdFx0XHRlbGVtLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBjaGVja2VkU3RhdHVzKTtcblx0XHRcdGVsZW0uZGlzcGF0Y2goXCJjaGFuZ2VcIik7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlS2V5RnJvbVBPSSAocG9pLCBrZXkpIHtcblx0dmFyIGluZGV4ID0gcG9pLnBsb3RzLmluZGV4T2Yoa2V5KTtcblx0aWYgKGluZGV4ID09PSAtMSkgcmV0dXJuO1xuXHRwb2kucGxvdHMuc3BsaWNlKGluZGV4LCAxKTtcbn1cblxuZnVuY3Rpb24gYWRkS2V5VG9QT0kgKHBvaSwga2V5KSB7XG5cdGlmIChwb2kucGxvdHMuaW5kZXhPZihrZXkpICE9PSAtMSkgcmV0dXJuO1xuXHRwb2kucGxvdHMucHVzaChrZXkpO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaEdyYXBoQ2hlY2tib3hDbGljayAobGFiZWwpIHtcblx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0ZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0XHRldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0XHRldmVudExhYmVsOiAgbGFiZWwsXG5cdFx0bm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdH0pO1xufVxuXG5mdW5jdGlvbiBwdWxsRGlzdGluY3RDb2xvciAoeWVhcikge1xuXHR2YXIgY29sb3JSYW1wID0gW1xuXHRcdFwiI2ZmZTQ3NlwiLFxuXHRcdFwiIzAzNjU5M1wiLFxuXHRcdFwiIzExNmM5MVwiLFxuXHRcdFwiIzFlNzM5MFwiLFxuXHRcdFwiIzJjN2I4ZVwiLFxuXHRcdFwiIzM5ODI4Y1wiLFxuXHRcdFwiIzRjOGM4YVwiLFxuXHRcdFwiIzVlOTU4OVwiLFxuXHRcdFwiIzcxOWY4N1wiLFxuXHRcdFwiIzgzYTg4NlwiLFxuXHRcdFwiIzk1YjE4M1wiLFxuXHRcdFwiI2E2YmE4MFwiLFxuXHRcdFwiI2I4YzM3Y1wiLFxuXHRcdFwiI2NhY2M3OVwiLFxuXHRcdFwiI2Q2ZDI3OVwiLFxuXHRcdFwiI2UyZDc3OVwiLFxuXHRcdFwiI2VmZGQ3OFwiLFxuXHRcdFwiI2ZiZTM3OFwiXG5cdF07XG5cblx0cmV0dXJuICh5ZWFyID09PSAwKSA/IFwiI2ZmZlwiIDogY29sb3JSYW1wW3BhcnNlSW50KHllYXIsIDEwKSAlIGNvbG9yUmFtcC5sZW5ndGhdO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gcGFyc2VEYXRlIChkYXRlKSB7XG5cdGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG5cdHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG5cdHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xuXHR2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cblx0cmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUp1bGlhbkRheSAoZGF0ZSkge1xuXHRpZiAodHlwZW9mKGRhdGUpID09PSBcInN0cmluZ1wiKSB7XG5cdFx0ZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0XHRyZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gZGF0ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBmb3JtYXREYXRlIChkYXRlKSB7XG5cdGlmIChkYXRlID09PSBcIkF2ZXJhZ2VcIikgeyByZXR1cm4gZGF0ZTsgfVxuXG5cdGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG5cdHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xuXHRyZXR1cm4gRk9STUFUVEVEX01PTlRIX0xBQkVMU1ttb250aF07XG59XG5cbmZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xuXHR2YXIgaiA9IGRheSAlIDEwLFxuXHRcdGsgPSBkYXkgJSAxMDA7XG5cdGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG5cdFx0cmV0dXJuIGRheSArIFwic3RcIjtcblx0fVxuXHRpZiAoaiA9PT0gMiAmJiBrICE9PSAxMikge1xuXHRcdHJldHVybiBkYXkgKyBcIm5kXCI7XG5cdH1cblx0aWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcblx0XHRyZXR1cm4gZGF5ICsgXCJyZFwiO1xuXHR9XG5cdHJldHVybiBkYXkgKyBcInRoXCI7XG59XG5cbnZhciBNT05USF9MQUJFTFMgPSB7XG5cdDA6IFwiSmFuXCIsXG5cdDE6IFwiRmViXCIsXG5cdDI6IFwiTWFyXCIsXG5cdDM6IFwiQXByXCIsXG5cdDQ6IFwiTWF5XCIsXG5cdDU6IFwiSnVuXCIsXG5cdDY6IFwiSnVsXCIsXG5cdDc6IFwiQXVnXCIsXG5cdDg6IFwiU2VwXCIsXG5cdDk6IFwiT2N0XCIsXG5cdDEwOiBcIk5vdlwiLFxuXHQxMTogXCJEZWNcIlxufTtcblxudmFyIEZPUk1BVFRFRF9NT05USF9MQUJFTFMgPSB7XG5cdDA6IFwiSmFuLlwiLFxuXHQxOiBcIkZlYi5cIixcblx0MjogXCJNYXIuXCIsXG5cdDM6IFwiQXByLlwiLFxuXHQ0OiBcIk1heVwiLFxuXHQ1OiBcIkp1bi5cIixcblx0NjogXCJKdWwuXCIsXG5cdDc6IFwiQXVnLlwiLFxuXHQ4OiBcIlNlcC5cIixcblx0OTogXCJPY3QuXCIsXG5cdDEwOiBcIk5vdi5cIixcblx0MTE6IFwiRGVjLlwiXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSAnLi9tYXAnO1xuaW1wb3J0IHtCQVNFX0xBWUVSX1RZUEV9IGZyb20gJy4vYmFzZWxheWVyJztcbmltcG9ydCB7R2V0Q3VycmVudExheWVyc30gZnJvbSAnLi9sYXllcic7XG5pbXBvcnQge0dldEFsbFBvaW50c09mSW50ZXJlc3QsIGNyZWF0ZVBPSX0gZnJvbSAnLi9wb2knO1xuaW1wb3J0IHtHZXRBY3RpdmVMYXllckdyb3Vwc30gZnJvbSAnLi9wYW5lbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwgKG1hcCkge1xuXHRtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsIChlKSB7XG5cdHZhciBtYXAgPSBHZXRNYXAoKTtcblxuXHR2YXIgcGFyYW1zID0gW1xuXHRcdG1ha2VDZW50ZXJTdHJpbmcobWFwKSxcblx0XHRtYWtlWm9vbVN0cmluZyhtYXApLFxuXHRcdG1ha2VMYXllclN0cmluZyhtYXApLFxuXHRcdG1ha2VMYXllckdyb3Vwc1N0cmluZygpLFxuXHRcdG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSxcblx0XHRtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZygpLFxuXHRcdG1ha2VBY3RpdmVUYWJTdHJpbmcoKSxcblx0XHRtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKVxuXHRdO1xuXG5cdHNldFNoYXJlVXJsKG1ha2VTaGFyZVVybChwYXJhbXMpKTtcblx0c2V0Q29weUxpbmtVcmwoKTtcblx0c2V0U29jaWFsVXJscygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIChjb25maWcpIHtcblx0dmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xuXHRpZiAoIXNoYXJlKSByZXR1cm47XG5cdGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xuXHRpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC56b29tID0gc2hhcmUuem9vbTtcblx0aWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcblx0aWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcblx0aWYgKHNoYXJlLnBvaXMpIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhzaGFyZS5wb2lzLCBjb25maWcpXG5cdGlmIChzaGFyZS50YWIpIGNvbmZpZy50YWIgPSBzaGFyZS50YWI7XG5cdGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG5cdGlmIChzaGFyZS5sYXllckdyb3VwcykgY29uZmlnLmxheWVyR3JvdXBzID0gYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJHcm91cHMsIGNvbmZpZylcbn1cblxuZnVuY3Rpb24gbWFrZVNoYXJlVXJsIChwYXJhbXMpIHtcblx0cmV0dXJuIFwiP1wiICsgcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gdW5kZWZpbmVkIH0pLmpvaW4oXCImXCIpO1xufVxuXG5mdW5jdGlvbiBzZXRTaGFyZVVybCAodXJsKSB7XG5cdGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0XHR3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0Q29weUxpbmtVcmwgKCkge1xuXHR2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdXJsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRDb3B5TGlua0V2ZW50cyAoKSB7XG5cdGQzLnNlbGVjdChkb2N1bWVudCkub24oXCJjbGlja1wiLCBoYW5kbGVCb2R5Q2xpY2spO1xuXHRkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluayBhXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2spO1xuXHRkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay11cmxcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayk7XG5cdGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rLXBvcHVwLXJlbW92ZXJcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrKTtcbn1cblxuLyoqXG4gKiBTaG91bGQgY2xvc2UgdGhlIGNvcHkgbGluayBwb3B1cCBpZiBpdCBpcyBhY3RpdmUgYW5kIGlmIHlvdSBjbGljayBvbiBhbnkgZWxlbWVudFxuICogdGhhdCBpcyBub3QgdGhlIHBvcHVwIG9yIGl0cyBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrICgpIHtcblx0dmFyIGV2ZW50ID0gZDMuZXZlbnQ7XG5cdHZhciBub2RlUGF0aCA9IFtdXG5cdG5vZGVQYXRoID0gZ2V0RG9tUGF0aChldmVudC50YXJnZXQpXG5cblx0dmFyIHRvQ2xvc2VQb3B1cCA9IHRydWU7XG5cdHZhciBpLCBsO1xuXG5cdGZvciAoaSA9IDAsIGwgPSBub2RlUGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKG5vZGVQYXRoW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2hhcmV1cmwtbGluay1wb3B1cCcpIHx8XG5cdFx0XHRcdFx0bm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rJykpIHtcblx0XHRcdFx0dG9DbG9zZVBvcHVwID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fSAgICAgICAgICAgIFxuXHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0Ly8gY2xpY2tpbmcgc3ZnIHRocm93cyBhbiBlcnJvciBpbiBJRVxuXHRcdH1cblx0fVxuXG5cdGlmICh0b0Nsb3NlUG9wdXApIHtcblx0XHR2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NoYXJldXJsLWxpbmstcG9wdXAnKS5pdGVtKDApXG5cdFx0aGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXREb21QYXRoKG5vZGUpIHtcblx0dmFyIHBhdGggPSBbXVxuXHR3aGlsZSAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcblx0XHRwYXRoLnB1c2gobm9kZSlcblx0XHRub2RlID0gbm9kZS5wYXJlbnROb2RlXG5cdH1cblx0cmV0dXJuIHBhdGhcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2sgKCkge1xuXHR2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpLml0ZW0oMClcblx0aWYgKGQzLnNlbGVjdChzaGFyZVBvcHVwKS5jbGFzc2VkKFwiYWN0aXZlXCIpKSB7XG5cdFx0aGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKVxuXHR9IGVsc2Uge1xuXHRcdGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKTtcblx0fVxufVxuXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrICgpIHtcblx0dmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApXG5cdGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua1VybENsaWNrICgpIHtcblx0c2VsZWN0Q29weUxpbmtVcmwoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtPcGVuIChzaGFyZVBvcHVwKSB7XG5cdHNoYXJlUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKVxuXHRzZWxlY3RDb3B5TGlua1VybCgpO1xuXG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybFxuXHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHQgIGV2ZW50QWN0aW9uOiAnb3BlbicsXG5cdCAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcblx0ICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0fSk7XG5cbn1cblxuZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtDbG9zZSAoc2hhcmVQb3B1cCkge1xuXG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybCBjbG9zZVxuXHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHQgIGV2ZW50QWN0aW9uOiAnY2xvc2UnLFxuXHQgIGV2ZW50TGFiZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksXG5cdCAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdH0pO1xuXG5cdHNoYXJlUG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxufVxuXG5mdW5jdGlvbiBzZWxlY3RDb3B5TGlua1VybCAoKSB7XG5cdHZhciBzaGFyZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKTtcblx0c2hhcmVJbnB1dC5mb2N1cygpO1xuXHRzaGFyZUlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIHNoYXJlSW5wdXQudmFsdWUubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gc2V0U29jaWFsVXJscyAoKSB7XG5cdHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cdHZhciBzb2NpYWxMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1zb2NpYWxcIik7XG5cdHZhciBzb2NpYWxMaW5rO1xuXHR2YXIgbmV3VXJsO1xuXHR2YXIgaSwgbDtcblxuXHRmb3IgKGkgPSAwLCBsID0gc29jaWFsTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0c29jaWFsTGluayA9IHNvY2lhbExpbmtzW2ldO1xuXG5cdFx0bmV3VXJsID0gc29jaWFsTGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhc2V1cmxcIikgKyB1cmw7XG5cdFx0c29jaWFsTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybCk7XG5cblx0XHQvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBmb3Igc29jaWFsIHVybHNcblx0XHRzb2NpYWxMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHQgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHRcdFx0ZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcblx0XHRcdGV2ZW50QWN0aW9uOiB0aGlzLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiksXG5cdFx0XHRldmVudExhYmVsOiB0aGlzLmhyZWYsXG5cdFx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0XHQgIH0pO1xuXG5cdFx0fSk7XG5cblx0fVxufVxuXG5mdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nIChtYXApIHtcblx0dmFyIGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcblx0cmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nIChtYXApIHtcblx0cmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyAobWFwKSB7XG5cdHZhciBsYXllcnMgPSBbXTtcblx0dmFyIG9wYWNpdHlWYWxzID0ge307XG5cdHZhciBjdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycygpO1xuXG5cdG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSBsYXllci5vcHRpb25zO1xuXHRcdGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XG5cdFx0XHRvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xuXHRcdH1cblx0fSk7XG5cblx0dmFyIGN1cnJlbnRMYXllcjtcblx0dmFyIGk7XG5cdGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y3VycmVudExheWVyID0gY3VycmVudExheWVyc1tpXTtcblx0XHRsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuXHRcdGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xuXHR9XG5cdHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyAobWFwKSB7XG5cdHZhciBsYXllcnMgPSBbXTtcblx0bWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0XHRpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IEJBU0VfTEFZRVJfVFlQRSkge1xuXHRcdFx0bGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzU3RyaW5nICgpIHtcblx0dmFyIGFjdGl2ZUxheWVyR3JvdXBzID0gR2V0QWN0aXZlTGF5ZXJHcm91cHMoKVxuXHRyZXR1cm4gXCJsYXllckdyb3Vwcz1cIithY3RpdmVMYXllckdyb3Vwcy5tYXAoZCA9PiBkLmlkKS5qb2luKCcsJylcbn1cblxuZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcgKCkge1xuXHR2YXIgcG9pcyA9IEdldEFsbFBvaW50c09mSW50ZXJlc3QoKVxuXHRpZiAoIXBvaXMubGVuZ3RoKSByZXR1cm47XG5cdHZhciBwb2lTdHJpbmcgPSBcInBvaXM9XCI7XG5cdHBvaXMuZm9yRWFjaChwb2kgPT4ge1xuXHRcdHBvaVN0cmluZyArPSBwb2kubGF0ICsgJywnICsgcG9pLmxuZztcblx0XHRpZiAocG9pLnBsb3RzICYmIHBvaS5wbG90cy5sZW5ndGgpIHtcblx0XHRcdHBvaVN0cmluZyArPSAnLCcgKyBwb2kucGxvdHMuam9pbignLCcpO1xuXHRcdH1cblx0XHRwb2lTdHJpbmcgKz0gJzsnO1xuXHR9KVxuXHRyZXR1cm4gcG9pU3RyaW5nO1xufVxuXG5mdW5jdGlvbiBtYWtlQWN0aXZlVGFiU3RyaW5nICgpIHtcblx0cmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nICgpIHtcblx0cmV0dXJuIFwiZ3JhcGg9XCIgKyBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XG59XG5cbmZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwgKCkge1xuXHR2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblx0aWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXG5cdHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XG5cdHBhcmFtcyA9IG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXMpO1xuXG5cdGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJhbXNBcnJheSAocGFyYW1zKSB7XG5cdHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XG5cdHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcblx0cmV0dXJuIHBhcmFtcy5zcGxpdChcIiZcIik7XG59XG5cbmZ1bmN0aW9uIG1hbmdsZVBhcmFtU3RyaW5nICh1cmwpIHtcblx0cmV0dXJuIHVybC5yZXBsYWNlKC9cXDovZywgXCIlM0FcIilcblx0XHQucmVwbGFjZSgvXFw7L2csIFwiJTNCXCIpXG5cdFx0LnJlcGxhY2UoL1xcLy9nLCBcIiUyRlwiKVxuXHRcdC5yZXBsYWNlKC9cXCwvZywgXCIlMkNcIilcblx0XHQucmVwbGFjZSgvXFwmL2csIFwiJTI2XCIpO1xufVxuXG5mdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nIChwYXJhbXMpIHtcblx0cmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpLnJlcGxhY2UoL1xcJTNbYnxCXS9nLCBcIjtcIilcbn1cblxuZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0IChwYXJhbXNBcnIpIHtcblx0dmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuXHR2YXIgcGFyYW1QYWlyO1xuXHR2YXIgaTtcblxuXHRmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0cGFyYW1QYWlyID0gcGFyYW1zQXJyW2ldLnNwbGl0KFwiPVwiKTtcblx0XHRwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXVxuXHR9XG5cblx0cmV0dXJuIHBhcnNlZFBhcmFtcztcbn1cblxuZnVuY3Rpb24gZm9ybWF0UGFyYW1zIChwYXJhbXMpIHtcblx0aWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcblx0aWYgKHBhcmFtcy5sYXllcnMpIHBhcmFtcy5sYXllcnMgPSBmb3JtYXRMYXllclBhcmFtKHBhcmFtcy5sYXllcnMpO1xuXHRpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuXHRpZiAocGFyYW1zLnBvaXMpIHBhcmFtcy5wb2lzID0gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBhcmFtcy5wb2lzKVxuXHRpZiAocGFyYW1zLmxheWVyR3JvdXBzKSBwYXJhbXMubGF5ZXJHcm91cHMgPSBmb3JtYXRMYXllckdyb3Vwc1BhcmFtKHBhcmFtcy5sYXllckdyb3Vwcylcbn1cblxuZnVuY3Rpb24gZm9ybWF0Q2VudGVyUGFyYW0gKGNlbnRlcikge1xuXHRyZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbSAobGF5ZXJzKSB7XG5cdHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XG5cdFx0XCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxuXHRcdFwib3BhY2l0eVZhbHNcIjoge31cblx0fTtcblx0dmFyIGxheWVySWQ7XG5cdHZhciBpO1xuXG5cdGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XG5cdGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcblx0XHRsYXllcklkID0gbGF5ZXJzW2ldO1xuXHRcdGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XG5cdFx0Zm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2krMV07XG5cdH1cblxuXHRyZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbSAoYmFzZWxheWVycykge1xuXHRyZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbSAocG9pcykge1xuXHRyZXR1cm4gcG9pcy5zcGxpdCgnOycpXG5cdFx0LmZpbHRlcigoc3RyKSA9PiBzdHIgIT09ICcnKVxuXHRcdC5tYXAoKHBvaSkgPT4ge1xuXHRcdFx0cG9pID0gcG9pLnNwbGl0KCcsJyk7XG5cdFx0XHRpZiAocG9pLmxlbmd0aCA+IDIpIHtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZVBPSShwb2lbMF0sIHBvaVsxXSwgcG9pLnNwbGljZSgyKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlUE9JKHBvaVswXSwgcG9pWzFdLCBudWxsKTtcblx0XHRcdH1cblx0XHR9KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJHcm91cHNQYXJhbSAobGF5ZXJHcm91cFNldHRpbmdzKSB7XG5cdHJldHVybiBsYXllckdyb3VwU2V0dGluZ3Muc3BsaXQoJywnKVxufVxuXG5mdW5jdGlvbiBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhhY3RpdmVMYXllckdyb3VwSWRzLCBjb25maWcpIHtcblx0Y29uZmlnLmxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10uZm9yRWFjaChsYXllckdyb3VwID0+IHtcblx0XHQvLyBzZXQgbGF5ZXIgZ3JvdXAgdG8gYWN0aXZlIGlmIGl0cyBpZCBhcHBlYXJzIGluIHRoZSBzaGFyZSB1cmwgc2V0dGluZ3Ncblx0XHRsYXllckdyb3VwLmFjdGl2ZSA9IGFjdGl2ZUxheWVyR3JvdXBJZHMuZmlsdGVyKGlkID0+IHtcblx0XHRcdHJldHVybiBpZCA9PT0gbGF5ZXJHcm91cC5pZFxuXHRcdH0pLmxlbmd0aCA+IDBcblx0fSlcbn1cblxuZnVuY3Rpb24gYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHR2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xuXHRjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblxuXHR2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0dmFyIGVuYWJsZWRMYXllcjtcblx0dmFyIGZvdW5kTGF5ZXI7XG5cdHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Zm91bmRMYXllciA9IGZhbHNlO1xuXHRcdGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG5cdFx0Zm9yIChwcm9wIGluIGxheWVycykge1xuXHRcdFx0aWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0XHRcdGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG5cdFx0XHRcdFx0bGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XG5cdFx0XHRcdFx0Zm91bmRMYXllciA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChmb3VuZExheWVyKSBicmVhaztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyAoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG5cdHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XG5cdHZhciBiYXNlbGF5ZXI7XG5cdHZhciBpO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBiYXNlbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0YmFzZWxheWVyID0gYmFzZWxheWVyc1tpXTtcblx0XHRiYXNlbGF5ZXIuYWN0aXZlID0gKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSkgPyB0cnVlIDogZmFsc2U7XG5cdH1cbn1cblxuZnVuY3Rpb24gYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHBvaXMsIGNvbmZpZykge1xuXHRjb25maWdbXCJwb2lzXCJdID0gcG9pc1xufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zaGFyZS5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tIFwiLi9tYXBcIjtcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XG5cbmV4cG9ydCBjb25zdCBCQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xuXG52YXIgX2Jhc2VsYXllcnM7XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzIChtYXAsIGxheWVyQ29uZmlnKSB7XG5cdGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHxcblx0XHRbe1xuXHRcdFx0XCJpZFwiIDogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXG5cdFx0XHRcInVybFwiIDogXCJodHRwOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS9saWdodF9hbGwve3p9L3t4fS97eX0ucG5nXCIsXG5cdFx0XHRcImF0dHJpYnV0aW9uXCIgOiAnJmNvcHk7IDxhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbnNcIj5DQVJUTzwvYT4nXG5cdFx0fV07XG5cblx0X2Jhc2VsYXllcnMgPSBsYXllckNvbmZpZztcblx0dmFyIGk7XG5cdHZhciBiYXNlTGF5ZXI7XG5cdHZhciBjb25maWc7XG5cblx0Zm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uZmlnID0gbGF5ZXJDb25maWdbaV07XG5cblx0XHRpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuXHRcdGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xuXHRcdGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcblx0XHRiYXNlTGF5ZXIuYWRkVG8obWFwKTtcblx0fVxuXG5cdGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXJVSSAoY29uZmlnKSB7XG5cdHZhciBiYXNlVUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcblx0dmFyIGJhc2VXcmFwcGVyO1xuXHR2YXIgYmFzZUltZztcblx0dmFyIGJhc2VMYWJlbDtcblxuXHR2YXIgbGF5ZXI7XG5cdGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdGxheWVyID0gY29uZmlnW2ldO1xuXHRcdGlmICghbGF5ZXIuaGFzT3duUHJvcGVydHkoXCJpbWFnZVwiKSkgY29udGludWU7XG5cblx0XHRiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0YmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XG5cdFx0YmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdFx0YmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuXHRcdGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcblx0XHRiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcblx0XHRiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xuXHRcdGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xuXHRcdGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG5cdFx0YmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljaylcblxuXHRcdGQzLnNlbGVjdChiYXNlV3JhcHBlcilcblx0XHRcdC5jbGFzc2VkKFwiYmFzZS1zZWxlY3RvclwiLCB0cnVlKVxuXHRcdFx0LmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcblxuXHRcdGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XG5cdH1cblxuXHRkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1ib3R0b20gbGVhZmxldC1sZWZ0XCIpWzBdLmFwcGVuZENoaWxkKGJhc2VVSSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUJhc2VDbGljayAoZSkge1xuXHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcblx0dG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuXHRyZW1vdmVDdXJyZW50QmFzZUxheWVyKCk7XG5cdGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuXG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjaGFuZ2VpbmcgYmFzZSBsYXllclxuXHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICBldmVudEFjdGlvbjogJ2NoYW5nZSBiYXNlIGxheWVyJyxcblx0ICBldmVudExhYmVsOiBsYXllcmlkLFxuXHQgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHR9KTtcblxuXHR1cGRhdGVTaGFyZVVybCgpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkgKGJhc2VVSUVsZW0pIHtcblx0ZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuXHRkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllciAoKSB7XG5cdHZhciBtYXAgPSBHZXRNYXAoKTtcblxuXHRtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHRcdGlmIChsYXllci5vcHRpb25zLnR5cGUgIT09IEJBU0VfTEFZRVJfVFlQRSkgcmV0dXJuO1xuXHRcdG1hcC5yZW1vdmVMYXllcihsYXllcik7XG5cdH0pXG59XG5cbmZ1bmN0aW9uIGFkZE5ld0Jhc2VMYXllclRvTWFwIChsYXllcmlkKSB7XG5cdHZhciBtYXAgPSBHZXRNYXAoKTtcblxuXHR2YXIgbGF5ZXI7XG5cdGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0bGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcblx0XHRpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xuXHRcdGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcblx0XHRsYXllci5sYXllci5hZGRUbyhtYXApO1xuXHRcdGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XG5cdFx0YnJlYWs7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyIChsYXllckNvbmZpZykge1xuXHRyZXR1cm4gTC50aWxlTGF5ZXIoXG5cdFx0bGF5ZXJDb25maWcudXJsLFxuXHRcdG1ha2VCYXNlTGF5ZXJPcHRpb25zKGxheWVyQ29uZmlnKVxuXHQpO1xufVxuXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyT3B0aW9ucyAoY29uZmlnKSB7XG5cdHZhciBvcHRpb25zID0ge307XG5cdGlmIChjb25maWcuaWQpIG9wdGlvbnMuaWQgPSBjb25maWcuaWQ7XG5cdGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XG5cdGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XG5cdG9wdGlvbnMudHlwZSA9IEJBU0VfTEFZRVJfVFlQRTtcblxuXHRyZXR1cm4gb3B0aW9ucztcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2VsYXllci5qcyIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYXJrZXIgKGxhdCwgbG5nKSB7XG5cdHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7aWNvbjogZ3JhcGhJY29ufSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJY29uICh0eXBlKSB7XG5cdHJldHVybiB0eXBlID09PSAnaG92ZXInID8gaG92ZXJJY29uIDogZ3JhcGhJY29uO1xufVxuXG52YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcblxudmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxuXHRzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0aWNvblNpemU6IFsyNSwgNDFdLFxuXHRpY29uQW5jaG9yOiBbMTIsIDQxXSxcblx0cG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHRzaGFkb3dTaXplOiBbNDEsIDQxXVxufSk7XG5cbnZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuXHRpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxuXHRzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0aWNvblNpemU6IFsyNSwgNDFdLFxuXHRpY29uQW5jaG9yOiBbMTIsIDQxXSxcblx0cG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHRzaGFkb3dTaXplOiBbNDEsIDQxXVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tYXJrZXIuanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gXCIuL3BhbmVsXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gQmluZFRhYkV2ZW50cyAoKSB7XG5cdGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWN0aXZlVGFiICgpIHtcblx0cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYW5lbC10b3AtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2sgKCkge1xuXHQvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuXHRpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHJldHVybjtcblx0XG5cdC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcblx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgZXZlbnRDYXRlZ29yeTogJ3RhYicsXG5cdCAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgZXZlbnRMYWJlbDogdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKSxcblx0ICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0fSk7XG5cblx0SGFuZGxlVGFiQ2hhbmdlKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSGFuZGxlVGFiQ2hhbmdlIChuZXdDbGFzcykge1xuXHRkaXNhYmxlQWN0aXZlVGFiKCk7XG5cdGVuYWJsZVRhYihuZXdDbGFzcyk7XG5cdHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVRhYiAobmV3Q2xhc3MpIHtcblx0ZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG5bZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKVxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpLmNsYXNzTGlzdC5hZGQobmV3Q2xhc3MpXG5cblx0ZDMuc2VsZWN0KFwiLnBhbmVsLXNlY3Rpb24td3JhcHBlcltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblxuXHR0b2dnbGVNYXBQYWRkaW5nKCk7XG5cdHJlc2V0UGFuZWxXaWR0aCgpO1xuXHR1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVBY3RpdmVUYWIgKCkge1xuXHR2YXIgYWN0aXZlQ2xhc3MgPSBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xuXG5cdGQzLnNlbGVjdEFsbCgnI21hcC13cmFwcGVyLCAjcmlnaHQtcGFuZWwnKVxuXHRcdC5jbGFzc2VkKGFjdGl2ZUNsYXNzLCBmYWxzZSk7XG5cblx0ZDMuc2VsZWN0QWxsKCcucGFuZWwtdG9wLWJ0bi5hY3RpdmUsIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXIuYWN0aXZlJylcblx0XHQuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVNYXBQYWRkaW5nICgpIHtcblx0dmFyIHBhZGRpbmdSaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikub2Zmc2V0V2lkdGg7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xufVxuXG4vKipcbiAqIFNpbmNlIHRoZSBwYW5lbCBoYXMgY2hpbGQgZWxlbWVudHMgd2l0aCBwb3NpdGlvbiBmaXhlZCBhbmQgd2lkdGggaW5oZXJpdFxuICogd2UgbmVlZCB0byBjbGVhciB0aGUgaW5saW5lIHdpZHRoIHByb3BlcnR5IGlmIGFuZCBvbmx5IGlmIHRoZSBpbmxpbmVcbiAqIHdpZHRoIGlzIGxlc3MgdGhhbiB0aGUgbWluIHdpZHRoXG4gKi9cbmZ1bmN0aW9uIHJlc2V0UGFuZWxXaWR0aCAoKSB7XG5cdHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIik7XG5cdHZhciB3aWR0aCA9IHBhbmVsLnN0eWxlLndpZHRoO1xuXHRpZiAoIXdpZHRoKSByZXR1cm47XG5cblx0dmFyIHBhbmVsTWluV2lkdGggPSBkMy5zZWxlY3QocGFuZWwpLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdGlmIChwYXJzZUludCh3aWR0aC5zbGljZSgwLCAtMiksIDEwKSA+IHBhcnNlSW50KHBhbmVsTWluV2lkdGgsIDEwKSkgcmV0dXJuO1xuXG5cdHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3RhYnMuanMiLCJpbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHt1cGRhdGVMYXllck9wYWNpdHl9IGZyb20gXCIuL2xheWVyXCI7XG5cbi8vIHNldCBpdCBtYW51YWxseSBmb3Igbm93XG5jb25zdCBPUEFDSVRZX1JBTkdFX01BWCA9IDkwXG5cbnZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG5cdC5kb21haW4oWzEsIDBdKVxuXHQucmFuZ2UoWzAsIE9QQUNJVFlfUkFOR0VfTUFYXSlcblx0LmNsYW1wKHRydWUpXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24gKGxheWVyLCBzbGlkZXJIYW5kbGUsIG9wYWNpdHkpIHtcblx0b3BhY2l0eSA9IG9wYWNpdHkgfHwgbGF5ZXIub3BhY2l0eVxuXHRzbGlkZXJIYW5kbGUuc3R5bGUudG9wID0gJycrb3BhY2l0eVNjYWxlKG9wYWNpdHkpKydweCdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VPcGFjaXR5U2xpZGVyIChsYXllcikge1xuXHR2YXIgbGF5ZXJPcGFjaXR5ID0gbGF5ZXIub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gbGF5ZXIub3BhY2l0eSA6IDFcblx0dmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXHR2YXIgc2xpZGVyVHJhY2tPdmVybGF5ID0gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpXG5cdHZhciBpY29uV3JhcHBlckNsb3NlZCA9IG1ha2VPcGFjaXR5SWNvbldyYXBwZXIoJ2Nsb3NlZCcsIGxheWVyLCBzbGlkZXJUcmFja092ZXJsYXkpXG5cblx0d3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci13cmFwcGVyJylcblx0d3JhcHBlci5hcHBlbmRDaGlsZChzbGlkZXJUcmFja092ZXJsYXkpXG5cdHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbldyYXBwZXJDbG9zZWQpXG5cdHJldHVybiB3cmFwcGVyXG59XG5cbmZ1bmN0aW9uIG1ha2VPcGFjaXR5SWNvbldyYXBwZXIoc3RhdGUsIGxheWVyLCBzbGlkZXJUcmFja092ZXJsYXkpIHtcblx0dmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXHR2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG5cdHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uLXdyYXBwZXInKVxuXHRpY29uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktaWNvbicpXG5cdGljb24uY2xhc3NMaXN0LmFkZChzdGF0ZSlcblx0aWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWdzL29wYWNpdHktaWNvbi0nK3N0YXRlKyctNjR4NjQucG5nJylcblx0aWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpXG5cdGljb24uc2V0QXR0cmlidXRlKCd0aXRsZScsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpXG5cdHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbilcblx0d3JhcHBlci5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcblx0XHR2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdXG5cdFx0dXBkYXRlTGF5ZXJPcGFjaXR5KGxheWVyLCAwKVxuXHRcdHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCAwKVxuXHR9XG5cdHJldHVybiB3cmFwcGVyXG59XG5cbmZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cblx0dmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXHR2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXHR2YXIgc2xpZGVySGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuXHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKVxuXHR0cmFjay5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci10cmFjaycpXG5cdHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxuXG5cdG92ZXJsYXkuYXBwZW5kQ2hpbGQodHJhY2spXG5cdG92ZXJsYXkuYXBwZW5kQ2hpbGQoc2xpZGVySGFuZGxlKVxuXG5cdGlmIChsYXllci5hY3RpdmUpIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlKVxuXHRzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KVxuXG5cdHJldHVybiBvdmVybGF5XG59XG5cbmZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpIHtcblx0ZDMuc2VsZWN0KG92ZXJsYXkpLmNhbGwoZDMuZHJhZygpXG5cdFx0Lm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHNsaWRlckhhbmRsZSA9IG92ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF1cblx0XHRcdHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcblx0XHRcdHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSlcblx0XHRcdHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBuZXdPcGFjaXR5KVxuXHRcdH0pXG5cdFx0Lm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHQgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcblxuXHRcdCAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3Mgb3BhY2l0eSBzbGlkZXIgY2hhbmdlXG5cdFx0ICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRcdGV2ZW50Q2F0ZWdvcnk6ICdvcGFjaXR5IHNsaWRlcicsXG5cdFx0XHRldmVudEFjdGlvbjogJ2NoYW5nZScsXG5cdFx0XHRldmVudExhYmVsOiAne1wiJyArIGxheWVyLm5hbWUgKyAnXCI6IFwiJyArIG5ld09wYWNpdHkgKyAnXCJ9Jyxcblx0XHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHRcdCAgfSk7XG5cblx0XHRcdHVwZGF0ZVNoYXJlVXJsKClcblx0XHR9KVxuXHQpXG59XG5cbmZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcblx0dmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5KVsxXVxuXHR2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcylcblx0cmV0dXJuIG5ld09wYWNpdHlcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL29wYWNpdHlTbGlkZXIuanMiLCIvKlxuICBcImxvZ29cIjoge1xuXHRcImltYWdlXCI6IFwiaW1ncy9sYW5kYXRfbG9nb19ibHVlLnBuZ1wiLFxuXHRcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxuXHRcImxpbmtcIjogXCJodHRwczovL2xhbmRhdC1kZXYubmVtYWMub3JnXCIsXG5cdFwibG9jYXRpb25cIjogW1wiYm90dG9tXCIsIFwicmlnaHRcIl1cbiAgfSxcbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZUxvZ28gKGxvZ29kYXRhKSB7XG5cdGlmICghbG9nb2RhdGEuaW1hZ2UpIHJldHVybjtcblxuXHR2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xuXHR2YXIgbG9nb0ltYWdlID0gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKTtcblx0dmFyIGxvZ29MaW5rID0gbG9nb2RhdGEubGluayA/IGNyZWF0ZUxvZ29MaW5rKGxvZ29kYXRhLmxpbmspIDogbnVsbDtcblxuXHRpZiAobG9nb0xpbmspIHtcblx0XHRsb2dvTGluay5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHRcdGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcblx0fSBlbHNlIHtcblx0XHRsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHR9XG5cblx0dmFyIGluc2VydEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxvZ29kYXRhLmxvY2F0aW9uKVswXTtcblx0dmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG5cdGluc2VydEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvZ29XcmFwcGVyLCBleGlzdGluZ0NoaWxkKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9nb1dyYXBwZXIgKCkge1xuXHR2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRkMy5zZWxlY3QobG9nb1dyYXBwZXIpLmNsYXNzZWQoXCJwcm9qZWN0LWxvZ29cIiwgdHJ1ZSk7XG5cdHJldHVybiBsb2dvV3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9nb0ltYWdlIChsb2dvZGF0YSkge1xuXHR2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0bG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsb2dvZGF0YS5pbWFnZSk7XG5cdGlmIChsb2dvZGF0YS5sYWJlbCkge1xuXHRcdGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbG9nb2RhdGEubGFiZWwpO1xuXHRcdGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsb2dvZGF0YS5sYWJlbCk7XG5cdH1cblx0cmV0dXJuIGxvZ29JbWFnZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9nb0xpbmsgKGxpbmspIHtcblx0dmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG5cdGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XG5cdGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcblxuXHRsb2dvTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuXHQgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjbGlja2luZyBsb2dvXG5cdCAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0ZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0ZXZlbnRMYWJlbDogJ2xhbmRhdCBsb2dvJyxcblx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICB9KTtcblx0fSk7XG5cblx0cmV0dXJuIGxvZ29MaW5rO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbG9nby5qcyIsImltcG9ydCB7Y2xlYXJNYXB9IGZyb20gJy4vbWFwJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCaW5kTW9iaWxlTWVudUV2ZW50cyAoKSB7XG5cdGQzLnNlbGVjdChcIiNtb2JpbGUtdG9nZ2xlLXBhbmVsLWJ1dHRvblwiKVxuXHRcdC5vbihcImNsaWNrXCIsIGhhbmRsZU1vYmlsZVRvZ2dsZVBhbmVsQnRuQ2xpY2spXG5cdGQzLnNlbGVjdEFsbChcIiNtb2JpbGUtY2xlYXItbWFwLWJ1dHRvblwiKVxuXHRcdC5vbihcImNsaWNrXCIsIGhhbmRsZU1vYmlsZUNsZWFyTWFwQnRuQ2xpY2spXG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1vYmlsZUNsZWFyTWFwQnRuQ2xpY2soKSB7XG5cdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cdGNsZWFyTWFwKClcblx0ZGlzcGF0Y2hNb2JpbGVDbGVhck1hcEJ0bkNsaWNrQW5hbHl0aWNzKClcbn1cblxuZnVuY3Rpb24gaGFuZGxlTW9iaWxlVG9nZ2xlUGFuZWxCdG5DbGljayAoKSB7XG5cdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cdHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KFwiI3dyYXBwZXJcIik7XG5cdHZhciBzdGF0dXMgPSB3cmFwcGVyLmNsYXNzZWQoXCJtb2JpbGUtbWVudS1oaWRkZW5cIik7XG5cdHdyYXBwZXIuY2xhc3NlZChcIm1vYmlsZS1tZW51LWhpZGRlblwiLCAhc3RhdHVzKTtcblx0ZGlzcGF0Y2hNb2JpbGVUb2dnbGVQYW5lbEJ0bkNsaWNrQW5hbHl0aWNzKCFzdGF0dXMgPyBcIm9wZW5pbmdcIiA6IFwiY2xvc2luZ1wiKTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hNb2JpbGVDbGVhck1hcEJ0bkNsaWNrQW5hbHl0aWNzICgpIHtcblx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0ZXZlbnRDYXRlZ29yeTogJ21vYmlsZSBjbGVhcm1hcCcsXG5cdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0ZXZlbnRMYWJlbDogJ01vYmlsZSBDbGVhciBNYXAnLFxuXHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHR9KVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaE1vYmlsZVRvZ2dsZVBhbmVsQnRuQ2xpY2tBbmFseXRpY3MgKHN0YXR1cykge1xuXHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRldmVudENhdGVnb3J5OiAnbW9iaWxlIG1lbnUnLFxuXHRcdGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHRcdGV2ZW50TGFiZWw6ICdNb2JpbGUgUGFuZWwgVG9nZ2xlJyArIHN0YXR1cyxcblx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0fSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tb2JpbGUuanMiLCJpbXBvcnQge0dldE1hcCwgY2xlYXJNYXB9IGZyb20gXCIuL21hcFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCaW5kRGVza3RvcE1lbnVFdmVudHMgKCkge1xuXHRkMy5zZWxlY3QoXCIjdG9nZ2xlLXBhbmVsLWJ1dHRvblwiKVxuXHRcdC5vbihcImNsaWNrXCIsIGhhbmRsZURlc2t0b3BUb2dnbGVQYW5lbEJ0bkNsaWNrKVxuXHRkMy5zZWxlY3RBbGwoXCIjY2xlYXItbWFwLWJ1dHRvblwiKVxuXHRcdC5vbihcImNsaWNrXCIsIGhhbmRsZURlc2t0b3BDbGVhck1hcEJ0bkNsaWNrKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVEZXNrdG9wQ2xlYXJNYXBCdG5DbGljayhlKSB7XG5cdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cdGNsZWFyTWFwKClcblx0Ly8gUXVpY2sgYW5kIGRpcnR5IHNvbHV0aW9uIC0tIGNyZWF0ZXMgYSBuZXcgc2Vzc2lvbiBmb3IgZ29vZ2xlIGFuYWx5dGljcz9cblx0Ly92YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVswXVxuXHQvL3dpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsXG5cdGRpc3BhdGNoRGVza3RvcENsZWFyTWFwQnRuQ2xpY2tBbmFseXRpY3MoKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVEZXNrdG9wVG9nZ2xlUGFuZWxCdG5DbGljayAoZSkge1xuXHRkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXHR2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChcIiN3cmFwcGVyXCIpO1xuXHR2YXIgc3RhdHVzID0gd3JhcHBlci5jbGFzc2VkKFwicGFuZWwtYWN0aXZlXCIpO1xuXHR3cmFwcGVyLmNsYXNzZWQoXCJwYW5lbC1hY3RpdmVcIiwgIXN0YXR1cyk7XG5cdHdyYXBwZXIuY2xhc3NlZChcInBhbmVsLWluYWN0aXZlXCIsIHN0YXR1cyk7XG5cdChHZXRNYXAoKSkuaW52YWxpZGF0ZVNpemUoe3BhbjogZmFsc2V9KTtcblx0ZGlzcGF0Y2hEZXNrdG9wVG9nZ2xlUGFuZWxCdG5DbGlja0FuYWx5dGljcyghc3RhdHVzID8gXCJPcGVuXCIgOiBcIkNsb3NlXCIpO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaERlc2t0b3BDbGVhck1hcEJ0bkNsaWNrQW5hbHl0aWNzICgpIHtcblx0Z2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdFx0ZXZlbnRDYXRlZ29yeTogJ2Rlc2t0b3AnLFxuXHRcdGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHRcdGV2ZW50TGFiZWw6ICdDbGVhciBNYXAgQnRuJyxcblx0XHRub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRGVza3RvcFRvZ2dsZVBhbmVsQnRuQ2xpY2tBbmFseXRpY3MgKHN0YXR1cykge1xuXHRnYSgnc2VuZCcsICdldmVudCcsIHtcblx0XHRldmVudENhdGVnb3J5OiAnZGVza3RvcCcsXG5cdFx0ZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdFx0ZXZlbnRMYWJlbDogJ1BhbmVsIFRvZ2dsZSAnICsgc3RhdHVzLFxuXHRcdG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHR9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhbmVsVG9nZ2xlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==